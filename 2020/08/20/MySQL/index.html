<!DOCTYPE html>
<html lang="en">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="笔记 | MySQL" />
    <meta name="hexo-theme-A4" content="v1.9.6" />
    <link rel="alternate icon" type="image/webp" href="/img/avatar.png">
    <title>Jingcun Yan</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--注意：首页既不是post也不是page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--返回顶部css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--目录-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery-bundle.min.css">


<meta name="generator" content="Hexo 7.3.0"></head>
    
    
        <style>
            .index-main{
                max-width:  880px;
            }
        </style>

    
    



    

    
    

    
    
    
    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        <script>
            const options = {
                bottom: '40px', // default: '32px'
                right: 'unset', // default: '32px'
                left: '42px', // default: 'unset'
                time: '0.3s', // default: '0.3s'
                mixColor: '#fff', // default: '#fff'
                backgroundColor: ' #e4e4e4 ',  // default: '#fff'
                buttonColorDark: '#100f2c',  // default: '#100f2c'
                buttonColorLight: '#fff', // default: '#fff'
                saveInCookies: true, // default: true,
                label: '🌓', // default: ''
                autoMatchOsTheme: true // default: true
            }
            const darkmode = new Darkmode(options);
            darkmode.showWidget();
        </script>
        
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/avatar.png" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">Jingcun Yan</a> 
            <span class="description"></span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">首页</a></li>
            
        
            
                <li><a href="/list/">文章</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--说明是文章post页面-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    笔记 | MySQL
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                
                    
                     <span>字数总计：9.8k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>阅读估时：38分钟</span>
                
                
            </div>
    

    <div class="post-md">
        
        <div class=".article-gallery"><h2 id="MySQL-准备工作"><a href="#MySQL-准备工作" class="headerlink" title="MySQL-准备工作"></a>MySQL-准备工作</h2><h3 id="安装与登录"><a href="#安装与登录" class="headerlink" title="安装与登录"></a>安装与登录</h3><p>数据库登录：</p>
<ul>
<li>cmd 打开命令行之后 用 <code>mysql -uroot -p密码（直接输）</code>输入密码是明文</li>
<li>或者 <code>mysql -uroot -p</code> 回车，然后出来“enter password” 再输密码是密文***</li>
</ul>
<p>数据库忘记密码怎么办？</p>
<p>方法1：用SET PASSWORD命令<br>首先登录MySQL<br>格式：<code>mysql-&gt;set password for 用户名@localhost = password（&#39;新密码1&#39;）;</code><br>例子：<code>mysql&gt;set password for root@localhost = password（&#39;1231&#39;）；</code></p>
<p>方法2：用mysqladmin<br>格式：<code>mysqladmin -u用户名 -p旧密码 password 新密码</code><br>例子：<code>mysqladmin -uroot -p123456 password 123</code></p>
<p>方法3：用UPDATE直接编辑user表<br>首先登录MySQL。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use mysql；</span><br><span class="line">mysql&gt; update user <span class="built_in">set</span> password=password(<span class="string">&#x27;333&#x27;</span>) <span class="built_in">where</span> user= <span class="string">&#x27;root&#x27;</span> and host = <span class="string">&#x27;localhost&#x27;</span>；</span><br><span class="line">mysql&gt; flush privileges；</span><br></pre></td></tr></table></figure>

<p>方法4：在忘记root密码的时候，可以这样</p>
<p>以windows为例：</p>
<ol>
<li>关闭正在运行的MysqL服务。</li>
<li>打开Dos窗口，转到mysql\bin目录。</li>
<li>输入<code>mysqld --skip-grant-tables 回车</code>。–skip-grant-tables的意思是启动MysQL服务的时候跳过权限表认证。</li>
<li>再开一个Dos窗口（因为刚才那个Dos窗口已经不能动了），转到mysql\bin目录。</li>
<li>输入myscql回车，如果成功，将出现MySQL提示符&gt;。</li>
<li>连接权限数据库：<code>use mysql；</code></li>
<li>改密码：<code>update user set password = password（&quot;123&quot;）where user=&quot;root&quot;；</code>（别忘了最后加分号）。</li>
<li>刷新权限（必须步骤）：<code>flush privileges；</code></li>
<li>退出quit。</li>
<li>注销系统，再进入，使用用户名root和刚才设置的新密码123登录。</li>
</ol>
<p>如何卸载？</p>
<ul>
<li>在安装的时候，那个安装程序会有一个remove选项，先remove了</li>
<li>然后C盘下的program filesx86下面有一个mySQL文件夹，要强行删除</li>
<li>然后C盘的隐藏目录有一个programData，有个MySQL文件夹，删除了</li>
</ul>
<h3 id="认识MySQL"><a href="#认识MySQL" class="headerlink" title="认识MySQL"></a>认识MySQL</h3><h2 id="sql、DB、DBMS分别是什么，他们之间的关系？"><a href="#sql、DB、DBMS分别是什么，他们之间的关系？" class="headerlink" title="sql、DB、DBMS分别是什么，他们之间的关系？"></a>sql、DB、DBMS分别是什么，他们之间的关系？</h2><ul>
<li><p>DB：</p>
<ul>
<li>DataBase（数据库，数据库实际上在硬盘上以文件的形式存在）</li>
</ul>
</li>
<li><p>DBMS：</p>
<ul>
<li>DataBase Management System（数据库管理系统，常见的有：MysQL oracle DB2 Sybase sqlserver…）</li>
</ul>
</li>
<li><p>SQL：</p>
<ul>
<li>结构化查询语言，是一门标准通用的语言。标准的sql适合于所有的数据库产品。</li>
<li>SQL属于高级语言。只要能看懂英语单词的，写出来的sql语句，可以读懂什么意思。</li>
<li>SQL语句在执行的时候，实际上内部也会先进行编译，然后再执行sql。（sql语句的编译由DBMS完成。）DBMS负责执行sq1语句，通过执行sq1语句来操作DB当中的数据。</li>
<li>DBMS-&gt;（执行）-&gt;SQL-（操作）-&gt;DB</li>
</ul>
</li>
</ul>
<h3 id="什么是表？"><a href="#什么是表？" class="headerlink" title="什么是表？"></a>什么是表？</h3><p>表：table</p>
<p>表：table是数据库的基本组成单元，所有的数据都以表格的形式组织，目的是可读性强。</p>
<p>一个表包括行和列：</p>
<ul>
<li>行：被称为数据&#x2F;记录（data）</li>
<li>列：被称为字段（column）</li>
</ul>
<p>每一个字段应该包括哪些属性？</p>
<p>字段名、数据类型、相关的约束。</p>
<h3 id="SQL语句怎么分类"><a href="#SQL语句怎么分类" class="headerlink" title="SQL语句怎么分类"></a>SQL语句怎么分类</h3><ul>
<li>DQL（数据查询语言）：查询语句，凡是select语句都是DQL。</li>
<li>DML（数据操作语言）：insert delete update，对表当中的数据进行增删改。</li>
<li>DDL（数据定义语言）：create drop alter，对表结构的增删改。</li>
<li>TCIL（事务控制语言）：commit提交事务，rollback回滚事务。（rcL中的T是Transaction）</li>
<li>DCL（数据控制语言）：grant授权、revoke撤销权限等。</li>
</ul>
<h3 id="导入数据"><a href="#导入数据" class="headerlink" title="导入数据"></a>导入数据</h3><p>第一步：登录mysq1数据库管理系统<br>dos命令窗口：<code>mysql -uroot -p333</code></p>
<p>第二步：查看有哪些数据库<br><code>show databases；</code>（这个不是SQL语句，属于MysQL的命令。）</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+-----------------------------------+</span><br><span class="line">| Database                        |</span><br><span class="line">+---------------------------------+</span><br><span class="line">| information_schema   |</span><br><span class="line">| mysql                             |</span><br><span class="line">| performance_schema |</span><br><span class="line">| test                                  |</span><br><span class="line">+----------------------------------+</span><br></pre></td></tr></table></figure>

<p>第三步：创建属于我们自己的数据库<br><code>create database bjpowernode；</code>（这个不是SQL语句，属于MysQL的命令。）</p>
<p>第四步：使用bjpowernode数据<br><code>use bjpowernode；</code>（这个不是SQL语句，属于MysQL的命令。）</p>
<p>第五步：查看当前使用的数据库中有哪些表？<br><code>show tables；</code>（这个不是SQL语句，属于MysQL的命令。）</p>
<p>第六步：初始化数据<br><code>mysq1&gt;source 文件拖过来</code></p>
<p>注意：数据初始化完成之后，有三张表：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+-----------------------------—-+</span><br><span class="line">l Tables in bjpowernode I</span><br><span class="line">+—------------------------------+</span><br><span class="line">I dept                                  I</span><br><span class="line">|emp                                  I</span><br><span class="line">|salgrade                            I</span><br><span class="line">+—------------------------------+</span><br></pre></td></tr></table></figure>

<h3 id="什么是sql脚本"><a href="#什么是sql脚本" class="headerlink" title="什么是sql脚本"></a>什么是sql脚本</h3><p>当一个文件的扩展名是.sql，并且该文件中编写了大量的slq语句，我们称这样的文件为sql脚本。<br>注意：直接使用source命令可以执行sql脚本。</p>
<p>sq1脚本中的数据量太大的时候，无法打开，请使用source命令完成初始化。</p>
<h3 id="删库跑路"><a href="#删库跑路" class="headerlink" title="删库跑路"></a>删库跑路</h3><p><code>drop database bipowernode;</code></p>
<h3 id="查看表结构："><a href="#查看表结构：" class="headerlink" title="查看表结构："></a>查看表结构：</h3><p><code>desc 表名字；</code></p>
<p><code>drop table if exists &lt;表名&gt;;</code> &#x2F;&#x2F; 当这个表存在的话删除。</p>
<p><code>drop table &lt;表名&gt;;</code> &#x2F;&#x2F; 删除表</p>
<p><code>mysql&gt; desc emp;</code></p>
<h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><p><code>select database();</code> 查看当前使用的是哪个数据库</p>
<p><code>select version();</code> 查看mysql的版本号</p>
<p><code>\c</code> 命令，结束一条语句</p>
<p><code>exit;</code> 退出mySQL</p>
<h3 id="查看创建表的语句"><a href="#查看创建表的语句" class="headerlink" title="查看创建表的语句"></a>查看创建表的语句</h3><p><code>show create table &lt;表名称&gt;；</code></p>
<h2 id="MySQL-表的创建"><a href="#MySQL-表的创建" class="headerlink" title="MySQL-表的创建"></a>MySQL-表的创建</h2><h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><p>建表语句的语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(</span><br><span class="line">    字段名<span class="number">1</span> 数据类型,</span><br><span class="line">    字段名<span class="number">2</span> 数据类型,</span><br><span class="line">    字段名<span class="number">3</span> 数据类型,</span><br><span class="line">    ....</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>关于MySQL当中字段的数据类型？以下只说常见的</p>
<ul>
<li>int 整数型(java中的int)</li>
<li>bigint 长整型(java中的long)</li>
<li>float 浮点型(java中的float double)</li>
<li>char 定长字符串(String)</li>
<li>varchar 可变长字符串(StringBuffer&#x2F;StringBuilder) 理论上最大为65532字节</li>
<li>date 日期类型 （对应Java中的java.sql.Date类型）</li>
<li>BLOB 二进制大对象（存储图片、视频等流媒体信息） Binary Large OBject （对应java中的Object）</li>
<li>CLOB 字符大对象（存储较大文本，比如，可以存储4G的字符串。） Character Large OBject（对应java中的Object）</li>
<li>……</li>
</ul>
<p><strong>char和varchar怎么选择？</strong></p>
<ul>
<li>在实际的开发中，当某个字段中的数据长度不发生改变的时候，是定长的，例如：性别、生日等都是采用char。</li>
<li>当一个字段的数据长度不确定，例如：简介、姓名等都是采用varchar。</li>
</ul>
<p>建议：表名在数据库当中一般建议以：t_ 或者 tbl_ 开始</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">创建学生表：</span><br><span class="line"></span><br><span class="line">学生信息包括：</span><br><span class="line">    学号、姓名、性别、班级编号、生日</span><br><span class="line">    学号：<span class="type">bigint</span></span><br><span class="line">    姓名：<span class="type">varchar</span></span><br><span class="line">    性别：<span class="type">char</span></span><br><span class="line">    班级编号：<span class="type">int</span></span><br><span class="line">    生日：<span class="type">char</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</span><br><span class="line">    <span class="keyword">no</span> <span class="type">bigint</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">    sex <span class="type">char</span>(<span class="number">1</span>),</span><br><span class="line">    classno <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">    birth <span class="type">char</span>(<span class="number">10</span>)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h3><p>语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名(字段名<span class="number">1</span>,字段名<span class="number">2</span>,字段名<span class="number">3</span>,....) <span class="keyword">values</span>(值<span class="number">1</span>,值<span class="number">2</span>,值<span class="number">3</span>,....)</span><br></pre></td></tr></table></figure>

<ul>
<li>要求：字段的数量和值的数量相同，并且数据类型要对应相同。</li>
</ul>
<p>注意:</p>
<ul>
<li>如果不指定值，则默认为NULL</li>
<li>insert语句只要执行成功，数据库中必然多一条记录</li>
<li>即使多的这一行记录当中某些字段是NULL，后期也没有办法在执行</li>
<li>insert语句插入数据了，只能使用update进行更新</li>
<li>字段可以省略不写，但是后面的value对数量和顺序都要按照表的创建顺序来写</li>
<li>也可以以此插入多行数据，<code>insert into &lt;表名&gt; (参数) value(值),(值)...</code></li>
</ul>
<p>表的复制和批量插入</p>
<p>将查询结果当做表创建出来。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名 <span class="keyword">as</span> <span class="keyword">select</span>语句;</span><br></pre></td></tr></table></figure>

<p>将查询结果插入到一张表中</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="operator">&lt;</span>目标表名<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>查询表名<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h3><p>语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段名<span class="number">1</span><span class="operator">=</span>值<span class="number">1</span>,字段名<span class="number">2</span><span class="operator">=</span>值<span class="number">2.</span>.. <span class="keyword">where</span> 条件;</span><br></pre></td></tr></table></figure>

<p>更新所有记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">set</span> 字段 <span class="operator">=</span> 值，字段 <span class="operator">=</span> 值, ... ;</span><br></pre></td></tr></table></figure>

<p>注意：没有条件整张表数据全部更新。</p>
<p>案例：将部门10的LOC修改为SHANGHAI，将部门名称修改为RENSHIBU</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> dept1 <span class="keyword">set</span> loc <span class="operator">=</span> <span class="string">&#x27;SHANGHAI&#x27;</span>, dname <span class="operator">=</span> <span class="string">&#x27;RENSHIBU&#x27;</span> <span class="keyword">where</span> deptno <span class="operator">=</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><p>delete删除之后还可以再回来，效率比较低，适合删小表<br>truncate删了之后回不来了，<strong>删之前必须多次确认</strong>，效率高，适合删大型表</p>
<p>语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 <span class="keyword">where</span> 条件;</span><br></pre></td></tr></table></figure>

<p>注意：没有条件全部删除。</p>
<p>删除10部门数据？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> dept1 <span class="keyword">where</span> deptno <span class="operator">=</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p>删除所有记录？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> dept1;</span><br></pre></td></tr></table></figure>

<p>怎么删除大表？（重点）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> 表名; <span class="operator">/</span><span class="operator">/</span> 表被截断，不可回滚。 永久丢失。</span><br></pre></td></tr></table></figure>

<p>对于表结构的修改，这里不讲了，大家使用工具完成即可，因为在实际开发中表一旦设计好之后，对表结构的修改是很少的，修改表结构就是对之前的设计进行了否定，即使需要修改表结构，我们也可以直接使用工具操作。修改表结构的语句不会出现在Java代码当中。<br>出现在java代码当中的sql包括：insert delete update select（这些都是表中的数据操作。）</p>
<p>增删改查有一个术语：CRUD操作</p>
<p>Create（增） Retrieve（检索） Update（修改） Delete（删除）</p>
<h2 id="MySQL-查询"><a href="#MySQL-查询" class="headerlink" title="MySQL-查询"></a>MySQL-查询</h2><h3 id="简单的查询语句（DQL）"><a href="#简单的查询语句（DQL）" class="headerlink" title="简单的查询语句（DQL）"></a>简单的查询语句（DQL）</h3><p>语法格式：</p>
<p><code>select 字段名1，字段名2，字段名3，....from 表名；</code></p>
<p>提示：</p>
<ul>
<li>任何一条sql语句以；结尾</li>
<li>不区分大小写</li>
</ul>
<p>去重：在字段前面加上distinct 关键字</p>
<p>distinct关键字如果出现在所有字段的最前方，则去除所有记录联合起来的重复元素</p>
<p>查找所有工作：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> job <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p>统计岗位的数量</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> job) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p>查询员工的年薪？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename，sal<span class="operator">*</span><span class="number">12</span> <span class="keyword">from</span> emp；</span><br></pre></td></tr></table></figure>

<p>说明: 字段可以参与数学运算</p>
<p>给查询结果的列重命名：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename, sal<span class="operator">*</span><span class="number">12</span> <span class="keyword">as</span> yearsal <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">select</span> ename, sal<span class="operator">*</span><span class="number">12</span> yearsal <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p>如果用中文的话，应该用单引号括起来 <code>select ename, sal*12 as &#39;年薪&#39; from emp;</code></p>
<p>（mysql支持双引号，但是最好别用，因为标准的sql语句是单引号的）</p>
<p>查询所有字段：<code>select * from emp；</code> 平时可以用，实际开发中不能用（效率低）！</p>
<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><p>语法格式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 字段，字段... <span class="keyword">from</span> 表名 <span class="keyword">where</span> 条件;</span><br></pre></td></tr></table></figure>

<p>查询工资等于5000的员工姓名：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="operator">*</span><span class="operator">*</span>sal <span class="operator">=</span> <span class="number">5000</span><span class="operator">*</span><span class="operator">*</span>；</span><br></pre></td></tr></table></figure>

<p>查询史密斯的工资：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="operator">*</span><span class="operator">*</span>ename <span class="operator">=</span> <span class="string">&#x27;smith&#x27;</span>；<span class="operator">*</span><span class="operator">*</span></span><br></pre></td></tr></table></figure>

<p>查询工资不等于3000员工：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">*</span><span class="operator">*</span><span class="operator">&lt;&gt;</span><span class="operator">*</span><span class="operator">*</span> <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">*</span><span class="operator">*</span><span class="operator">!</span><span class="operator">&gt;</span><span class="operator">*</span><span class="operator">*</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure>

<p>查询工资1000 - 3000之内的员工：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">*</span><span class="operator">*</span><span class="keyword">between</span><span class="operator">*</span><span class="operator">*</span> <span class="number">1000</span> <span class="operator">*</span><span class="operator">*</span><span class="keyword">and</span><span class="operator">*</span><span class="operator">*</span> <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;=</span> <span class="number">1000</span> <span class="keyword">and</span> sal <span class="operator">&lt;=</span> <span class="number">3000</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>between and 使用的时候必须左小右大，否则会 empty set</li>
<li>还可以使用在字符方面<code>select ename,sal from emp where ename between &#39;A&#39; and &#39;B&#39;;</code>左闭右开</li>
</ul>
<p>找出哪些人没有工资？</p>
<ul>
<li>在数据库中NULL不是一个值，代表什么都没有，为空，空是一个值，不能用等号衡量，必须使用is null 或者 is not null</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">=</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>有工资：<code>select ename,sal from emp where sal is not null;</code></li>
</ul>
<p>找出工作岗位是salesman或manager的员工：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,job <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;manager&#x27;</span> <span class="keyword">or</span> job <span class="operator">=</span> <span class="string">&#x27;salesman&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>and和or联合起来用：找出薪资大于1000的并且部门编号是20或30部门的员工。</p>
<ul>
<li>优先级：and &gt; or</li>
<li>优先级不确定的时候加上小括号</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> <span class="number">3000</span> <span class="keyword">and</span> （deptno <span class="operator">=</span> <span class="number">20</span> <span class="keyword">or</span> deptno <span class="operator">=</span> <span class="number">30</span>）;</span><br></pre></td></tr></table></figure>


<p>in等同于or，查询工作岗位是manager和salesman 的员工：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,job <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;salesman&#x27;</span> <span class="keyword">or</span> job <span class="operator">=</span> <span class="string">&#x27;manager&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> ename, job <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="keyword">in</span>(<span class="string">&#x27;salesman&#x27;</span>, <span class="string">&#x27;manager&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>注意：括号中的<strong>不是区间</strong>，而是具体的值</li>
</ul>
<p>not in，不等于in中的值的，查询工资不是1000和5000的员工</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">not</span> <span class="keyword">in</span>(<span class="number">1000</span>,<span class="number">5000</span>)；</span><br></pre></td></tr></table></figure>

<p>找出名字中含有A的（掌握两个符号：%：表示任意多个字符  __：表示任意一个字符）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">&#x27;%A%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>找出名字第二个字母是A的：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">&#x27;_A%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>找出名字中有下划线的（转义字符）：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">&#x27;%\ _%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><p>按照工资升序找出名字和薪资(order by)：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal;</span><br></pre></td></tr></table></figure>

<ul>
<li>默认升序-asc 升序；desc-降序</li>
</ul>
<p>按照工资降序排列：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<p>按照工资降序，工资相同按照名字升序排列（多个字段排序，靠前的主导性大，前面相等才用到后面的）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>, ename <span class="keyword">asc</span>;</span><br></pre></td></tr></table></figure>

<p>按照第一列排序（不建议这样， 不健壮）：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">1</span>;（等于按照ename排序）</span><br></pre></td></tr></table></figure>

<p>找出工作岗位是salesman的员工并且按照工资降序排列</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal,job <span class="keyword">from</span> emp <span class="keyword">where</span> job<span class="operator">=</span><span class="string">&#x27;salesman&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>执行顺序： table name -&gt; condition -&gt; select -&gt; order by</li>
</ul>
<h3 id="分组函数"><a href="#分组函数" class="headerlink" title="分组函数"></a>分组函数</h3><p><strong>规定：在所有数据库中，只要表达式中有null，表达式的结果就一定是null</strong></p>
<p>分组函数（对一组数据进行操作），有且仅有5个：</p>
<ul>
<li>count 计数</li>
<li>sum 求和</li>
<li>avg 求平均</li>
<li>max 最大值</li>
<li>min 最小值</li>
</ul>
<p>属于多行处理函数：输入多行，最终得到一个结果</p>
<p>单行处理函数：输入一行，输出一行</p>
<p>注意：分组函数自动忽略null，不用添加isnull函数</p>
<p>找出工资总和</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(sal) <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p>找出总人数</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> emp;</span><br><span class="line"></span><br><span class="line"><span class="built_in">count</span>(<span class="operator">*</span>) 不是统计某个字段中数据的个数，而是统计总记录条数，与某个字段无关</span><br><span class="line"></span><br><span class="line"><span class="built_in">count</span>(comm) 统计comm字段中不对<span class="keyword">null</span>的数据总量</span><br></pre></td></tr></table></figure>

<p>计算每个员工的年薪（考虑到有null的情况）</p>
<ul>
<li>ifnull()空处理函数（单行处理函数）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,(sal<span class="operator">+</span>ifnull(comm,<span class="number">0</span>))<span class="operator">*</span><span class="number">12</span> <span class="keyword">as</span> yearsal <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p>找出工资高于平均工资的员工</p>
<ul>
<li>SQL语句规则：分组函数不能直接使用在where子句中</li>
<li>理解：group by 在where 后面执行，执行where的时候还没有“组”呢，而分组函数的执行首先要有“组”</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp);</span><br></pre></td></tr></table></figure>

<h3 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h3><h4 id="group-by"><a href="#group-by" class="headerlink" title="group by"></a>group by</h4><p>group by：按照某个字段或者某些字段进行分组</p>
<p>having : having是对分组之后的数据进行再次过滤。</p>
<p>案例：找出每个工作岗位的最高薪资。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> max（sal）<span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> job；</span><br></pre></td></tr></table></figure>

<p>注意：<u>当一条sql语句中有group by 的话，select字段中只能有分组函数和分组字段。</u></p>
<p> <del>select ename,job,max(sal) from emp group by job;</del>这句话在Oracle中报错（因为语法比较严谨），但是在mysql中能执行，但是<strong>毫无意义</strong>！因为ename是随机选中的。</p>
<p>注意：</p>
<ul>
<li><p>分组函数一般都会和group by联合使用，这也是为什么它被称为分组函数的原因。</p>
</li>
<li><p>并且任何一个分组函数（count sum avg maxmin）都是在group by语句执行结束之后才会执行的。</p>
</li>
<li><p>当一条sql语句没有group by的话，整张表的数据会自成一组。</p>
</li>
</ul>
<p>找出每个岗位的平均工资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> job,<span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> job;</span><br></pre></td></tr></table></figure>

<p>找出每个部门不同工作岗位的最高薪资</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> deptno,job,<span class="built_in">max</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> job,deptno <span class="keyword">order</span> <span class="keyword">by</span> deptno;</span><br></pre></td></tr></table></figure>

<h4 id="having"><a href="#having" class="headerlink" title="having"></a>having</h4><p>建议：能用where的用where，不能就用having</p>
<p>找出每个部门的最高薪资，要求显示薪资大于2900的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> deptno,<span class="built_in">max</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> <span class="built_in">max</span>(sal) <span class="operator">&gt;</span> <span class="number">2900</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>这种方式效率低，因为是都找出来之后，筛选大于2900的，不如在开始的时候就不对小于2900的进行筛选</li>
<li>即：<code>select deptno,max(sal) from emp where sal &gt; 2900 group by deptno;</code></li>
<li>能用where最好用where，不能的话用having</li>
</ul>
<p>找出每个部门的平均薪资，要求显示薪资大于2000的数据</p>
<ul>
<li>此时不能用where了就，因为是对分组函数的结果进行选择</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> deptno,<span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> <span class="built_in">avg</span>(sal) <span class="operator">&gt;</span> <span class="number">2000</span>;</span><br></pre></td></tr></table></figure>

<p><strong>一个完整的DQL语句：select…from…where…group by…having…order by…</strong></p>
<h3 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h3><p>什么是连接查询 ？</p>
<ul>
<li>在实际开发中，大部分的情况下都不是从单表中查询数据，一般都是多张表联合查询取出最终的结果。	在实际开发中，一般一个业务都会对应多张表，比如：学生和班级，起码两张表。学生和班级信息存储到一张表中，结果就像上面一样，数据会存在大量的重复，导致数据的冗余。</li>
</ul>
<p>分类？</p>
<ul>
<li>根据语法出现的年代来划分的话，包括：<ul>
<li>SQL92（一些老的DBA可能还在使用这种语法。DBA：DataBase Administrator，数据库管理员）</li>
<li>SQL99（比较新的语法）</li>
</ul>
</li>
<li>根据表的连接方式来划分，包括：<ul>
<li>内连接：<ul>
<li>等值连接</li>
<li>非等值连接</li>
<li>自连接</li>
</ul>
</li>
<li>外连接：<ul>
<li>左外连接（左连接）</li>
<li>右外连接（右连接）</li>
<li>全连接（这个不讲，很少用！）</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>关于表的别名：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.ename,d.dname <span class="keyword">from</span> emp e,dept d;</span><br></pre></td></tr></table></figure>

<p>表的别名有什么好处？</p>
<ul>
<li>第一：执行效率高。</li>
<li>第二：可读性好。</li>
</ul>
<p>注意：以后写sql语句的时候都要开始起别名了</p>
<p>笛卡尔积现象</p>
<p>案例：找出每一个员工的部门名称，要求显示员工名和部门名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,dname <span class="keyword">from</span> emp,dept;</span><br></pre></td></tr></table></figure>

<p>笛卡尔积现象：当两张表进行连接查询的时候，没有任何条件进行限制，最终的查询结果条数是两张表记录条数的</p>
<p>乘积。</p>
<p>怎样避免？加上条件进行过滤。</p>
<p>避免了笛卡尔积现象，会减少记录的匹配次数吗？ 不会，次数还是56次。只不过显示的是有效记录。</p>
<p>案例：找出每一个员工的部门名称，要求显示员工名和部门名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.ename,d.dname <span class="keyword">from</span> emp e , dept d  <span class="keyword">where</span> e.deptno <span class="operator">=</span> d.deptno;</span><br></pre></td></tr></table></figure>

<h4 id="内连接之等值连接"><a href="#内连接之等值连接" class="headerlink" title="内连接之等值连接"></a>内连接之等值连接</h4><p>最大特点是：条件是等量关系。</p>
<p>案例：查询每个员工的部门名称，要求显示员工名和部门名。</p>
<p>sql92版：select e.ename,d.dname from emp e , dept d  where e.deptno &#x3D; d.deptno;</p>
<p>我们主要用的是sql98版，因为98的更好</p>
<p>为什么98的更好？</p>
<ul>
<li>连接条件和where条件分离了，使得代码结构更清晰了</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	e.ename,d.dname</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	emp e</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">	dept d</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">	e.deptno <span class="operator">=</span> d.deptno;</span><br></pre></td></tr></table></figure>

<p>或者：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span> <span class="keyword">inner</span>可以省略的，带着<span class="keyword">inner</span>目的是可读性好一些。</span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">	e.ename,d.dname</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	emp e</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span></span><br><span class="line">	dept d</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">	e.deptno <span class="operator">=</span> d.deptno;</span><br></pre></td></tr></table></figure>

<p>语法：<br>    …		A	join		B	on		连接条件	where		…</p>
<h4 id="内连接之非等值连接"><a href="#内连接之非等值连接" class="headerlink" title="内连接之非等值连接"></a>内连接之非等值连接</h4><p>最大的特点是：连接条件中的关系是非等量关系。</p>
<p>案例：找出每个员工的工资等级，要求显示员工名、工资、工资等级。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> e.ename,e.sal,s.grade</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">from</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> emp e</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">inner</span> <span class="keyword">join</span> salgrade s</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">on</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal;</span><br></pre></td></tr></table></figure>

<h4 id="内连接之自连接"><a href="#内连接之自连接" class="headerlink" title="内连接之自连接"></a>内连接之自连接</h4><p>自连接：最大的特点是：一张表看做两张表。自己连接自己。</p>
<p>案例：找出每个员工的上级领导，要求显示员工名和对应的领导名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">员工的领导编号 <span class="operator">=</span> 领导的员工编号</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">	a.ename <span class="keyword">as</span> <span class="string">&#x27;员工名&#x27;</span>,b.ename <span class="keyword">as</span> <span class="string">&#x27;领导名&#x27;</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	emp a</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span></span><br><span class="line">	emp b</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">	a.mgr <span class="operator">=</span> b.empno;</span><br></pre></td></tr></table></figure>

<h4 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h4><p>什么是外连接，和内连接有什么区别？</p>
<p>内连接：</p>
<p>假设A和B表进行连接，使用内连接的话，凡是A表和B表能够匹配上的记录查询出来，这就是内连接。AB两张表没有主副之分，两张表是平等的。</p>
<p>外连接：</p>
<p>内连接查询的时候，能匹配上的数据才能显示出来</p>
<p>假设A和B表进行连接，使用外连接的话，AB两张表中有一张表是主表，一张表是副表，主要查询主表中的数据，捎带着查询副表，当副表中的数据没有和主表中的数据匹配上，副表自动模拟出NULL与之匹配。</p>
<p>外连接的分类？</p>
<ul>
<li>左外连接（左连接）：表示左边的这张表是主表。</li>
<li>右外连接（右连接）：表示右边的这张表是主表。</li>
</ul>
<p>左连接有右连接的写法，右连接也会有对应的左连接的写法。</p>
<p>案例：找出每个员工的上级领导？（所有员工必须全部查询出来。）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">左连接写法：</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> a.ename <span class="string">&#x27;yuangong&#x27;</span>, b.ename <span class="string">&#x27;boss&#x27;</span></span><br><span class="line"><span class="keyword">from</span> emp a</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> emp b</span><br><span class="line"><span class="keyword">on</span> a.mgr <span class="operator">=</span> b.empno;</span><br><span class="line"></span><br><span class="line">右连接写法：</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> a.ename <span class="string">&#x27;yuangong&#x27;</span>, b.ename <span class="string">&#x27;boss&#x27;</span></span><br><span class="line"><span class="keyword">from</span> emp b</span><br><span class="line"><span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> emp a</span><br><span class="line"><span class="keyword">on</span> a.mgr <span class="operator">=</span> b.empno;</span><br><span class="line"></span><br><span class="line"><span class="keyword">outer</span> 可以省略</span><br></pre></td></tr></table></figure>

<p>案例：找出哪个部门没有员工？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">法一：</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    d.<span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    emp e</span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span></span><br><span class="line">    dept d</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">    e.deptno <span class="operator">=</span> d.deptno</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">    e.empno <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">法二：</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> d.dname, e.deptno</span><br><span class="line"><span class="keyword">from</span> dept d</span><br><span class="line"> <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> emp e</span><br><span class="line"><span class="keyword">on</span> d.deptno <span class="operator">=</span> e.deptno</span><br><span class="line"><span class="keyword">where</span> e.deptno <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>三张表怎么连接查询？</p>
<p>语法:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">....</span><br><span class="line">        A</span><br><span class="line">    <span class="keyword">join</span></span><br><span class="line">        B</span><br><span class="line">    <span class="keyword">join</span></span><br><span class="line">        C</span><br><span class="line">    <span class="keyword">on</span></span><br><span class="line">        ...</span><br></pre></td></tr></table></figure>

<p>案例：找出每一个员工的部门名称以及工资等级。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">表示：A表和B表先进行表连接，连接之后A表继续和C表进行连接。</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    e.ename,d.dname,s.grade</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    emp e</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">    dept d</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">    e.deptno <span class="operator">=</span> d.deptno</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">    salgrade s</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">    e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>案例：找出每一个员工的部门名称、工资等级、以及上级领导。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    e.ename <span class="string">&#x27;员工&#x27;</span>,d.dname,s.grade,e1.ename <span class="string">&#x27;领导&#x27;</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    emp e</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">    dept d</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">    e.deptno <span class="operator">=</span> d.deptno</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">    salgrade s</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">    e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span></span><br><span class="line">    emp e1</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">    e.mgr <span class="operator">=</span> e1.empno;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><p>什么是子查询？</p>
<pre><code>select语句当中嵌套select语句，被嵌套的select语句是子查询。
</code></pre>
<p>子查询可以出现在哪里？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">    ..(<span class="keyword">select</span>).</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    ..(<span class="keyword">select</span>).</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">    ..(<span class="keyword">select</span>).</span><br></pre></td></tr></table></figure>


<p>案例：找出高于平均薪资的员工信息。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp);</span><br></pre></td></tr></table></figure>

<p>案例：找出每个部门平均薪水的等级。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">第一步：找出每个部门平均薪水（按照部门编号分组，求sal的平均值）</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> deptno,<span class="built_in">avg</span>(sal) <span class="keyword">as</span> avgsal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br><span class="line"></span><br><span class="line">第二步：将以上的查询结果当做临时表t，让t表和salgrade s表连接，条件是：t.avgsal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    t.<span class="operator">*</span>,s.grade</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    (<span class="keyword">select</span> deptno,<span class="built_in">avg</span>(sal) <span class="keyword">as</span> avgsal <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno) t</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">    salgrade s</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">    t.avgsal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal;</span><br></pre></td></tr></table></figure>

<p>案例：找出每个部门平均的薪水等级。</p>
<p>不是所有查询的都必须用子查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">第一步：找出每个员工的薪水等级。</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> e.ename,e.sal,e.deptno,s.grade <span class="keyword">from</span> emp e <span class="keyword">join</span> salgrade s <span class="keyword">on</span> e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal;</span><br><span class="line"></span><br><span class="line">第二步：基于以上结果，继续按照deptno分组，求grade平均值。</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    e.deptno,<span class="built_in">avg</span>(s.grade)</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    emp e</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">    salgrade s</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">    e.sal <span class="keyword">between</span> s.losal <span class="keyword">and</span> s.hisal</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span></span><br><span class="line">    e.deptno;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>案例：找出每个员工所在的部门名称，要求显示员工名和部门名。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    e.ename,d.dname</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    emp e</span><br><span class="line"><span class="keyword">join</span></span><br><span class="line">    dept d</span><br><span class="line"><span class="keyword">on</span></span><br><span class="line">    e.deptno <span class="operator">=</span> d.deptno;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span> 下面这种方法比较少用</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">    e.ename,(<span class="keyword">select</span> d.dname <span class="keyword">from</span> dept d <span class="keyword">where</span> e.deptno <span class="operator">=</span> d.deptno) <span class="keyword">as</span> dname</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">    emp e;</span><br></pre></td></tr></table></figure>

<p>union（可以将查询结果集相加）</p>
<p>前提：两张表的列数相等</p>
<p>案例：找出工作岗位是SALESMAN和MANAGER的员工？</p>
<ul>
<li><p>第一种：<code>select ename,job from emp where job = &#39;MANAGER&#39; or job = &#39;SALESMAN&#39;;</code></p>
</li>
<li><p>第二种：<code>select ename,job from emp where job in(&#39;MANAGER&#39;,&#39;SALESMAN&#39;);</code></p>
</li>
<li><p>第三种：<code>union</code></p>
</li>
<li><p>只要确定了两张表的查询结果一定不重复，就用UNION ALL， 因为查询效率高</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,job <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;MANAGER&#x27;</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> ename,job <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;SALESMAN&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="limit（MySQL特有）"><a href="#limit（MySQL特有）" class="headerlink" title="limit（MySQL特有）"></a>limit（MySQL特有）</h3><p>重点中的重点，以后分页查询全靠它了。</p>
<p>limit是mysql特有的，其他数据库中没有，不通用。（Oracle中有一个相同的机制，叫做rownum）</p>
<p>limit取结果集中的部分数据，这时它的作用。</p>
<p>语法机制：<br>    limit startIndex, length<br>        startIndex表示起始位置，从0开始，0表示第一条数据。<br>        length表示取几个</p>
<p>案例：取出工资前5名的员工（思路：降序取前5个）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<p>取前5个：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span> limit <span class="number">0</span>, <span class="number">5</span>;</span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span> limit <span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<p>limit是sql语句最后执行的一个环节：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">select</span>      <span class="number">5</span></span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">from</span>        <span class="number">1</span></span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">where</span>       <span class="number">2</span></span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span>    <span class="number">3</span></span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">having</span>      <span class="number">4</span></span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span>    <span class="number">6</span></span><br><span class="line">    ...</span><br><span class="line">limit       <span class="number">7</span></span><br><span class="line">    ...;</span><br></pre></td></tr></table></figure>

<p>案例：找出工资排名在第4到第9名的员工？</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span> limit <span class="number">3</span>,<span class="number">6</span>;</span><br></pre></td></tr></table></figure>

<p>通用的标准分页sql？</p>
<p>每页显示3条记录：</p>
<p>第1页：0, 3<br>第2页：3, 3<br>第3页：6, 3</p>
<p>每页显示pageSize条记录：</p>
<p>第pageNo页：(pageNo - 1) * pageSize, pageSize<br>pageSize是什么？是每页显示多少条记录<br>pageNo是什么？显示第几页</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">java代码&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">pageNo</span> <span class="operator">=</span> <span class="number">2</span>; <span class="comment">// 页码是2</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">pageSize</span> <span class="operator">=</span> <span class="number">10</span>; <span class="comment">// 每页显示10条</span></span><br><span class="line"></span><br><span class="line">    limit (pageNo - <span class="number">1</span>) * pageSize, pageSize</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="MySQL-约束-Constraint"><a href="#MySQL-约束-Constraint" class="headerlink" title="MySQL-约束(Constraint)"></a>MySQL-约束(Constraint)</h2><p>什么是约束？</p>
<ul>
<li>在创建表的时候，可以给表的字段添加相应的约束，添加约束的目的是为了保证表中数据的合法性、有效性、完整性。</li>
</ul>
<p>常见的约束有哪些呢？</p>
<ul>
<li>非空约束(not null)：约束的字段不能为NULL</li>
<li>唯一约束(unique)：约束的字段不能重复</li>
<li>主键约束(primary key)：约束的字段既不能为NULL，也不能重复（简称PK）</li>
<li>外键约束(foreign key)：…（简称FK）</li>
<li>检查约束(check)：注意Oracle数据库有check约束，但是mysql没有，目前mysql不支持该约束。</li>
</ul>
<h3 id="非空约束-not-null"><a href="#非空约束-not-null" class="headerlink" title="非空约束 not null"></a>非空约束 not null</h3><p>只有列级约束，没有表级约束</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_user;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user(</span><br><span class="line">    id <span class="type">int</span>,</span><br><span class="line">    username <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    password <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="唯一性约束-unique"><a href="#唯一性约束-unique" class="headerlink" title="唯一性约束(unique)"></a>唯一性约束(unique)</h3><ul>
<li>唯一性约束修饰的字段具有唯一性，不能重复。但可以为null。</li>
</ul>
<p>案例：给某一列添加unique</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_user;</span><br><span class="line">  <span class="keyword">create</span> <span class="keyword">table</span> t_user(</span><br><span class="line">    id <span class="type">int</span>,</span><br><span class="line">username <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">unique</span>  <span class="operator">/</span><span class="operator">/</span>列级约束</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>案例：给两个列或者多个列添加unique</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_user;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user(</span><br><span class="line">    id <span class="type">int</span>,</span><br><span class="line">    usercode <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">    username <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">    <span class="keyword">unique</span>(usercode,username)  <span class="operator">/</span><span class="operator">/</span>多个字段联合起来添加一个约束<span class="keyword">unique</span> 【表级约束】</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>

<p>注意：not null约束只有列级约束，没有表级约束。</p>
<h3 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h3><p>主键相关的术语？</p>
<ul>
<li><p>主键约束 ：primary key</p>
</li>
<li><p>主键字段 : id字段添加primary key之后，id叫做主键字段</p>
</li>
<li><p>主键值 ：id字段中的每一个值都是主键值。</p>
</li>
<li><p>根据主键字段的字段数量来划分：</p>
<ul>
<li>单一主键 (推荐的，常用的。)</li>
<li>复合主键(多个字段联合起来添加一个主键约束) (复合主键不建议使用，因为复合主键违背三范式。)</li>
</ul>
</li>
<li><p>根据主键性质来划分：</p>
<ul>
<li>自然主键 ：主键值最好就是一个和业务没有任何关系的自然数。(这种方式是推荐的)</li>
<li>业务主键 : 主键值和系统的业务挂钩，例如：拿着银行卡的卡号做主键、拿着身份证号做为主键。(不推荐使用)最好不要拿着和业务挂钩的字段做为主键。因为以后的业务一旦发生改变的时候，主键也可能需要随着发生变化，但有的时候没有办法变化，因为变化可能会导致主键重复。</li>
</ul>
</li>
</ul>
<p><strong>一张表的主键约束只能有1个</strong></p>
<p>给一张表添加主键约束</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_user;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key,  <span class="operator">/</span><span class="operator">/</span>列级约束</span><br><span class="line">    username <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">    email <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>使用表级约束方式定义主键</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_user;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user(</span><br><span class="line">    id <span class="type">int</span>,</span><br><span class="line">    username <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">    <span class="keyword">primary</span> key(id)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>mysql提供主键值自增(非常重要。)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_user;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_user(</span><br><span class="line">    id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,  <span class="operator">/</span><span class="operator">/</span>id字段自动维护一个自增的数字，从<span class="number">1</span>开始，以<span class="number">1</span>递增。</span><br><span class="line">    username <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>提示：Oracle当中也提供了一个自增机制，叫做：序列(sequence)对象。</p>
<h3 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h3><p>关于外键约束的相关术语：</p>
<ul>
<li>外键约束：foreign key</li>
<li>外键字段：添加有外键约束的字段</li>
<li>外键值：外键字段中的每一个值。</li>
</ul>
<p>注意：</p>
<ul>
<li>删除数据的时候，先删除子表，再删除父表。</li>
<li>添加数据的时候，先添加父表，再添加子表。</li>
<li>创建表的时候，先创建父表，再创建子表。</li>
<li>删除表的时候，先删除子表，再删除父表。</li>
</ul>
<p>外键值可以为NULL？外键可以为null。</p>
<p>外键字段引用其他表的某个字段的时候，被引用的字段必须是主键吗？</p>
<ul>
<li>注意：被引用的字段不一定是主键，但至少是具有unique约束，具有唯一性，不可重复！</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_class(</span><br><span class="line">        cno <span class="type">int</span>,</span><br><span class="line">        cname <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">        <span class="keyword">primary</span> key(cno)</span><br><span class="line">     );</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_student(</span><br><span class="line">        sno <span class="type">int</span>,</span><br><span class="line">        sname <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">        classno <span class="type">int</span>,</span><br><span class="line">        <span class="keyword">primary</span> key(sno),</span><br><span class="line">        <span class="keyword">foreign</span> key(classno) <span class="keyword">references</span> t_class(cno)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">tstudent中的classno字段引用tclass表中的cno字段，此时tstudent表叫做子表。tclass表叫做父表。</span><br></pre></td></tr></table></figure>
<h2 id="MySQL-事务-Transaction"><a href="#MySQL-事务-Transaction" class="headerlink" title="MySQL-事务(Transaction)"></a>MySQL-事务(Transaction)</h2><p>什么是事务？ 一个事务是一个完整的业务逻辑单元，不可再分。</p>
<p>比如：银行账户，从A账户向B账户转账10000元，需要执行两条update语句。</p>
<p><code>update t_act set balance = balance - 10000 where actno = &#39;act-001&#39;;</code><br><code>update t_act set balance = balance + 10000 where actno = &#39;act-002&#39;;</code></p>
<p>以上两条DML语句必须同时成功，或者同时失败，不允许出现一条成功，一条失败。</p>
<p>想要保证以上的两条DML语句同时成功或者同时失败，那么就要使用数据库的”事务机制”。</p>
<p>和事务相关的语句只有：DML语句。(insert delete update)</p>
<p>为什么？因为他们这三个语句都是和数据库表当中的”数据”相关的。</p>
<p>事务的存在是为了保证数据的完整性，安全性。</p>
<p>假设所有的业务都能使用1条DML语句搞定，还需要事务机制吗？不需要事务机制。</p>
<p>但实际情况不是这样的，通常一个”事儿(事务【业务】)”需要多条DML语句共同联合完成。</p>
<p>事务的特性？事务包括四大特性：ACID</p>
<ul>
<li>A:原子性：事务是最小的工作单元，不可再分。</li>
<li>B:一致性：事务必须保证多条DML语句同时成功或者同时失败。</li>
<li>C:隔离性：事务A与事务B之间具有隔离。</li>
<li>D:持久性：持久性说的是最终数据必须持久化到硬盘中，事务才算成功结束。</li>
</ul>
<h3 id="事务的隔离性"><a href="#事务的隔离性" class="headerlink" title="事务的隔离性"></a>事务的隔离性</h3><p>事务隔离性存在隔离级别，理论上隔离级别包括4个：</p>
<ul>
<li>第一级别：读未提交(read uncommitted)<ul>
<li>对方事务还没有提交，我们当前事务可以读取到对方未提交的数据。</li>
<li>读未提交存在脏读(Dirty Read) 现象：表示读到了脏数据。</li>
</ul>
</li>
<li>第二级别：读已提交(read committed)<ul>
<li>对方事务提交之后的数据我方可以读取到。</li>
<li>读已提交存在的问题是：不可重复读。</li>
</ul>
</li>
<li>第三级别：可重复读(repeatable read)<ul>
<li>这种隔离级别解决了：不可重复读问题。</li>
<li>这种隔离级别存在的问题是：读取到的数据是幻象。</li>
</ul>
</li>
<li>第四级别：序列化读&#x2F;串行化读<ul>
<li>解决了所有问题。</li>
<li>效率低，需要事务排队。</li>
</ul>
</li>
</ul>
<p>Oracle数据库默认的隔离级别是：第二级别，读已提交。</p>
<p>mysql数据库默认的隔离级别是：第三级别，可重复读。</p>
<h3 id="演示事务"><a href="#演示事务" class="headerlink" title="演示事务"></a>演示事务</h3><p>mysql事务默认情况下是自动提交的。(什么是自动提交？只要执行任意一条DML语句则提交一次。)</p>
<p>怎么关闭默认提交？start transaction;</p>
<ul>
<li>rollback : 回滚。</li>
<li>commit ： 提交。</li>
<li>start transaction : 关闭自动提交机制。</li>
</ul>
<p>演示两个事务，假如隔离级别：</p>
<ul>
<li>演示第一级别：读未提交 <code>set global transaction isolation level read uncommitted;</code></li>
<li>演示第二级别；读已提交 <code>set global transaction isolation level read committed;</code></li>
<li>演示第三级别:可重复读 <code>set global transaction isolation level repeatable read;</code></li>
</ul>
<p>mysql远程登录：<code>mysql -h192.168.151.18 -uroot -p444</code></p>
<h2 id="MySQL-索引"><a href="#MySQL-索引" class="headerlink" title="MySQL-索引"></a>MySQL-索引</h2><p>什么是索引？ 索引就相当于一本书的目录，通过目录可以快速的找到对应的资源。</p>
<p>在数据库方面，查询一张表的时候有两种检索方式：</p>
<ul>
<li>第一种方式：全表扫描</li>
<li>第二种方式：根据索引检索(效率很高)</li>
</ul>
<p>索引为什么可以提高检索效率呢？ 最根本的原理是缩小了扫描的范围。</p>
<ul>
<li><p>索引虽然可以提高检索效率，但是不能随意的添加索引，因为索引也是数据库当中的对象，也需要数据库不断的维护。是有维护成本的。</p>
</li>
<li><p>比如：表中的数据经常被修改，这样就不适合添加索引，因为数据一旦修改，索引需要重新排序，进行维护。</p>
</li>
<li><p>添加索引是给某一个字段，或者说某些字段添加索引。</p>
</li>
</ul>
<p><code>select ename,sal from emp where ename = &#39;SMITH&#39;;</code></p>
<p>当ename字段没有添加索引的时候，以上sql语句会进行全表扫描，扫描ename字段中所有的值。<br>当ename字段添加索引的时候，以上sql语句会根据索引扫描，快速定位。</p>
<p>怎么创建索引对象？怎么删除索引对象？</p>
<ul>
<li>创建索引对象： create index 索引名称 on 表名(字段名);</li>
<li>删除索引对象： drop index 索引名称 on 表名;</li>
</ul>
<p>什么时候考虑给字段添加索引？(满足什么条件)</p>
<ul>
<li>数据量庞大。(根据客户的需求，根据线上的环境)</li>
<li>该字段很少的DML操作。(因为字段进行修改操作，索引也需要维护)</li>
<li>该字段经常出现在where子句中。(经常根据哪个字段维护)</li>
</ul>
<p>注意：主键具有unique约束的字段会自动添加索引。根据主键查询效率较高，尽量根据主键检索。</p>
<p>查看sql语句的执行计划（只有MySQL才有）：</p>
<p><code>explain select ename,sal from emp where sal = 5000;</code></p>
<p>给薪资sal字段添加索引：</p>
<p><code>create index empindex on emp(sal);</code></p>
<p><code>mysql&gt; explain select ename,sal from emp where sal = 5000;</code></p>
<p>rows检索次数减少了</p>
<p>索引的实现原理？</p>
<ul>
<li><p>索引底层采用的数据结构是：B + Tree</p>
</li>
<li><p>通过B Tree缩小扫描范围，底层索引进行了排序，分区，索引会携带数据在表中的”物理地址”，最终通过索引检索到数据之后，获取到关联的物理地址，通过物理索引检索到数据之后，获取到关联的物理地址，通过物理地址定位表中的数据，效率是最高的。</p>
</li>
</ul>
<p><code>select ename from emp where ename = &#39;SMITH&#39;;</code></p>
<p>通过索引转换为：</p>
<p><code>select ename from emp where  物理地址 = 0x123;</code></p>
<p>索引的分类？</p>
<ul>
<li>单一索引：给单个字段添加索引</li>
<li>复合索引：给多个字段联合起来添加一个索引</li>
<li>主键索引：主键上会自动添加索引</li>
<li>唯一索引：有unique约束的字段会自动添加索引</li>
<li>……</li>
</ul>
<p>索引什么时候失效？</p>
<ul>
<li>select ename from emp where ename like ‘ %A% ‘;</li>
<li>模糊查询的时候，第一个通配符使用的是%，这个时候索引是是失效的。</li>
</ul>
<h2 id="MySQL-视图-view"><a href="#MySQL-视图-view" class="headerlink" title="MySQL-视图(view)"></a>MySQL-视图(view)</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>什么是视图？</p>
<ul>
<li>站在不同的角度去看到数据。(同一张表的数据，通过不同的角度去看待)</li>
</ul>
<p>视图的作用？</p>
<ul>
<li>视图可以隐藏表的实现细节。保密级别较高的系统，数据库只对外提供相关的视图。</li>
<li>视图并不会提高检索效率</li>
<li>提高了数据的安全性。</li>
<li>可以进行逻辑更加清晰的查询效率。</li>
</ul>
<h3 id="创建视图"><a href="#创建视图" class="headerlink" title="创建视图"></a>创建视图</h3><p>怎么创建视图？ <code>create view myview as select empno, ename from emp;</code></p>
<p>注意：只有DQL语句才能以试图对象的方式创建出来。查询的源表可以是已定义的视图。</p>
<p>创建视图的查询中通常不含ORDER BY和DISTINCT语句,这些语句可放在通过视图查询数据的语句中。</p>
<h3 id="面向视图的操作"><a href="#面向视图的操作" class="headerlink" title="面向视图的操作"></a>面向视图的操作</h3><ul>
<li>select * from myview;</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp_bak <span class="keyword">as</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> myview1 <span class="keyword">as</span> <span class="keyword">select</span> empno,ename,sal <span class="keyword">from</span> emp_bak;</span><br><span class="line"><span class="keyword">update</span> myview1 <span class="keyword">set</span> ename <span class="operator">=</span> <span class="string">&#x27;hehe&#x27;</span>,sal <span class="operator">=</span> <span class="number">1</span> <span class="keyword">where</span> empno <span class="number">7369</span>;  <span class="operator">/</span><span class="operator">/</span>通过视图修改原表数据。</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> myview1 <span class="keyword">where</span> empno <span class="operator">=</span> <span class="number">7369</span>;  <span class="operator">/</span><span class="operator">/</span>通过试图删除原表数据。</span><br></pre></td></tr></table></figure>

<p>对视图进行增删改查，会影响到原表数据。(通过视图影响原表数据，不是直接操作的原表)，但是只能对单源表的视图进行修改，不能对多源表的视图进行修改。</p>
<h3 id="修改和删除视图"><a href="#修改和删除视图" class="headerlink" title="修改和删除视图"></a>修改和删除视图</h3><p>修改视图</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">VIEW</span> 视图名 [ ( 列名 [ ,...n ] ) ]</span><br><span class="line"><span class="keyword">AS</span> <span class="keyword">SELECT</span> 语句</span><br></pre></td></tr></table></figure>

<p>删除视图</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> myview;</span><br></pre></td></tr></table></figure>

<h2 id="数据库设计三范式"><a href="#数据库设计三范式" class="headerlink" title="数据库设计三范式"></a>数据库设计三范式</h2><p>什么是设计范式？ 设计表的依据。按照这三个范式设计的表不会出现数据冗余。</p>
<p>三范式都是哪些？</p>
<ul>
<li><p>第一范式：任何一张表都应该有主键，并且每一个字段原子性不可再分。</p>
</li>
<li><p>第二范式：建立在第一范式的基础上，所有非主键字段完全依赖主键，不能产生部份依赖。<br>  多对多？三张表，关系表两个外键。</p>
</li>
<li><p>第三范式：建立在第二范式的基础上，所有非主键字段直接依赖主键，不能产生传递依赖。<br>  一对多？两张表，多的表加外键。</p>
</li>
</ul>
<p>提醒：在实际的开发中，以满足客户需求为主，有的时候会拿冗余换执行速度。</p>
<p>一对一怎么设计？ 一对一设计有两种方案：主键共享&#x2F;外键唯一</p>
<h2 id="存储引擎（了解）"><a href="#存储引擎（了解）" class="headerlink" title="存储引擎（了解）"></a>存储引擎（了解）</h2><p>完整的建表语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `t_x` (</span><br><span class="line">      `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span></span><br><span class="line">     ) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br></pre></td></tr></table></figure>

<p><strong>注意：在MySQL当中，凡是标识符使用飘号括起来的。最好别用，不通用。</strong></p>
<p>建表的时候可以指定存储引擎，也可以指定字符集。</p>
<p>mysql默认使用的存储引擎是InnoDB方式。默认采用的字符集是UTF-8。（开始的时候我们自己设置的）</p>
<p>什么是存储引擎?</p>
<ul>
<li>存储引擎这个名字只有在mysql中存在。(Oracle中有对应的机制，但不叫做存储引擎。Oracle中没有特殊的名字，就是”表的存储方式”)</li>
</ul>
<p>mysql支持很多存储引擎，每个存储引擎都对应了一种不同的存储方式。<br>每一个存储引擎都有自己的优缺点，需要在合适的时机选择合适的存储引擎。</p>
<p>查看当前mysql支持的存储引擎？ show engines \G</p>
<p>mysql 5.5.36版本支持的光速引擎有9个</p>
<p>常见的存储引擎？<br>MyISAM</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Engine: MyISAM</span><br><span class="line">Support: YES</span><br><span class="line">Comment: MyISAM storage engine</span><br><span class="line">Transactions: <span class="keyword">NO</span></span><br><span class="line">XA: <span class="keyword">NO</span></span><br><span class="line">Savepoints: <span class="keyword">NO</span></span><br></pre></td></tr></table></figure>

<p>MyISAM这种存储引擎不支持事务。</p>
<p>MyISAM是mysql最常用的存储引擎，但是这种存储引擎不是默认的。</p>
<p>MyISAM采用三个文件组织一个表</p>
<ul>
<li>xxx.frm(存储格式的文件)</li>
<li>xxx.MYD(存储表中数据的文件)</li>
<li>xxx.MYI(存储表中索引的文件)</li>
</ul>
<p>优点：可被压缩，节省存储空间。并且可以转换为只读表，提高检索效率。</p>
<p>缺点: 不支持事务。</p>
<p>InnoDB</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Engine: InnoDB</span><br><span class="line">Support: <span class="keyword">DEFAULT</span></span><br><span class="line">         Comment: Supports transactions, <span class="type">row</span><span class="operator">-</span>level locking, <span class="keyword">and</span> <span class="keyword">foreign</span> keys</span><br><span class="line">    Transactions: YES</span><br><span class="line">          XA: YES</span><br><span class="line">      Savepoints: YES</span><br></pre></td></tr></table></figure>

<p>优点：支持事务、行级锁、外键等。这种存储引擎数据的安全得到保障。</p>
<p>表的结构存储在xxx.frm文件中</p>
<p>数据存储在tablespace这样的表空间中(逻辑概念)，无法被压缩，无法转换成只读。</p>
<p>这种InnoDB存储引擎在MySQL数据库崩溃之后提供自动恢复机制。</p>
<p>InoDB支持级联删除和级联更新。</p>
<p>MEMORY</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Engine: MEMORY</span><br><span class="line">Support: YES</span><br><span class="line">Comment: Hash based, stored <span class="keyword">in</span> memory, useful <span class="keyword">for</span> temporary tables</span><br><span class="line">Transactions: <span class="keyword">NO</span></span><br><span class="line">XA: <span class="keyword">NO</span></span><br><span class="line">Savepoints: <span class="keyword">NO</span></span><br></pre></td></tr></table></figure>

<p>缺点：不支持事务。数据容易丢失。因为所有数据和索引都是存储在内存当中的。</p>
<p>优点：查询速度最快。</p>
<p>以前叫做HEPA引擎。</p>
<h2 id="DBA命令（了解）"><a href="#DBA命令（了解）" class="headerlink" title="DBA命令（了解）"></a>DBA命令（了解）</h2><p>在数据库当中的数据导出</p>
<p>在windows的DOS命令窗口中执行： (导出整个库)</p>
<ul>
<li>mysqldump bjpowernode&gt;D:\bjpowernode.sql -uroot -p999</li>
</ul>
<p>在windows的dos命令窗口中执行：(导出数据库中指定的表)</p>
<ul>
<li>mysqldump bjpowernode emp&gt;D:\bjpowernode.sql -uroot -p999</li>
</ul>
<p>导入数据</p>
<ul>
<li>create database bjpowernode;</li>
<li>use bjpowernode;</li>
<li>source D:\bjpowernode.sql</li>
</ul>
</div>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2020-08-20</span>
            
            
             
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                
                    <span>上一篇：<a href='/2020/09/20/MySQL-Adcanced/'>笔记 | MySQL索引优化</a></span>
                

                
                    <span class="post-footer-pre-next-last-span-right">下一篇：<a href="/2020/07/20/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AD%A6%E4%B9%A0/">笔记 | 正则表达式</a>
                    </span>
                
            </div>
    
        
    

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
             

            
                

            
        </span>
       
    
</div>



<!--这是指一条线往下的内容-->
<div class="footer-last">
    
            <span>Change And Challenge</span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--目录-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--回到顶部按钮-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // 启用插件
            thumbnail: true,          // 显示缩略图
            zoom: true,               // 启用缩放功
            rotate: true,             // 启用旋转功能能
            autoplay: true,        // 启用自动播放功能
            fullScreen: true,      // 启用全屏功能
            pager: false, //页码,
            zoomFromOrigin: true,   // 从原始位置缩放
            actualSize: true,       // 启用查看实际大小的功能
            enableZoomAfter: 300,    // 延迟缩放，确保图片加载完成后可缩放
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // 修复选择器
    }
    
</script>


                </div>
            
            
                <!-- 回到顶部的按钮-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- 返回的按钮-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>