<!DOCTYPE html>
<html lang="en">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="笔记 | JQuery&amp;Ajax&amp;Axios" />
    <meta name="hexo-theme-A4" content="v1.9.6" />
    <link rel="alternate icon" type="image/webp" href="/img/avatar.png">
    <title>Jingcun Yan</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--注意：首页既不是post也不是page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--返回顶部css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--目录-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery-bundle.min.css">


<meta name="generator" content="Hexo 7.3.0"></head>
    
    
        <style>
            .index-main{
                max-width:  880px;
            }
        </style>

    
    



    

    
    

    
    
    
    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        <script>
            const options = {
                bottom: '40px', // default: '32px'
                right: 'unset', // default: '32px'
                left: '42px', // default: 'unset'
                time: '0.3s', // default: '0.3s'
                mixColor: '#fff', // default: '#fff'
                backgroundColor: ' #e4e4e4 ',  // default: '#fff'
                buttonColorDark: '#100f2c',  // default: '#100f2c'
                buttonColorLight: '#fff', // default: '#fff'
                saveInCookies: true, // default: true,
                label: '🌓', // default: ''
                autoMatchOsTheme: true // default: true
            }
            const darkmode = new Darkmode(options);
            darkmode.showWidget();
        </script>
        
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/avatar.png" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">Jingcun Yan</a> 
            <span class="description"></span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">首页</a></li>
            
        
            
                <li><a href="/list/">文章</a></li>
            
        
            
                <li><a href="/collect/">收藏</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--说明是文章post页面-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    笔记 | JQuery&amp;Ajax&amp;Axios
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                
                    
                     <span>字数总计：6.6k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>阅读估时：28分钟</span>
                
                
            </div>
    

    <div class="post-md">
        
        <div class=".article-gallery"><h1 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h1><h2 id="jQuery基础"><a href="#jQuery基础" class="headerlink" title="jQuery基础"></a>jQuery基础</h2><h3 id="初识-jQuery"><a href="#初识-jQuery" class="headerlink" title="初识 jQuery"></a>初识 jQuery</h3><p>平时的开发中使用正常版本的，便于阅读源代码，产品上线的时候使用min版本的，便于加载。</p>
<p>企业中使用的jQuery版本大多是1.x，因为可以兼容IE 678</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原生的js</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// jquery风格</span></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;Hello World !&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="入口函数"><a href="#入口函数" class="headerlink" title="入口函数"></a>入口函数</h3><h4 id="jQuery入口函数"><a href="#jQuery入口函数" class="headerlink" title="jQuery入口函数"></a>jQuery入口函数</h4><p>一共有四种写法，我们推荐第三种</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.第一种写法</span></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.第二种写法</span></span><br><span class="line"><span class="title function_">jQuery</span>(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.第三种写法(推荐)</span></span><br><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.第四种写法</span></span><br><span class="line"><span class="title function_">jQuery</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="加载模式对比"><a href="#加载模式对比" class="headerlink" title="加载模式对比"></a>加载模式对比</h4><p>原生JS和jQuery入口函数的加载模式不同，原生JS会等到DOM元素加载完毕,并且图片也加载完毕才会执行，jQuery会等到DOM元素加载完毕,但不会等到图片也加载完毕就会执行, 所以我们可以通过原生JS的入口函数拿到DOM元素和元素的宽和高，而通过jQuery只能拿到元素，拿不到宽和高。</p>
<p>原生的JS如果编写了多个入口函数,后面编写的会覆盖前面编写的，jQuery中编写多个入口函数,后面的不会覆盖前面的</p>
<h4 id="解决冲突问题"><a href="#解决冲突问题" class="headerlink" title="解决冲突问题"></a>解决冲突问题</h4><p>如果你在使用JQuery的情况下也使用了其他框架，其他框架也使用了 $ 符号，这时候就有冲突的了，我们必须解决冲突，也就是释放 $ 的使用权。</p>
<p>注意点: 释放操作必须在编写其它jQuery代码之前编写，释放之后就不能再使用$,改为使用jQuery或自定义类型</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 释放$的使用权，自定义一个访问符号</span></span><br><span class="line"><span class="keyword">var</span> nj = jQuery.<span class="title function_">noConflict</span>();</span><br><span class="line"><span class="title function_">nj</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;hello lnj&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="核心函数"><a href="#核心函数" class="headerlink" title="核心函数"></a>核心函数</h3><p>明确概念：</p>
<ul>
<li><p>入口函数：<code> $(function()&#123;  &#125;);</code></p>
</li>
<li><p>核心函数：<code>$();</code></p>
</li>
</ul>
<p>注意：jQuery对象是一个<i>伪数组</i> , 有0到length-1的属性, 并且有length属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 接收一个字符串选择器，返回一个jQuery对象, 对象中保存了找到的DOM元素</span></span><br><span class="line"><span class="keyword">var</span> $box1 = $(<span class="string">&quot;.box1&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> $box2 = $(<span class="string">&quot;#box2&quot;</span>);</span><br><span class="line"><span class="comment">// 2. 接收一个字符串代码片段，返回一个jQuery对象, 对象中保存了创建的DOM元素</span></span><br><span class="line"><span class="keyword">var</span> $p = $(<span class="string">&quot;&lt;p&gt;我是段落&lt;/p&gt;&quot;</span>);</span><br><span class="line">$box1.<span class="title function_">append</span>($p);</span><br><span class="line"><span class="comment">// 3.接收一个DOM元素，如果把一个原生的js元素传递给jQuery的核心函数，它会被包装成一个jQuery对象返回给我们</span></span><br><span class="line"><span class="keyword">var</span> span = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;span&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">var</span> $span = $(span);</span><br></pre></td></tr></table></figure>

<h3 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h3><p>明确概念：</p>
<ul>
<li>静态方法：直接添加给类的就是静态方法 - 通过类名调用</li>
<li>实例方法：添加到类的原型上面的是实例方法 - 通过实例调用</li>
</ul>
<h4 id="each"><a href="#each" class="headerlink" title="each"></a>each</h4><p>注意: 原生的forEach方法只能遍历数组, <strong>不能</strong>遍历伪数组</p>
<p>利用jQuery的each静态方法遍历数组，这种方法<strong>可以</strong>遍历伪数组</p>
<ul>
<li>第一个参数: 当前遍历到的索引</li>
<li>第二个参数: 遍历到的元素</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="number">0</span>:<span class="number">1</span>, <span class="number">1</span>:<span class="number">3</span>, <span class="number">2</span>:<span class="number">5</span>, <span class="number">3</span>:<span class="number">7</span>, <span class="number">4</span>:<span class="number">9</span>, <span class="attr">length</span>:<span class="number">5</span>&#125;;</span><br><span class="line">$.<span class="title function_">each</span>(obj, <span class="keyword">function</span> (<span class="params">index, value</span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(index, value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><p>map函数的参数</p>
<ul>
<li><p>第一个参数: 要遍历的数组</p>
</li>
<li><p>第二个参数: 每遍历一个元素之后执行的回调函数</p>
<p>回调函数的参数:</p>
</li>
<li><p>第一个参数: 遍历到的元素</p>
</li>
<li><p>第二个参数: 遍历到的索引</p>
</li>
</ul>
<p>注意点:和jQuery中的each静态方法一样, map静态方法也可以遍历伪数组</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> res = $.<span class="title function_">map</span>(obj, <span class="keyword">function</span> (<span class="params">value, index</span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(index, value);</span><br><span class="line">	<span class="keyword">return</span> value + index;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>jQuery中的each静态方法和map静态方法的区别:</p>
<ul>
<li>each静态方法默认的返回值就是, 遍历谁就返回谁；map静态方法默认的返回值是一个空数组</li>
<li>each静态方法不支持在回调函数中对遍历的数组进行处理；map静态方法可以在回调函数中通过return对遍历的数组<strong>进行处理</strong>, 然后生成一个新的数组返回</li>
</ul>
<h4 id="其他静态方法"><a href="#其他静态方法" class="headerlink" title="其他静态方法"></a>其他静态方法</h4><p><strong>$.trim();</strong></p>
<p>作用: 去除字符串两端的空格</p>
<p>参数: 需要去除空格的字符串</p>
<p>返回值: 去除空格之后的字符串</p>
<p><strong>$.isWindow();</strong></p>
<p>作用: 判断传入的对象是否是window对象</p>
<p>返回值: true&#x2F;false</p>
<p><strong>$.isArray();</strong></p>
<p>作用: 判断传入的对象是否是真数组</p>
<p>返回值: true&#x2F;false</p>
<p><strong>$.isArray();</strong></p>
<p>作用: 判断传入的对象是否是一个函数</p>
<p>返回值: true&#x2F;false</p>
<p>注意点:jQuery框架本质上是一个匿名函数</p>
<p><strong>$.holdReady(true)</strong></p>
<p>作用: 暂停ready执行,ready函数是jQuery的入口函数（详情见jQuery入口函数的第1、2种写法），等到我们想让ready函数执行的时候可以使用<code>$.holdReady(false)</code> 使入口函数开始执行</p>
<h3 id="jQuery对象"><a href="#jQuery对象" class="headerlink" title="jQuery对象"></a>jQuery对象</h3><h4 id="其他选择器"><a href="#其他选择器" class="headerlink" title="其他选择器"></a>其他选择器</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//:empty 作用:找到既没有文本内容也没有子元素的指定元素</span></span><br><span class="line"><span class="keyword">var</span> $div = $(<span class="string">&quot;div:empty&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//:parent 作用: 找到有文本内容或有子元素的指定元素</span></span><br><span class="line"><span class="keyword">var</span> $div = $(<span class="string">&quot;div:parent&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//:contains(text) 作用: 找到包含指定文本内容的指定元素</span></span><br><span class="line"><span class="keyword">var</span> $div = $(<span class="string">&quot;div:contains(&#x27;我是div&#x27;)&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//:has(selector) 作用: 找到包含指定子元素的指定元素</span></span><br><span class="line"><span class="keyword">var</span> $div = $(<span class="string">&quot;div:has(&#x27;span&#x27;)&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="属性和属性节点"><a href="#属性和属性节点" class="headerlink" title="属性和属性节点"></a>属性和属性节点</h4><p>明确概念：</p>
<ul>
<li><p>属性，是对象身上保存的变量就是属性</p>
</li>
<li><p>属性节点：在编写HTML代码时,在HTML标签中添加的属性就是属性节点，在浏览器中找到span这个DOM元素之后, 展开看到的都是属性，在attributes属性中保存的所有内容都是属性节点</p>
</li>
<li><p>区别：任何对象都有属性, 但是只有DOM对象才有属性节点</p>
</li>
</ul>
<ol>
<li>attr(name|pro|key,val|fn)  作用: 获取或者设置属性节点的值</li>
</ol>
<ul>
<li>传递一个参数, 代表获取属性节点的值</li>
<li>传递两个参数, 代表设置属性节点的值</li>
</ul>
<p>注意:</p>
<ul>
<li>如果是获取:无论找到多少个元素, 都只会返回第一个元素指定的属性节点的值</li>
<li>如果是设置:找到多少个元素就会设置多少个元素</li>
<li>如果是设置:如果设置的属性节点不存在, 那么系统会自动新增</li>
</ul>
<ol start="2">
<li>removeAttr(name)  作用: 删除找到元素的所有属性节点</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;span&quot;</span>).<span class="title function_">attr</span>(<span class="string">&quot;class&quot;</span>, <span class="string">&quot;box&quot;</span>);</span><br><span class="line">$(<span class="string">&quot;span&quot;</span>).<span class="title function_">removeAttr</span>(<span class="string">&quot;class name&quot;</span>); <span class="comment">//多个元素中间用空格隔开</span></span><br></pre></td></tr></table></figure>

<ol>
<li>prop方法，特点和attr方法一致</li>
<li>removeProp方法，特点和removeAttr方法一致</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;span&quot;</span>).<span class="title function_">eq</span>(<span class="number">1</span>) <span class="comment">// 将span中所有元素找出，选出下标为1的元素，将其包装为jQuery对象并返回</span></span><br></pre></td></tr></table></figure>

<p><strong>如何在attr和prop方法之间选择？</strong></p>
<ul>
<li>注意: prop方法不仅能够操作属性, 他还能操作属性节点，官方推荐在操作属性节点时,具有 true 和 false 两个属性的属性节点，如 checked, selected 或者 disabled 使用prop()，其他的使用 attr()</li>
</ul>
<h4 id="类、文本、CSS、尺寸等相关操作"><a href="#类、文本、CSS、尺寸等相关操作" class="headerlink" title="类、文本、CSS、尺寸等相关操作"></a>类、文本、CSS、尺寸等相关操作</h4><ol>
<li>addClass(class|fn)</li>
</ol>
<p>  作用: 添加一个类</p>
<p>  如果要添加多个, 多个类名之间用空格隔开即可</p>
<ol start="2">
<li>removeClass([class|fn])</li>
</ol>
<p>  作用: 删除一个类</p>
<p>  如果想删除多个, 多个类名之间用空格隔开即可</p>
<ol start="3">
<li>toggleClass(class|fn[,sw])</li>
</ol>
<p>  作用: 切换类，有就删除, 没有就添加</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btns = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;button&quot;</span>);</span><br><span class="line">btns[<span class="number">0</span>].<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	$(<span class="string">&quot;div&quot;</span>).<span class="title function_">addClass</span>(<span class="string">&quot;class1 class2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">btns[<span class="number">1</span>].<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	$(<span class="string">&quot;div&quot;</span>).<span class="title function_">removeClass</span>(<span class="string">&quot;class2 class1&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">btns[<span class="number">2</span>].<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	$(<span class="string">&quot;div&quot;</span>).<span class="title function_">toggleClass</span>(<span class="string">&quot;class2 class1&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>html([val|fn]) 和原生JS中的innerHTML一模一样</li>
<li>text([val|fn]) 和原生JS中的innerText一模一样</li>
<li>val([val|fn|arr])</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btns = $(<span class="string">&quot;button&quot;</span>);</span><br><span class="line">btns[<span class="number">0</span>].<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&quot;div&quot;</span>).<span class="title function_">html</span>(<span class="string">&quot;&lt;p&gt;我是段落&lt;span&gt;我是span&lt;/span&gt;&lt;/p&gt;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">btns[<span class="number">2</span>].<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&quot;div&quot;</span>).<span class="title function_">text</span>(<span class="string">&quot;&lt;p&gt;我是段落&lt;span&gt;我是span&lt;/span&gt;&lt;/p&gt;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">btns[<span class="number">4</span>].<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&quot;input&quot;</span>).<span class="title function_">val</span>(<span class="string">&quot;请输入内容&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用JQuery设置CSS相关代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 编写jQuery相关代码</span></span><br><span class="line"><span class="comment">// 1.逐个设置</span></span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;width&quot;</span>, <span class="string">&quot;100px&quot;</span>);</span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;height&quot;</span>, <span class="string">&quot;100px&quot;</span>);</span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;red&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.链式设置</span></span><br><span class="line"><span class="comment">// 注意点: 链式操作如果大于3步, 建议分开</span></span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;width&quot;</span>, <span class="string">&quot;100px&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;height&quot;</span>, <span class="string">&quot;100px&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>, <span class="string">&quot;blue&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.批量设置[推荐]</span></span><br><span class="line">$(<span class="string">&quot;div&quot;</span>).<span class="title function_">css</span>(&#123;</span><br><span class="line">	<span class="attr">width</span>: <span class="string">&quot;100px&quot;</span>,</span><br><span class="line">	<span class="attr">height</span>: <span class="string">&quot;100px&quot;</span>,</span><br><span class="line">	<span class="attr">background</span>: <span class="string">&quot;red&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.获取CSS样式值</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>($(<span class="string">&quot;div&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;background&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>获取元素的宽度</p>
<p>console.log($(“.father”).width());</p>
<p>offset([coordinates])</p>
<p>作用: 获取元素距离窗口的偏移位</p>
<p>console.log($(“.son”).offset().left);</p>
<p>position()</p>
<p>作用: 获取元素距离定位元素的偏移位,</p>
<p>console.log($(“.son”).position().left);</p>
<p>获取偏移位：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监听获取</span></span><br><span class="line">btns[<span class="number">0</span>].<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 获取网页滚动的偏移位</span></span><br><span class="line">    <span class="comment">// 注意点: 为了保证浏览器的兼容, 获取网页滚动的偏移位需要按照如下写法</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>($(<span class="string">&quot;body&quot;</span>).<span class="title function_">scrollTop</span>()+$(<span class="string">&quot;html&quot;</span>).<span class="title function_">scrollTop</span>());</span><br><span class="line">&#125;</span><br><span class="line">btns[<span class="number">1</span>].<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 设置网页滚动偏移位</span></span><br><span class="line">    <span class="comment">// 注意点: 为了保证浏览器的兼容, 设置网页滚动偏移位的时候必须按照如下写法</span></span><br><span class="line">    $(<span class="string">&quot;html,body&quot;</span>).<span class="title function_">scrollTop</span>(<span class="number">300</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="事件操作"><a href="#事件操作" class="headerlink" title="事件操作"></a>事件操作</h4><p><strong>事件的绑定</strong></p>
<p>jQuery中有两种绑定事件方式</p>
<p>1.eventName(fn); （初学者推荐）</p>
<p>编码效率略高（有代码提示）&#x2F; 部分事件jQuery没有实现,所以不能添加</p>
<p>2.on(eventName, fn); （大佬推荐）</p>
<p>编码效率略低（没有代码提示）&#x2F; 所有js事件都可以添加</p>
<p>注意点:可以添加多个相同或者不同类型的事件,不会覆盖</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;button&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;hello click1&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>事件的移出</strong></p>
<p>off方法如果不传递参数, 会移除所有的事件 <code>$(&quot;button&quot;).off();</code></p>
<p>off方法如果传递一个参数, 会移除所有指定类型的事件 <code>$(&quot;button&quot;).off(&quot;click&quot;);</code></p>
<p>off方法如果传递两个参数, 会移除所有指定类型的指定事件 <code>$(&quot;button&quot;).off(&quot;click&quot;, test1);</code></p>
<p><strong>事件冒泡和默认行为</strong></p>
<p>如何阻止事件冒泡 在回调函数最后返回 false 或接受一个event参数，在最后设置 event.stopPropagation();</p>
<p>如何阻止默认行为 在回调函数的最后返回 false 或者接受一个event参数，在最后设置 event.preventDefault();</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.son&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;son&quot;</span>);</span><br><span class="line">	<span class="comment">// return false;</span></span><br><span class="line">	event.<span class="title function_">stopPropagation</span>();</span><br><span class="line">&#125;);  </span><br><span class="line">$(<span class="string">&quot;a&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;弹出注册框&quot;</span>);</span><br><span class="line">	<span class="comment">// return false;</span></span><br><span class="line">	event.<span class="title function_">preventDefault</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>自动触发事件和行为</strong></p>
<p>trigger: 如果利用trigger自动触发事件,会触发事件冒泡</p>
<p>triggerHandler: 如果利用triggerHandler自动触发事件, 不会触发事件冒泡</p>
<p>trigger: 如果利用trigger自动触发事件,会触发默认行为</p>
<p>triggerHandler: 如果利用triggerHandler自动触发事件, 不会触发默认行为</p>
<p><strong>自定义事件</strong></p>
<p>想要自定义事件, 必须满足两个条件</p>
<ol>
<li><p>事件必须是通过on绑定的</p>
</li>
<li><p>事件必须通过trigger来触发</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.son&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;myClick&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;son&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">&quot;.son&quot;</span>).<span class="title function_">triggerHandler</span>(<span class="string">&quot;myClick&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>事件的命名空间</strong></p>
<p>情形：有多个人对同一个元素设置了多个事件</p>
<p>想要自定义事件, 必须满足两个条件</p>
<ol>
<li><p>事件必须是通过on绑定的</p>
</li>
<li><p>事件必须通过trigger来触发</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.son&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;click.zs&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;click1&quot;</span>); <span class="comment">// 张三设置了一个click</span></span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">&quot;.son&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;click.ls&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;click2&quot;</span>); <span class="comment">// 李四设置了一个click</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;.son&quot;</span>).<span class="title function_">trigger</span>(<span class="string">&quot;click.ls&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li>利用trigger触发子元素<strong>带命名空间</strong>的事件, 那么父元素带<strong>相同命名空间</strong>的事件也会被触发. 而父元素没有命名空间的事件不会被触发</li>
<li>利用trigger触发子元素<strong>不带命名空间</strong>的事件,那么子元素所有相同类型的事件和父元素所有相同类型的事件<strong>都会</strong>被触发</li>
</ul>
<p>也就是说：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&quot;.father&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;click.ls&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">// 1 </span></span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;father click1&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">&quot;.father&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">// 2</span></span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;father click2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">&quot;.son&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;click.ls&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">// 3</span></span><br><span class="line">	<span class="title function_">alert</span>(<span class="string">&quot;son click1&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;.son&quot;</span>).<span class="title function_">trigger</span>(<span class="string">&quot;click.ls&quot;</span>); <span class="comment">// 子事件带有命名空间，会触发 3 1</span></span><br><span class="line">$(<span class="string">&quot;.son&quot;</span>).<span class="title function_">trigger</span>(<span class="string">&quot;click&quot;</span>); <span class="comment">// 子元素不带有命名空间， 会触发 3 1 2</span></span><br></pre></td></tr></table></figure>



<p><strong>移入移出与事件委托</strong></p>
<h3 id="jQuery动画"><a href="#jQuery动画" class="headerlink" title="jQuery动画"></a>jQuery动画</h3><h4 id="显示和隐藏"><a href="#显示和隐藏" class="headerlink" title="显示和隐藏"></a>显示和隐藏</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 编写jQuery相关代码</span></span><br><span class="line"><span class="comment">// div 是一个方块，作为我们添加动画的对象</span></span><br><span class="line">$(<span class="string">&quot;button&quot;</span>).<span class="title function_">eq</span>(<span class="number">0</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">// $(&quot;div&quot;).css(&quot;display&quot;, &quot;block&quot;);</span></span><br><span class="line">	<span class="comment">// 注意: 这里的时间是毫秒</span></span><br><span class="line">	$(<span class="string">&quot;div&quot;</span>).<span class="title function_">show</span>(<span class="number">1000</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="comment">// 作用: 动画执行完毕之后调用</span></span><br><span class="line">		<span class="title function_">alert</span>(<span class="string">&quot;显示动画执行完毕&quot;</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;button&quot;</span>).<span class="title function_">eq</span>(<span class="number">1</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	<span class="comment">// $(&quot;div&quot;).css(&quot;display&quot;, &quot;none&quot;);</span></span><br><span class="line">	$(<span class="string">&quot;div&quot;</span>).<span class="title function_">hide</span>(<span class="number">1000</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="title function_">alert</span>(<span class="string">&quot;隐藏动画执行完毕&quot;</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$(<span class="string">&quot;button&quot;</span>).<span class="title function_">eq</span>(<span class="number">2</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	$(<span class="string">&quot;div&quot;</span>).<span class="title function_">toggle</span>(<span class="number">1000</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="title function_">alert</span>(<span class="string">&quot;切换动画执行完毕&quot;</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="展开收起"><a href="#展开收起" class="headerlink" title="展开收起"></a>展开收起</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 编写jQuery相关代码</span></span><br><span class="line"><span class="comment">// div 是一个方块，作为我们添加动画的对象</span></span><br><span class="line">$(<span class="string">&quot;button&quot;</span>).<span class="title function_">eq</span>(<span class="number">0</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	$(<span class="string">&quot;div&quot;</span>).<span class="title function_">slideDown</span>(<span class="number">1000</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="title function_">alert</span>(<span class="string">&quot;展开完毕&quot;</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">&quot;button&quot;</span>).<span class="title function_">eq</span>(<span class="number">1</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	$(<span class="string">&quot;div&quot;</span>).<span class="title function_">slideUp</span>(<span class="number">1000</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="title function_">alert</span>(<span class="string">&quot;收起完毕&quot;</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">&quot;button&quot;</span>).<span class="title function_">eq</span>(<span class="number">2</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	$(<span class="string">&quot;div&quot;</span>).<span class="title function_">slideToggle</span>(<span class="number">1000</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="title function_">alert</span>(<span class="string">&quot;收起完毕&quot;</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="淡入淡出"><a href="#淡入淡出" class="headerlink" title="淡入淡出"></a>淡入淡出</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 编写jQuery相关代码</span></span><br><span class="line"><span class="comment">// div 是一个方块，作为我们添加动画的对象</span></span><br><span class="line">$(<span class="string">&quot;button&quot;</span>).<span class="title function_">eq</span>(<span class="number">0</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	$(<span class="string">&quot;div&quot;</span>).<span class="title function_">fadeIn</span>(<span class="number">1000</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="title function_">alert</span>(<span class="string">&quot;淡入完毕&quot;</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">&quot;button&quot;</span>).<span class="title function_">eq</span>(<span class="number">1</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	$(<span class="string">&quot;div&quot;</span>).<span class="title function_">fadeOut</span>(<span class="number">1000</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="title function_">alert</span>(<span class="string">&quot;淡出完毕&quot;</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">&quot;button&quot;</span>).<span class="title function_">eq</span>(<span class="number">2</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	$(<span class="string">&quot;div&quot;</span>).<span class="title function_">fadeToggle</span>(<span class="number">1000</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="title function_">alert</span>(<span class="string">&quot;切换完毕&quot;</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">$(<span class="string">&quot;button&quot;</span>).<span class="title function_">eq</span>(<span class="number">3</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">	$(<span class="string">&quot;div&quot;</span>).<span class="title function_">fadeTo</span>(<span class="number">1000</span>, <span class="number">0.2</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="title function_">alert</span>(<span class="string">&quot;淡入完毕&quot;</span>);</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h2 id="JQuery-Ajax"><a href="#JQuery-Ajax" class="headerlink" title="JQuery + Ajax"></a>JQuery + Ajax</h2><h3 id="三个主要方法"><a href="#三个主要方法" class="headerlink" title="三个主要方法"></a>三个主要方法</h3><h4 id="ajax-【最常用的】"><a href="#ajax-【最常用的】" class="headerlink" title="$.ajax() 【最常用的】"></a>$.ajax() 【最常用的】</h4><p>$.ajax() 是 jQuery 中 AJAX 请求的核心方法，所有的其他方法都是在内部使用此方法。</p>
<p>语法： <code>$.ajax( &#123; name:value, name:value, ... &#125; ) </code></p>
<p>说明：参数是 json 的数据，包含请求方式，数据，回调方法等</p>
<p>常用参数：</p>
<ul>
<li>async ： 布尔值，表示请求是否异步处理。默认是 true </li>
<li>contentType ：发送数据到服务器时所使用的内容类型。默认是：”application&#x2F;x-www-form-urlencoded”。 </li>
<li>data：规定要发送到服务器的数据，可以是：string， 数组，多数是 json </li>
<li>dataType：期望从服务器响应的数据类型。jQuery 从 xml, json, text,, html 这些中测试最可能的类型 <ul>
<li>“xml” - 一个 XML 文档 </li>
<li>“html” - HTML 作为纯文本 </li>
<li>“text” - 纯文本字符串 </li>
<li>“json” - 以 JSON 运行响应，并以对象返回</li>
</ul>
</li>
<li>error(xhr,status,error)：如果请求失败要运行的函数, 其中 xhr, status, error 是自定义的形参名 </li>
<li>success(result,status,xhr)：当请求成功时运行的函数，其中 result, status, xhr 是自定义的形参名 </li>
<li>type：规定请求的类型（GET 或 POST 等），默认是 GET， get，post 不用区分大小写 </li>
<li>url：规定发送请求的 URL。</li>
</ul>
<p>举例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">   $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">       $(<span class="string">&quot;#search&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">// 为按钮加上点击事件</span></span><br><span class="line"></span><br><span class="line">           <span class="keyword">var</span> userId = $(<span class="string">&quot;#id&quot;</span>).<span class="title function_">val</span>(); <span class="comment">// 获取dom的value</span></span><br><span class="line">           <span class="comment">// 发起ajax请求</span></span><br><span class="line">           $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">               <span class="attr">url</span>:<span class="string">&quot;result&quot;</span>, <span class="comment">// 键值对，字符串值用引号引起来</span></span><br><span class="line"><span class="comment">// data的值大多是json类型</span></span><br><span class="line">               <span class="attr">data</span>: &#123; </span><br><span class="line">	<span class="comment">// 为什么前一个id要用引号引起来？</span></span><br><span class="line">	<span class="comment">// 答：这个id是一个参数名，我们要在后台根据这个参数名称用 request.getPatameter(&quot;id&quot;); 取出里面的数据</span></span><br><span class="line">                   <span class="string">&quot;id&quot;</span>: userId</span><br><span class="line">               &#125;,</span><br><span class="line">               <span class="attr">dataType</span>:<span class="string">&quot;json&quot;</span>,</span><br><span class="line">               <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">resp</span>) &#123;</span><br><span class="line">                   <span class="comment">// resp是返回的json对象，就是后端的 PrinterWriter 输出的值</span></span><br><span class="line">	<span class="comment">// 更新页面</span></span><br><span class="line">                   $(<span class="string">&quot;#name&quot;</span>).<span class="title function_">val</span>(resp.<span class="property">name</span>);</span><br><span class="line">                   $(<span class="string">&quot;#jiancheng&quot;</span>).<span class="title function_">val</span>(resp.<span class="property">jiancheng</span>);</span><br><span class="line">                   $(<span class="string">&quot;#shenghui&quot;</span>).<span class="title function_">val</span>(resp.<span class="property">shenghui</span>);</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;);</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure>


<h4 id="get"><a href="#get" class="headerlink" title="$.get()"></a>$.get()</h4><p>$.get() 方法使用 HTTP GET 请求从服务器加载数据。 </p>
<p>语法：<code>$.get(url,data,function(data,status,xhr),dataType)</code></p>
<ul>
<li>url 必需。规定您需要请求的 URL。 </li>
<li>data 可选。规定连同请求发送到服务器的数据。 </li>
<li>function(data,status,xhr)可选。当请求成功时运行的函数。data,status,xhr 是自定义形参名。 </li>
<li>参数说明： <ul>
<li>data - 包含来自请求的结果数据 </li>
<li>status - 包含请求的状态（”success”、”notmodified”、”error”、”timeout”、”parsererror”） </li>
<li>xhr - 包含 XMLHttpRequest 对象</li>
</ul>
</li>
<li>dataType 可选。规定预期的服务器响应的数据类型。默认地，jQuery 会智能判断。可能的<ul>
<li>类型： </li>
<li>“xml” - 一个 XML 文档 </li>
<li>“html” - HTML 作为纯文本 </li>
<li>“text” - 纯文本字符串</li>
<li>“json” - 以 JSON 运行响应，并以对象返回</li>
</ul>
</li>
</ul>
<p>实际开发中使用较少，例子略。</p>
<h4 id="post"><a href="#post" class="headerlink" title="$.post()"></a>$.post()</h4><p>$.post() 方法使用 HTTP POST 请求从服务器加载数据。 </p>
<p>语法：<code>$.post(URL,data,function(data,status,xhr),dataType) </code></p>
<p>参数同$get()</p>
<h3 id="普通查询"><a href="#普通查询" class="headerlink" title="普通查询"></a>普通查询</h3><p>代码见 <code>D:\GITHUB\Learning\JavaWeb\Ajax\jQuery&amp;Ajax-普通查询</code></p>
<p>具体细节不再详细说了。</p>
<h3 id="级联查询"><a href="#级联查询" class="headerlink" title="级联查询"></a>级联查询</h3><p>代码见 <code>D:\GITHUB\Learning\JavaWeb\Ajax\jQuery&amp;Ajax-级联查询</code></p>
<p>具体细节就不再详细写了。</p>
<h1 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h1><blockquote>
<p>实际开发中使用JQuery + Ajax较多，这部分内容作为了解即可。  </p>
<p>重点内容是 JQuery的 【## JQuery + Ajax 中的普通查询和级联查询】</p>
</blockquote>
<p>ajax:Asynchronous JavaScript and XML（异步的 JavaScript 和 XML）。</p>
<ul>
<li><p>Asynchronous: 异步的意思</p>
</li>
<li><p>JavaScript：javascript脚本，在浏览器中执行</p>
</li>
<li><p>and : 和</p>
</li>
<li><p>xml : 是一种数据格式</p>
</li>
</ul>
<p>ajax是一种做局部刷新的新方法（2003左右），不是一种语言。 ajax包含的技术主要有javascript, dom,css, xml等等。 核心是javascript 和 xml （json）。</p>
<p>javascript：负责创建异步对象， 发送请求， 更新页面的dom对象。 ajax请求需要服务器端的数据。</p>
<p>xml，现在是json</p>
<h2 id="全局刷新和局部刷新"><a href="#全局刷新和局部刷新" class="headerlink" title="全局刷新和局部刷新"></a>全局刷新和局部刷新</h2><p>全局刷新： 整个浏览器被新的数据覆盖。 在网络中传输大量的数据。 浏览器需要加载，渲染页面。</p>
<p>局部刷新： 在浏览器器的内部，发起请求，获取数据，改变页面中的部分内容。 其余的页面无需加载和渲染。 网络中数据传输量少， 给用户的感受好。</p>
<p> ajax是用来做局部刷新的。局部刷新使用的核心对象是 异步对象（XMLHttpRequest）， 这个异步对象是存在浏览器内存中的 ，使用javascript语法创建和使用XMLHttpRequest对象。</p>
<h2 id="异步请求对象"><a href="#异步请求对象" class="headerlink" title="异步请求对象"></a>异步请求对象</h2><p>步骤：</p>
<ol>
<li><p>创建异步对象 var xmlHttp &#x3D; new XMLHttpRequest();</p>
</li>
<li><p>给异步对象绑定事件。onreadystatechange ：当异步对象发起请求，获取了数据都会触发这个事件。这个事件需要指定一个函数， 在函数中处理状态的变化。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 例如：</span></span><br><span class="line">    xmlHttp.onreadystatechange= function()&#123;</span><br><span class="line">       处理请求的状态变化。</span><br><span class="line">		 <span class="keyword">if</span>(xmlHttp.readyState == <span class="number">4</span> &amp;&amp; xmlHttp.status== <span class="number">200</span> )&#123;</span><br><span class="line">           <span class="comment">//可以处理服务器端的数据，更新当前页面</span></span><br><span class="line">			  <span class="type">var</span> <span class="variable">data</span> <span class="operator">=</span> xmlHttp.responseText;</span><br><span class="line">			  document.getElementById(<span class="string">&quot;name&quot;</span>).value= data;</span><br><span class="line">		 &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>初始异步请求对象 : 异步的方法open(). <code>xmlHttp.open(请求方式get|post, &quot;服务器端的访问地址&quot;, 同步|异步请求（默认是true，异步请求）)</code>例如：xmlHttp.open(“get”, “loginServlet?name&#x3D;zs&amp;pwd&#x3D;123”,true);</p>
</li>
<li><p>使用异步对象发送请求     <code>xmlHttp.send()</code></p>
</li>
</ol>
<p>异步对象的属性 readyState 表示异步对象请求的状态变化</p>
<ul>
<li>0：创建异步对象时， new XMLHttpRequest();</li>
<li>1: 初始异步请求对象， xmlHttp.open()</li>
<li>2：发送请求， xmlHttp.send()</li>
<li>3: 从服务器端获取了数据，此时3， 注意3是异步对象内部使用， 获取了原始的数据。</li>
<li>4：异步对象把接收的数据处理完成后。 此时开发人员在4的时候处理数据。在4的时候，开发人员做什么 ？  更新当前页面。</li>
</ul>
<p>异步对象的status属性，表示网络请求的状况的，  200， 404， 500， 需要是当status&#x3D;&#x3D;200时，表示网络请求是成功的。</p>
<p>获取服务器端返回的数据， 使用异步对象的属性 responseText . <code>例子：xmlHttp.responseText </code></p>
<p>回调：当请求的状态变化时，异步对象会自动调用onreadystatechange事件对应的函数。</p>
<p>访问地址： 使用get方式传递参数<code>http://localhost:8080/course_myajax/bmiPrint?name=李四&amp;w=82&amp;h=1.8</code></p>
<p>前端实现：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>UpAndDown<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">doAjax</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 使用内存中的一部对象，代替浏览器发起请求，异步对象使用js创建和管理。</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 1. 创建对象异步对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> xmlHttp = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 2. 绑定事件</span></span></span><br><span class="line"><span class="language-javascript">      xmlHttp.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//处理服务器返回的数据，更新当前的页面</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 响应成功, 更新部分页面</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span>(xmlHttp.<span class="property">readyState</span> === <span class="number">4</span> &amp;&amp; xmlHttp.<span class="property">status</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;result&quot;</span>).<span class="property">innerText</span> = xmlHttp.<span class="property">responseText</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 3. 初始请求数据</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 获取dom对象的value属性值</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> height = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;height&quot;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> weight = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;weight&quot;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> param = <span class="string">&quot;weight=&quot;</span>+weight+<span class="string">&quot;&amp;height=&quot;</span>+height;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">alert</span>(param);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      xmlHttp.<span class="title function_">open</span>(<span class="string">&quot;get&quot;</span>, <span class="string">&quot;result?&quot;</span> + param, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 4. 发起请求</span></span></span><br><span class="line"><span class="language-javascript">      xmlHttp.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">      身高<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;height&quot;</span> /&gt;</span></span><br><span class="line">      体重<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;weight&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span>  <span class="attr">value</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;doAjax()&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;result&quot;</span>&gt;</span>结果<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>后端实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="type">double</span> <span class="variable">height</span> <span class="operator">=</span> Double.parseDouble(request.getParameter(<span class="string">&quot;height&quot;</span>));</span><br><span class="line">        <span class="type">double</span> <span class="variable">weight</span> <span class="operator">=</span> Double.parseDouble(request.getParameter(<span class="string">&quot;weight&quot;</span>));</span><br><span class="line">        <span class="type">double</span> <span class="variable">result</span> <span class="operator">=</span> weight / (height * height);</span><br><span class="line">        <span class="comment">//---------------------</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html; charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        pw.println(<span class="string">&quot;您的BMI指数为 ： &quot;</span> +result);</span><br><span class="line">        pw.flush();</span><br><span class="line">        pw.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doPost(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>全局刷新源代码：<code>Learning\JavaWeb\Ajax\BMI-整体刷新</code></p>
<p>局部刷新源代码：<code>Learning\JavaWeb\Ajax\BMI-局部刷新</code></p>
<h2 id="json的使用"><a href="#json的使用" class="headerlink" title="json的使用"></a>json的使用</h2><p>ajax发起请求——-servlet（返回的一个json格式的字符串 { name:”河北”, jiancheng:”冀”,”shenghui”:”石家庄”}）</p>
<p>json分类：</p>
<ol>
<li>json对象 ，JSONObject ,这种对象的格式   名称:值， 也可以看做是 key:value 格式。</li>
<li>json数组， JSONArray, 基本格式  [{ name:”河北”, jiancheng:”冀”,”shenghui”:”石家庄”} , { name:”山西”, jiancheng:”晋”,”shenghui”:”太原”} ]</li>
</ol>
<p>为什么要使用json</p>
<ol>
<li>json格式好理解</li>
<li>json格式数据在多种语言中，比较容易处理。 使用java， javascript读写json格式的数据比较容易。</li>
<li>json格式数据他占用的空间下，在网络中传输快， 用户的体验好。</li>
</ol>
<p>处理json的工具库： gson（google）； fastjson（阿里），jackson， json-lib</p>
<p>在js中的，可以把json格式的字符串，转为json对象， json中的key，就是json对象的属性名。</p>
<p>添加处理json的jar包：</p>
<p>jackson-annotations-2.9.0.jar<br>jackson-core-2.9.0.jar<br>jackson-databind-2.9.0.jar</p>
<p>代码：</p>
<p>详细代码见:<code>Learning\JavaWeb\Ajax\使用json+ajax</code></p>
<p>前端</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">doAjax</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 使用内存中的一部对象，代替浏览器发起请求，异步对象使用js创建和管理。</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 1. 创建对象异步对象</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> xmlHttp = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 2. 绑定事件</span></span></span><br><span class="line"><span class="language-javascript">    xmlHttp.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//处理服务器返回的数据，更新当前的页面</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 响应成功</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span>(xmlHttp.<span class="property">readyState</span> === <span class="number">4</span> &amp;&amp; xmlHttp.<span class="property">status</span> === <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// eval 是执行括号中的代码，把json转换为json对象</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> jsonobj = <span class="built_in">eval</span>(<span class="string">&quot;(&quot;</span> + xmlHttp.<span class="property">responseText</span> + <span class="string">&quot;)&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// 更新json对象</span></span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;name&quot;</span>).<span class="property">value</span> = jsonobj.<span class="property">name</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;jiancheng&quot;</span>).<span class="property">value</span> = jsonobj.<span class="property">jiancheng</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 3. 初始请求数据</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 获取dom对象的value属性值</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> id = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;id&quot;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">    xmlHttp.<span class="title function_">open</span>(<span class="string">&quot;get&quot;</span>, <span class="string">&quot;result?id=&quot;</span> + id, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 4. 发起请求</span></span></span><br><span class="line"><span class="language-javascript">    xmlHttp.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>后端</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select id, name, jiancheng, shenghui from province where id = ?&quot;</span>;</span><br><span class="line">    Object[] params = &#123;request.getParameter(<span class="string">&quot;id&quot;</span>)&#125;;</span><br><span class="line">    <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> DBUtil.executeQuery(sql, params);</span><br><span class="line"></span><br><span class="line">    Province province;</span><br><span class="line">    <span class="comment">// 设置初始值。保证无论如何都会返回一个json格式的数据</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">&quot;&#123;&#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">            province = <span class="keyword">new</span> <span class="title class_">Province</span>(rs.getString(<span class="string">&quot;id&quot;</span>),</span><br><span class="line">                    rs.getString(<span class="string">&quot;name&quot;</span>),</span><br><span class="line">                    rs.getString(<span class="string">&quot;jiancheng&quot;</span>),</span><br><span class="line">                    rs.getString(<span class="string">&quot;shenghui&quot;</span>));</span><br><span class="line">            <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">            json = objectMapper.writeValueAsString(province);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    response.setContentType(<span class="string">&quot;application/json;charset=utf-8&quot;</span>);</span><br><span class="line">    <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">    pw.println(json);</span><br><span class="line">    pw.flush();</span><br><span class="line">    pw.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="ajax实现页面跳转"><a href="#ajax实现页面跳转" class="headerlink" title="ajax实现页面跳转"></a>ajax实现页面跳转</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>:<span class="string">&quot;POST&quot;</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="comment">//你的请求程序页面随便啦</span></span><br><span class="line">    <span class="attr">async</span>:<span class="literal">false</span>,<span class="comment">//同步：意思是当有返回值以后才会进行后面的js程序。</span></span><br><span class="line">    <span class="attr">data</span>:<span class="comment">//请求需要发送的处理数据</span></span><br><span class="line">    <span class="attr">success</span>:<span class="keyword">function</span>(<span class="params">msg</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> (msg) &#123;<span class="comment">//根据返回值进行跳转</span></span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = <span class="string">&#x27;你的跳转的目标地址&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<p>ajax只接受最后返回的值，不会响应跳转请求更改浏览器地址栏地址转向的，你需要用js判断ajax的返回值是否要跳转，然后设置location.href实现跳转。</p>
<p>ajax异步请求struts的action只会返回所请求页面的html源代码。这样请求是不会跳转的。</p>
<p>补充一下:在springMVC框架中,当controller层方法返回String类型的时候默认是进行页面跳转,这时候后台使用return时ajax接收到的并不是后台返回的某个字符串或状态码,而是整个html对象,这时可以在后台的方法上添加注解 @ResponseBody,就可以直接使用return返回想要返回的字符串而不进行页面跳转,而且ajax接收到的也是我们想要返回的字符串而不是整个html对象,然后再进行判断后用window.location.href进行页面跳转</p>
<h1 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h1><blockquote>
<p>Axios 官网 <a target="_blank" rel="noopener" href="https://github.com/axios/axios">https://github.com/axios/axios</a></p>
</blockquote>
<h2 id="get请求"><a href="#get请求" class="headerlink" title="get请求"></a>get请求</h2><p>基本语法：</p>
<p><code>axios.get(地址？k1=v1&amp;k2=vv2&amp;k3=v3).then(function(reponse)&#123;&#125;,function(error)&#123;&#125;)</code></p>
<p>示例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">&quot;https://autumnfish.cn/api/joke/list?num=3&quot;</span>).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">response</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(response);</span><br><span class="line">    &#125;, <span class="keyword">function</span>(<span class="params">error</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="post请求"><a href="#post请求" class="headerlink" title="post请求"></a>post请求</h2><p><code>axios.post(地址,json对象).then(function(response)&#123;&#125;,function(error)&#123;&#125;)</code></p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    axios.<span class="title function_">post</span>(<span class="string">&quot;https://automnfish.cn/api/user/reg&quot;</span>, &#123;</span><br><span class="line">        <span class="attr">username</span>:<span class="string">&quot;jack&quot;</span></span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">response</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(response)</span><br><span class="line">    &#125;, <span class="keyword">function</span>(<span class="params">error</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Vue-Axios"><a href="#Vue-Axios" class="headerlink" title="Vue+Axios"></a>Vue+Axios</h2><p>点击按钮之后随机获取一条笑话</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;getJoke&quot;</span>&gt;</span>点击按钮随机获取一条笑话<span class="tag">&lt;/<span class="name">button</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		&#123;&#123;msg&#125;&#125;</span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title class_">Vue</span> = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="attr">el</span>:<span class="string">&quot;#app&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">msg</span>: <span class="string">&quot;&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">getJoke</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    	<span class="comment">// 在匿名函数中this的指向改变了</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    	<span class="comment">// 所以在这里先用that把this保存起来</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="keyword">var</span> that = <span class="variable language_">this</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					axios.<span class="title function_">get</span>(<span class="string">&quot;https://autumnfish.cn/api/joke&quot;</span>).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">response</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        		<span class="comment">// 在这里直接用that进行赋值</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						that.<span class="property">msg</span> = response.<span class="property">data</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					&#125;, <span class="keyword">function</span>(<span class="params">error</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

</div>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2022-09-21</span>
            
            
             
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                
                    <span>上一篇：<a href='/2022/10/22/Express.js/'>笔记 | Express.js</a></span>
                

                
                    <span class="post-footer-pre-next-last-span-right">下一篇：<a href="/2022/08/05/%E8%AF%91-BSD%E9%80%9A%E7%94%A8%E5%91%BD%E4%BB%A4%E6%89%8B%E5%86%8C/">译 | BSD通用命令手册</a>
                    </span>
                
            </div>
    
        
    

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
             

            
                

            
        </span>
       
    
</div>



<!--这是指一条线往下的内容-->
<div class="footer-last">
    
            <span>Change And Challenge</span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--目录-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--回到顶部按钮-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // 启用插件
            thumbnail: true,          // 显示缩略图
            zoom: true,               // 启用缩放功
            rotate: true,             // 启用旋转功能能
            autoplay: true,        // 启用自动播放功能
            fullScreen: true,      // 启用全屏功能
            pager: false, //页码,
            zoomFromOrigin: true,   // 从原始位置缩放
            actualSize: true,       // 启用查看实际大小的功能
            enableZoomAfter: 300,    // 延迟缩放，确保图片加载完成后可缩放
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // 修复选择器
    }
    
</script>


                </div>
            
            
                <!-- 回到顶部的按钮-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- 返回的按钮-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>