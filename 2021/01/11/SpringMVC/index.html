<!DOCTYPE html>
<html lang="en">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="笔记 | SpringMVC" />
    <meta name="hexo-theme-A4" content="v1.9.6" />
    <link rel="alternate icon" type="image/webp" href="/img/avatar.png">
    <title>Jingcun Yan</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--注意：首页既不是post也不是page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--返回顶部css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--目录-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery-bundle.min.css">


<meta name="generator" content="Hexo 7.3.0"></head>
    
    
        <style>
            .index-main{
                max-width:  880px;
            }
        </style>

    
    



    

    
    

    
    
    
    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        <script>
            const options = {
                bottom: '40px', // default: '32px'
                right: 'unset', // default: '32px'
                left: '42px', // default: 'unset'
                time: '0.3s', // default: '0.3s'
                mixColor: '#fff', // default: '#fff'
                backgroundColor: ' #e4e4e4 ',  // default: '#fff'
                buttonColorDark: '#100f2c',  // default: '#100f2c'
                buttonColorLight: '#fff', // default: '#fff'
                saveInCookies: true, // default: true,
                label: '🌓', // default: ''
                autoMatchOsTheme: true // default: true
            }
            const darkmode = new Darkmode(options);
            darkmode.showWidget();
        </script>
        
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/avatar.png" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">Jingcun Yan</a> 
            <span class="description"></span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">首页</a></li>
            
        
            
                <li><a href="/list/">文章</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--说明是文章post页面-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    笔记 | SpringMVC
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                
                    
                     <span>字数总计：7.9k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>阅读估时：34分钟</span>
                
                
            </div>
    

    <div class="post-md">
        
        <div class=".article-gallery"><h1 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h1><h2 id="SpringMVC概述"><a href="#SpringMVC概述" class="headerlink" title="SpringMVC概述"></a>SpringMVC概述</h2><p>SpringMVC：是基于spring的一个框架， 实际上就是spring的一个模块， 专门是做web开发的。是servlet的一个升级</p>
<p>Web开发底层是servlet ， 框架是在servlet基础上面加入一些功能，让你做web开发方便。</p>
<p>SpringMVC就是一个Spring。 Spring是容器，ioc能够管理对象，使用&lt; bean &gt;, @Component, @Repository, @Service, @Controller</p>
<p>SpringMVC能够创建对象， 放入到容器中（SpringMVC容器）， springmvc容器中放的是控制器对象，</p>
<p>我们要做的是 使用@Contorller创建控制器对象， 把对象放入到springmvc容器中， 把创建的对象作为控制器使用， 这个控制器对象能接收用户的请求， 显示处理结果，就当做是一个servlet使用。</p>
<p>使用@Controller注解创建的是一个普通类的对象， 不是Servlet。 springmvc赋予了控制器对象一些额外的功能。</p>
<p>Web开发底层是servlet， springmvc中有一个对象是Servlet ： DispatherServlet(中央调度器)</p>
<p>DispatherServlet: 负责接收用户的所有请求， 用户把请求给了DispatherServlet， 之后DispatherServlet把请求转发给我们的Controller对象， 最后是Controller对象处理请求。</p>
<h3 id="第一个SpringMVC程序"><a href="#第一个SpringMVC程序" class="headerlink" title="第一个SpringMVC程序"></a>第一个SpringMVC程序</h3><p>需求： 用户在页面发起一个请求， 请求交给springmvc的控制器对象，并显示请求的处理结果（在结果页面显示一个欢迎语句）。</p>
<p><strong>实现步骤：</strong></p>
<ol>
<li><p>新建web maven工程</p>
</li>
<li><p>加入依赖，spring-webmvc依赖，会间接把spring的依赖都加入到项目，jsp，servlet依赖</p>
</li>
<li><p>重点： 在web.xml中注册springmvc框架的核心对象DispatcherServlet（注意：只要是SpringMVC的项目，就必须有DispatcherServlet对象，这个对象是衡量程序是不是用了SpringMVC的标准）</p>
<ol>
<li>DispatcherServlet叫做中央调度器， 是一个servlet， 它的父类是继承HttpServlet</li>
<li>DispatcherServle也叫做前端控制器（front controller）</li>
<li>DispatcherServlet负责接收用户提交的请求， 调用其它的控制器对象，并把请求的处理结果显示给用户</li>
</ol>
</li>
<li><p>创建一个发起请求的页面 index.jsp</p>
</li>
<li><p>创建控制器(处理器)类</p>
<ol>
<li>在类的上面加入@Controller注解，创建对象，并放入到springmvc容器中</li>
<li>在类中的方法上面加入@RequestMapping注解。</li>
</ol>
</li>
<li><p>创建一个作为结果的jsp，显示请求的处理结果。</p>
</li>
<li><p>创建springmvc的配置文件（spring的配置文件一样）</p>
<ol>
<li>声明组件扫描器， 指定@Contorller注解所在的包名</li>
<li>声明视图解析器。帮助处理视图的。</li>
</ol>
</li>
</ol>
<p>加入依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pom.xml--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>更改web版本为4.0</p>
<p><a href="/img/image-20210111103339072.png" title="image-20210111103339072" class="gallery-item" style="box-shadow: none;"> <img src="/img/image-20210111103339072.png" alt="image-20210111103339072"></a></p>
<p>注册中央调度器DispatcherServlt，需要在tomcat服务器启动后，创建DispatcherServlet对象的实例。</p>
<p>​    为什么要创建DispatcherServlet对象的实例呢？    因为DispatcherServlet在他的创建过程中， 会同时创建springmvc容器对象，    读取springmvc的配置文件，把这个配置文件中的对象都创建好， 当用户发起请求时就可以直接使用对象了。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--web.xml--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--自定义springmvc读取的配置文件的位置--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!--springmvc的配置文件的位置的属性--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--指定自定义文件的位置, 写在 main/resources 目录中--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:SpringMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            load-on-startup:表示tomcat启动后创建对象的顺序。它的值是整数，数值越小，tomcat创建对象的时间越早。 大于等于0的整数。</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        使用框架的时候， url-pattern可以使用两种值</span></span><br><span class="line"><span class="comment">        1. 使用扩展名方式， 语法 *.xxxx , xxxx是自定义的扩展名。 常用的方式 *.do, *.action, *.mvc等等</span></span><br><span class="line"><span class="comment">           不能使用 *.jsp</span></span><br><span class="line"><span class="comment">           http://localhost:8080/myweb/some.do</span></span><br><span class="line"><span class="comment">        2.使用斜杠 &quot;/&quot;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>SpringMVC配置文件 <code>SpringMVC.xml</code> , 注册组件扫描器</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.Jancoyan.*&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>创建发起请求的页面 index.jsp</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;第一个spring MVC项目&lt;/p&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;some.do&quot;</span>&gt;发起some.<span class="keyword">do</span>请求&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<p>创建处理器（控制器）类（这样的类可以有很多个）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com.Jancoyan.Controller.MyController</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line">    <span class="comment">// 处理用户提交的请求，使用自定义方法来处理请求</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 准备使用doSome方法处理some.do请求。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@RequestMapping</span>: 请求映射，作用是把一个请求地址和一个方法绑定在一起, 一个请求指定一个方法处理。</span></span><br><span class="line"><span class="comment">     *  属性： 1. value 是一个String，表示请求的uri地址的（some.do）, value的值必须是唯一的， 不能重复。 在使用时，推荐地址以“/”开头</span></span><br><span class="line"><span class="comment">     *  位置：1.在方法的上面，常用的。2.在类的上面</span></span><br><span class="line"><span class="comment">     *  说明： 使用RequestMapping修饰的方法叫做处理器方法或者控制器方法。使用<span class="doctag">@RequestMapping</span>修饰的方法可以处理请求的，类似Servlet中的doGet, doPost</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *  返回值：ModelAndView 表示本次请求的处理结果</span></span><br><span class="line"><span class="comment">     *   Model: 数据，请求处理完成后，要显示给用户的数据</span></span><br><span class="line"><span class="comment">     *   View: 视图， 比如jsp等等。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/some.do&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">doSome</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 处理some.do 相当于service调用处理完成了</span></span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        <span class="comment">// 添加数据, 框架最后把他放在request作用域（setAttribute）</span></span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;msg1&quot;</span>, <span class="string">&quot;hello,SpringMVC&quot;</span>);</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;msg2&quot;</span>, <span class="string">&quot;welcome&quot;</span>);</span><br><span class="line">        <span class="comment">// 指定视图的完整路径, 框架会对视图进行forward处理 request.getRequestDispatcher(&quot;/show.jsp&quot;).forward()</span></span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;/show.jsp&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="请求处理流程"><a href="#请求处理流程" class="headerlink" title="请求处理流程"></a>请求处理流程</h3><ol>
<li>发起some.do</li>
<li>tomcat(web.xml–url-pattern知道 *.do的请求给DispatcherServlet)</li>
<li>DispatcherServlet（根据springmvc.xml配置知道 some.do—doSome()）</li>
<li>DispatcherServlet把some.do转发给MyController.doSome()方法</li>
<li>框架执行doSome（）把得到ModelAndView进行处理， 转发到show.jsp</li>
</ol>
<p>上面的过程简化的方式  some.do—DispatcherServlet—MyController</p>
<p><a href="/img/image-20210112095419640.png" title="image-20210112095419640" class="gallery-item" style="box-shadow: none;"> <img src="/img/image-20210112095419640.png" alt="image-20210112095419640"></a></p>
<p>用户可以直接通过在地址栏敲入show.jsp直接显示页面，但是这时候页面中并没有获取到数据，此时我们需要隐藏显示结果的视图，也就是将show.jsp放入 <code>webapp/WEB-INF/view</code> 下面达到隐藏效果，但是此时在控制器中转发的时候要写完整的路径，所以我们要在springmvc配置文件中进行配置<strong>视图解析器</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--SpringMVC.xml--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        前缀:视图文件的路径--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/view/&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        前缀:视图文件的扩展名--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>当配置完视图解析器之后，可以使用逻辑名称（文件名），指定视图，框架会使用视图解析器的前缀 + 逻辑名称 + 后缀 组成完成路径， 这里就是字符连接操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modelAndView.setViewName(<span class="string">&quot;show&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>至此，第一个项目已经结束，具体源代码参考 <code>GITHUB\Learning\JavaWeb\SpringMVC\1.FirstApplication</code></p>
<h3 id="SpringMVC执行流程"><a href="#SpringMVC执行流程" class="headerlink" title="SpringMVC执行流程"></a>SpringMVC执行流程</h3><p><a href="/img/image-20210113162949692.png" title="image-20210113162949692" class="gallery-item" style="box-shadow: none;"> <img src="/img/image-20210113162949692.png" alt="image-20210113162949692"></a></p>
<ol>
<li>浏览器提交请求到中央调度器</li>
<li>中央调度器直接将请求转给处理器映射器。</li>
<li>处理器映射器会根据请求，找到处理该请求的处理器，并将其封装为处理器执行链后返回给中央调度器。</li>
<li>中央调度器根据处理器执行链中的处理器，找到能够执行该处理器的处理器适配器。</li>
<li>处理器适配器调用执行处理器。</li>
<li>处理器将处理结果及要跳转的视图封装到一个对象 ModelAndView 中，并将其返回给处理器适配器。</li>
<li>处理器适配器直接将结果返回给中央调度器。</li>
<li>中央调度器调用视图解析器，将 ModelAndView 中的视图名称封装为视图对象。</li>
<li>视图解析器将封装了的视图对象返回给中央调度器</li>
<li>中央调度器调用视图对象，让其自己进行渲染，即进行数据填充，形成响应对象。</li>
<li>中央调度器响应浏览器。</li>
</ol>
<h2 id="SpringMVC注解式开发"><a href="#SpringMVC注解式开发" class="headerlink" title="SpringMVC注解式开发"></a>SpringMVC注解式开发</h2><h3 id="RequestMapping-定义请求规则"><a href="#RequestMapping-定义请求规则" class="headerlink" title="@ RequestMapping 定义请求规则"></a>@ RequestMapping 定义请求规则</h3><p>@ RequestMapping 放在类的上面，表示该控制器类中所有的RequestMapping前面都会加上类上面RequestMapping括号中的内容，我们通常根据这个来划分不同的控制器的功能，以及进行模块的迁移。只需要改动控制器类上面的requestMapping，就可以实现模块的迁移</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.xml</span></span><br><span class="line">&lt;a href=<span class="string">&quot;user/some.do&quot;</span>&gt; 调用user的doSome &lt;/a&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MyController.java</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/some.do&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">doSome</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>指定method请求方式</p>
<p>如果前后端的请求方式不同，就会报错。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 指定请求方式为 POST，使用RequestMethod中的枚举类型</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/some.do&quot;, method = RequestMethod.POST)</span> <span class="comment">// 在这里写</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">doSome</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="处理器方法的参数"><a href="#处理器方法的参数" class="headerlink" title="处理器方法的参数"></a>处理器方法的参数</h3><p>处理器方法可以包含以下四类参数，这些参数会在系统调用时由<strong>系统自动赋值</strong>，即我们可在方法内直接使用。 写在控制器方法的形参列表的位置。</p>
<ul>
<li>HttpServletRequest</li>
<li>HttpServletResponse</li>
<li>HttpSession</li>
<li>请求中所携带的请求参数</li>
</ul>
<p>前三种在调用的时候系统自动赋值，我们直接在控制器方法中直接赋值即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/some.do&quot;, method = RequestMethod.POST)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">doSome</span><span class="params">(HttpServletRequest request, HttpServletResponse response, HttpSession session)</span>&#123;</span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">    <span class="comment">// 直接使用即可</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第四种有两种方法</p>
<ul>
<li>逐个接收参数</li>
<li>对象接受参数</li>
</ul>
<p>注意：在提交请求参数时，get请求方式中文没有乱码。 使用post方式提交请求，中文有乱码，需要使用过滤器处理乱码的问题。过滤器可以自定义，也可使用框架中提供的过滤器 CharacterEncodingFilter</p>
<p><strong>逐个接收参数</strong></p>
<p>逐个接受参数的时候，处理器（控制器）方法的形参名和请求中参数名必须一致。同名的请求参数赋值给同名的形参, 对位置没有要求。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.jsp</span></span><br><span class="line">    &lt;form action=<span class="string">&quot;user/addOneByOne.do&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        增加功能的实现： &lt;br&gt;</span><br><span class="line">        name : &lt;input name=<span class="string">&quot;name&quot;</span> type=<span class="string">&quot;text&quot;</span>&gt; &lt;br&gt;</span><br><span class="line">        age : &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;age&quot;</span>&gt; &lt;br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;逐个接收addOneByOne.do&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"><span class="comment">// MyController.java</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/addOneByOne.do&quot;, method = RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">addOneByOne</span><span class="params">(String name, <span class="type">int</span> age)</span>&#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;age&quot;</span>, age);</span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// show.jsp</span></span><br><span class="line">    &lt;h3&gt;获取到的name为 ： $&#123;name&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;h3&gt;获取到的age为 ： $&#123;age&#125;&lt;/h3&gt;</span><br></pre></td></tr></table></figure>

<p>原理解析：</p>
<p>框架接收请求参数，使用request对象接收请求参数的时候，框架会帮我们自动执行以下内容：</p>
<p><code>String strName = request.getParameter(&quot;name&quot;);</code><br><code>String strAge = request.getParameter(&quot;age&quot;);</code></p>
<p>springmvc框架通过 DispatcherServlet 调用 MyController的doSome()方法调用方法时，按名称对应，把接收的参数赋值给形参 : doSome（strName，Integer.valueOf(strAge)）框架会提供类型转换的功能，能把String转为 int ，long ， float， double等类型。</p>
<p>但是当我们在前端传入age&#x3D;“” 年龄为空的时候，会出现400错误，400状态码是客户端错误， 表示提交请求参数过程中，发生了问题。</p>
<p>因为 Integer.valueOf(strAge) 传入一个空的时候，会出现错误。</p>
<p>这个可以JavaScript进行前端校验</p>
<hr>
<p>注意：用get方法进行提交的时候不会出现乱码错误，但是post方法会出现中文乱码，这时候应该使用过滤器：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    注册声明过滤器，解决post乱码问题--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        设置项目中使用的字符编码--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--         强制请求对象(HttpServletRequest)使用encoding编码的值--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceRequestEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        强制应答对象(HttpServletResponse)使用encoding编码的值--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceResponseEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    /*:表示强制所有的请求先通过过滤器处理。--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<p><strong>校正请求参数名@RequestParam</strong></p>
<p>前端的sname赋值给形参name；sage赋值给形参age</p>
<p>@RequestParam: 逐个接收请求参数中， 解决请求中参数名形参名不一样的问题</p>
<p>属性：</p>
<ol>
<li>value 请求中的参数名称</li>
<li>required 是一个boolean，默认是true, true：表示请求中必须包含此参数。</li>
</ol>
<p>位置： 在处理器方法的形参定义的前面</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/modifyParas.do&quot;, method = RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">modifyParas</span><span class="params">(<span class="meta">@RequestParam(value = &quot;sname&quot;, required = true)</span> String name, <span class="meta">@RequestParam(value = &quot;sage&quot;, required = true)</span> <span class="type">int</span> age)</span>&#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;age&quot;</span>, age);</span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>对象接收参数</strong></p>
<p>先调用无参构造，再用set方法赋值</p>
<p>可以有多个形参对象，他们互不干扰，对象会分别创建然后赋值。</p>
<p>@RequestParam 不能在这种情况下使用。</p>
<p> 处理器方法形参是java对象， 这个对象的属性名和请求中参数名一样的,框架会创建形参的java对象， 给属性赋值。 请求中的参数是name，框架会调用setName()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/addObject&quot;, method = RequestMethod.POST)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">addObj</span><span class="params">(Student student)</span>&#123;</span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;name&quot;</span>, student.getName());</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;age&quot;</span>, student.getAge());</span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>源码：<code>GITHUB\Learning\JavaWeb\SpringMVC\2.Parameters</code></p>
<h3 id="处理器方法的返回值"><a href="#处理器方法的返回值" class="headerlink" title="处理器方法的返回值"></a>处理器方法的返回值</h3><p>p23 – 32 学完ajax + jquery 再来看</p>
<h3 id="解读-url-pattern"><a href="#解读-url-pattern" class="headerlink" title="解读 &lt; url-pattern &#x2F;&gt;"></a>解读 &lt; url-pattern &#x2F;&gt;</h3><p>用户发起的请求是由哪些服务器程序处理的？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/ch05_url_pattern/index.jsp ：tomcat（jsp会转为servlet）</span><br><span class="line">http://localhost:8080/ch05_url_pattern/js/jquery-3.4.1.js ： tomcat</span><br><span class="line">http://localhost:8080/ch05_url_pattern/images/p1.jpg ： tomcat</span><br><span class="line">http://localhost:8080/ch05_url_pattern/html/test.html： tomcat</span><br><span class="line">http://localhost:8080/ch05_url_pattern/some.do ：  DispatcherServlet（springmvc框架处理的）</span><br></pre></td></tr></table></figure>

<p>因此，tomcat本身能处理静态资源的访问， 像html， 图片， js文件都是静态资源</p>
<p>原因：tomcat的web.xml文件有一个servlet 名称是 default ， 在服务器启动时创建的。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--tomcat/conf/web.xml--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>default<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.apache.catalina.servlets.DefaultServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>debug<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>0<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>listings<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>default<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>  表示静态资源和未映射的请求都这个default处理</span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>default这个servlet作用： </p>
<ol>
<li>处理静态资源</li>
<li>处理未映射到其它servlet的请求。</li>
</ol>
<p>使用框架的时候， url-pattern可以使用两种值</p>
<ol>
<li><p>使用扩展名方式， 语法 *.xxxx , xxxx是自定义的扩展名。 常用的方式 *.do, *.action, *.mvc 等等，不能使用 *.jsp</p>
</li>
<li><p>使用斜杠 “&#x2F;“。当你的项目中使用了 &#x2F; ，它会替代 tomcat中的default。导致所有的静态资源都给DispatcherServlet处理， 默认情况下DispatcherServlet没有处理静态资源的能力。没有控制器对象能处理静态资源的访问。所以静态资源（html，js，图片，css）都是404。       动态资源some.do是可以访问，的因为我们程序中有MyController控制器对象，能处理some.do请求。</p>
</li>
</ol>
<h4 id="静态资源的访问"><a href="#静态资源的访问" class="headerlink" title="静态资源的访问"></a>静态资源的访问</h4><p>三种方式：</p>
<ol>
<li>使用&lt; mvc:default-servlet-handler &#x2F; &gt;</li>
<li>使用 &lt; mvc: resources &#x2F;&gt; 【掌握】</li>
<li>声明注解驱动</li>
</ol>
<p><strong>使用&lt; mvc:default-servlet-handler &#x2F; &gt;</strong></p>
<p>需要在springmvc配置文件加入 &lt; mvc:default-servlet-handler &gt;</p>
<p>原理是： 加入这个标签后，框架会创建控制器对象DefaultServletHttpRequestHandler（类似我们自己创建的MyController），DefaultServletHttpRequestHandler这个对象可以把接收的<strong>所有</strong>请求转发给 tomcat的default这个servlet，为了访问动态资源我们需要 加上 &lt; mvc:annotation-driven &#x2F; &gt; 来解决问题</p>
<p>直接加上这句话</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--SpringMVC.xml--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- default-servlet-handler 和 @RequestMapping注解 有冲突， 需要加入annotation-driven 解决问题--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>使用 &lt; mvc: resources &#x2F;&gt; 【掌握】</strong></p>
<p>mvc:resources 加入后框架会创建 ResourceHttpRequestHandler这个处理器对象。</p>
<p>让这个对象处理静态资源的访问，不依赖tomcat服务器。</p>
<p>mapping:访问静态资源的uri地址， 使用通配符 **</p>
<p>location：静态资源在你的项目中的目录位置。</p>
<p>images&#x2F;** : 表示 images&#x2F;p1.jpg , images&#x2F;user&#x2F;logo.gif , images&#x2F;order&#x2F;history&#x2F;list.png， **表示所有字符，可以表示文件、目录、多级目录等</p>
<p>mvc:resources和@RequestMapping有一定的冲突，所以要记得加上注解驱动</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--SpringMVC.xml--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	images, html, js 都是webapp的直接子目录，和WEB-INF同级 </span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/images/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/images/&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/html/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/html/&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/js/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/js/&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>使用一条语句解决多种静态资源的访问问题：</p>
<p>首先应该在webapp中新建一个static文件夹，然后将所有静态资源文件夹都放在static文件夹中。</p>
<p>webapp&#x2F;static&#x2F;html, webapp&#x2F;static&#x2F;js, webapp&#x2F;static&#x2F;images </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/static/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/static/&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br></pre></td></tr></table></figure>


<h2 id="SSM整合开发"><a href="#SSM整合开发" class="headerlink" title="SSM整合开发"></a>SSM整合开发</h2><h3 id="搭建环境"><a href="#搭建环境" class="headerlink" title="搭建环境"></a>搭建环境</h3><p>SSM： SpringMVC + Spring + MyBatis.</p>
<p>SpringMVC: 视图层，界面层，负责接收请求，显示处理结果的。</p>
<p>Spring：业务层，管理service，dao，工具类对象的。</p>
<p>MyBatis：持久层， 访问数据库的</p>
<p>用户发起请求–SpringMVC接收–Spring中的Service对象–MyBatis处理数据</p>
<p>SSM整合也叫做SSI (IBatis也就是mybatis的前身)， 整合中有容器。</p>
<ol>
<li>第一个容器SpringMVC容器， 管理Controller控制器对象的。</li>
<li>第二个容器Spring容器，管理Service，Dao，工具类对象的</li>
</ol>
<p>我们要做的把使用的对象交给合适的容器创建，管理。</p>
<p>把Controller还有web开发的相关对象交给springmvc容器，web用的对象写在springmvc配置文件中<br>service，dao对象定义在spring的配置文件中，让spring管理这些对象。</p>
<p>springmvc容器和spring容器是有关系的，关系已经确定好了。springmvc容器是spring容器的子容器， 类似java中的继承。子可以访问父的内容，在子容器中的Controller可以访问父容器中的Service对象， 就可以实现controller使用service对象</p>
<p><strong>实现步骤</strong></p>
<ol start="0">
<li><p>使用springdb的mysql库， 表使用student（id auto_increment, name, age）</p>
</li>
<li><p>新建maven web项目</p>
</li>
<li><p>加入依赖springmvc，spring，mybatis三个框架的依赖，jackson依赖，mysql驱动，druid连接池，jsp，servlet依赖</p>
</li>
<li><p>写web.xml，注册DispatcherServlet ,目的：</p>
</li>
<li><p>创建SpringMVC容器对象，才能创建Controller类对象。</p>
</li>
<li><p>创建的是Servlet，才能接受用户的请求。</p>
</li>
<li><p>注册spring的监听器：ContextLoaderListener,目的： 创建spring的容器对象，才能创建service，dao等对象。</p>
</li>
<li><p>注册字符集过滤器，解决post请求乱码的问题</p>
</li>
<li><p>创建包， Controller包， service ，dao，实体类包名创建好</p>
</li>
<li><p>写springmvc，spring，mybatis的配置文件</p>
<ol>
<li>springmvc配置文件</li>
<li>spring配置文件</li>
<li>mybatis主配置文件</li>
<li>数据库的属性配置文件</li>
</ol>
</li>
<li><p>写代码， dao接口和mapper文件， service和实现类，controller， 实体类。</p>
</li>
<li><p>写jsp页面</p>
</li>
</ol>
<p>配置 pom.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- jsp依赖 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1-b03<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span><span class="comment">&lt;!--所在的目录--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">includes</span>&gt;</span><span class="comment">&lt;!--包括目录下的.properties,.xml 文件都会扫描到--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>配置web.xml</p>
<h3 id="整合注解开发"><a href="#整合注解开发" class="headerlink" title="整合注解开发"></a>整合注解开发</h3><p>见文件 <code>Learning\JavaWeb\SpringMVC\3.SSM</code></p>
<h2 id="SpringMVC核心技术"><a href="#SpringMVC核心技术" class="headerlink" title="SpringMVC核心技术"></a>SpringMVC核心技术</h2><h3 id="请求转发和重定向"><a href="#请求转发和重定向" class="headerlink" title="请求转发和重定向"></a>请求转发和重定向</h3><p><a href="/img/image-20210113103410547.png" title="image-20210113103410547" class="gallery-item" style="box-shadow: none;"> <img src="/img/image-20210113103410547.png" alt="image-20210113103410547"></a></p>
<p>请求转发的使用情况：因为我们已经配置了视图解析器，所以在跳转的时候我们不能直接通过 setViewName的方式跳转到view目录以外的目录，为了能够跳转到view以外的目录，我们需要用到请求转发操作。</p>
<p>语法：<code>modelAndView.setViewName(&quot;forward:完整目录&quot;)</code></p>
<p>特点： 不和视图解析器一同使用，就当项目中没有视图解析器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/addOneByOne.do&quot;, method = RequestMethod.POST)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">addOneByOne</span><span class="params">(String name, <span class="type">int</span> age)</span>&#123;</span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;age&quot;</span>, age);</span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;forward:/WEB-INF/view/show.jsp&quot;</span>); <span class="comment">// 请求转发</span></span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>处理器方法返回ModelAndView,实现重定向redirect</p>
<p>语法：setViewName(“redirect:视图完整路径”)</p>
<p>redirect特点：不和视图解析器一同使用，就当项目中没有视图解析器</p>
<p>框架对重定向的操作：</p>
<ol>
<li>框架会把Model中的简单类型的数据，转为string使用，作为hello.jsp的get请求参数使用。目的是在 doRedirect.do 和 hello.jsp 两次请求之间传递数据</li>
<li>在目标hello.jsp页面可以使用参数集合对象 <code>$ &#123;param&#125;</code>获取请求参数值<code>  $&#123;param.myname&#125;</code></li>
<li>重定向不能访问&#x2F;WEB-INF资源</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/doRedirect.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">doWithRedirect</span><span class="params">(String name,Integer age)</span>&#123;</span><br><span class="line">    <span class="comment">//处理some.do请求了。 相当于service调用处理完成了。</span></span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">mv</span>  <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">    <span class="comment">//数据放入到 request作用域</span></span><br><span class="line">    mv.addObject(<span class="string">&quot;myname&quot;</span>,name);</span><br><span class="line">    mv.addObject(<span class="string">&quot;myage&quot;</span>,age);</span><br><span class="line">    <span class="comment">//重定向不能访问/WEB-INF资源</span></span><br><span class="line">    mv.setViewName(<span class="string">&quot;redirect:/WEB-INF/view/show.jsp&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> mv;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h3><p>代码见<code>Learning\JavaWeb\SpringMVC\4.Exception</code></p>
<p>springmvc框架采用的是统一，全局的异常处理。</p>
<p>把controller的所有异常处理都集中到一个地方。 采用的是aop的思想。把业务逻辑和异常处理代码分开。解耦合。</p>
<p>使用两个注解</p>
<ol>
<li><p>@ExceptionHandler</p>
</li>
<li><p>@ControllerAdvice</p>
</li>
</ol>
<p>异常处理步骤：</p>
<ol>
<li><p>新建maven web项目</p>
</li>
<li><p>加入依赖</p>
</li>
<li><p>新建一个自定义异常类 MyUserException , 重写前两个构造方法，即无参构造和String构造，再定义它的子类NameException , AgeException</p>
</li>
<li><p>在controller抛出NameException , AgeException</p>
</li>
<li><p>创建一个普通类，作用全局异常处理类 GlobalExceptionHandler</p>
<ol>
<li>在类的上面加入@ControllerAdvice（控制器增强 - 给控制器增加异常处理功能）特点：必须让框架知道这个注解所在的包名（第7步）</li>
<li>在类中定义方法，方法的上面加入@ExceptionHandler</li>
</ol>
</li>
<li><p>创建处理异常的视图页面</p>
</li>
<li><p>创建springmvc的配置文件</p>
<ol>
<li>组件扫描器 ，扫描@Controller注解</li>
<li>组件扫描器，扫描@ControllerAdvice所在的包名</li>
<li>声明注解驱动</li>
</ol>
</li>
</ol>
<p>关键点：把异常抛出给框架，让框架集中处理这些异常。</p>
<p>创建相关类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UserException.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserException</span> <span class="keyword">extends</span> <span class="title class_">Exception</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserException</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserException</span><span class="params">(String message)</span> &#123;  <span class="built_in">super</span>(message);  	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//AgeException.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AgeException</span> <span class="keyword">extends</span> <span class="title class_">UserException</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AgeException</span><span class="params">()</span> &#123;  <span class="built_in">super</span>();   &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AgeException</span><span class="params">(String message)</span> &#123;  <span class="built_in">super</span>(message);    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//NageException.java 略</span></span><br><span class="line"><span class="comment">// Controller</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/addObject&quot;, method = RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">addObj</span><span class="params">(Student student)</span> <span class="keyword">throws</span> UserException &#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        <span class="keyword">if</span>(student.getAge() &gt; <span class="number">100</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AgeException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!student.getName().equals(<span class="string">&quot;zs&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NameException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;name&quot;</span>, student.getName());</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;age&quot;</span>, student.getAge());</span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>全局异常处理类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    <span class="comment">//定义方法，处理发生的异常</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        处理异常的方法和控制器方法的定义一样， 可以有多个参数，可以有ModelAndView,</span></span><br><span class="line"><span class="comment">        String, void,对象类型的返回值</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        形参：Exception，表示Controller中抛出的异常对象。</span></span><br><span class="line"><span class="comment">        通过形参可以获取发生的异常信息。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        @ExceptionHandler(异常的class)：表示异常的类型，当发生此类型异常时，</span></span><br><span class="line"><span class="comment">        由当前方法处理</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(value = NameException.class)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">doNameException</span><span class="params">(Exception e)</span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">           异常发生处理逻辑：</span></span><br><span class="line"><span class="comment">           1.需要把异常记录下来， 记录到数据库，日志文件。记录日志发生的时间，哪个方法发生的，异常错误内容。</span></span><br><span class="line"><span class="comment">           2.发送通知，把异常的信息通过邮件，短信，微信发送给相关人员。</span></span><br><span class="line"><span class="comment">           3.给用户友好的提示。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;姓名必须是zs，其它用户不能访问&quot;</span>);</span><br><span class="line">        mv.addObject(<span class="string">&quot;e&quot;</span>, e);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;nameError&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@ExceptionHandler(value = AgeException.class)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">doAgeException</span><span class="params">(Exception e)</span>&#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;年龄太大了！！！&quot;</span>);</span><br><span class="line">        mv.addObject(<span class="string">&quot;e&quot;</span>, e);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;ageError&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@ExceptionHandler()</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">OtherException</span><span class="params">(Exception e)</span>&#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;其他异常&quot;</span>);</span><br><span class="line">        mv.addObject(<span class="string">&quot;e&quot;</span>, e);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;Others&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>错误视图略。</p>
<p>配置文件的配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--SpringMVC.xml--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.Jancoyan.Handler&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.Jancoyan.Controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h3><ol>
<li>拦截器是springmvc中的一种，需要实现HandlerInterceptor接口。</li>
<li>拦截器和过滤器类似，功能方向侧重点不同。 过滤器是用来过滤器请求参数，设置编码字符集等工作。拦截器是拦截用户的请求，做请求做判断处理的。</li>
<li>拦截器是全局的，可以对多个Controller做拦截。 一个项目中可以有0个或多个拦截器， 他们在一起拦截用户的请求。拦截器常用在：用户登录处理，权限检查， 记录日志。</li>
</ol>
<p>拦截器的使用步骤：</p>
<ol>
<li>定义类实现HandlerInterceptor接口</li>
<li>在springmvc配置文件中，声明拦截器， 让框架知道拦截器的存在。</li>
</ol>
<p><a href="/img/image-20210113155716488.png" title="image-20210113155716488" class="gallery-item" style="box-shadow: none;"> <img src="/img/image-20210113155716488.png" alt="image-20210113155716488"></a><br>实现接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 拦截器类，拦截用户的请求</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 预处理方法，最后一个参数是被拦截的控制器对象</span></span><br><span class="line">    <span class="comment">// 返回值 ：请求是否通过的拦截器，true表示通过，可以执行</span></span><br><span class="line">    <span class="comment">// 特点：在控制器方法之前执行的，用户的请求首先到达此方法</span></span><br><span class="line">    <span class="comment">// 在这个方法中可以获取请求的信息， 验证请求是否符合要求。可以验证用户是否登录， 验证用户是否有权限访问某个连接地址（url）。</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;拦截器的MyInterceptor的preHandle()&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">       postHandle:后处理方法。</span></span><br><span class="line"><span class="comment">       参数：</span></span><br><span class="line"><span class="comment">        Object handler：被拦截的处理器对象MyController</span></span><br><span class="line"><span class="comment">        ModelAndView mv:处理器方法的返回值</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        特点：</span></span><br><span class="line"><span class="comment">         1.在处理器方法之后执行的（MyController.doSome()）</span></span><br><span class="line"><span class="comment">         2.能够获取到处理器方法的返回值ModelAndView,可以修改ModelAndView中的数据和视图，可以影响到最后的执行结果。</span></span><br><span class="line"><span class="comment">         3.主要是对原来的执行结果做二次修正，</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">         ModelAndView mv = MyController.doSome();</span></span><br><span class="line"><span class="comment">         postHandle(request,response,handler,mv);</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;拦截器的MyInterceptor的postHandle()&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      afterCompletion:最后执行的方法</span></span><br><span class="line"><span class="comment">      参数</span></span><br><span class="line"><span class="comment">        Object handler:被拦截器的处理器对象</span></span><br><span class="line"><span class="comment">        Exception ex：程序中发生的异常</span></span><br><span class="line"><span class="comment">      特点:</span></span><br><span class="line"><span class="comment">       1.在请求处理完成后执行的。框架中规定是当你的视图处理完成后，对视图执行了forward。就认为请求处理完成。</span></span><br><span class="line"><span class="comment">       2.般做资源回收工作的， 程序请求过程中创建了一些对象，在这里可以删除，把占用的内存回收。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;拦截器的MyInterceptor的afterCompletion()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>修改配置文件：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--声明拦截器： 拦截器可以有0或多个--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--声明第一个拦截器--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--指定拦截的请求uri地址</span></span><br><span class="line"><span class="comment">            path：就是uri地址，可以使用通配符 **</span></span><br><span class="line"><span class="comment">                  ** ： 表示任意的字符，文件或者多级目录和目录中的文件</span></span><br><span class="line"><span class="comment">            http://localhost:8080/myweb/user/listUser.do</span></span><br><span class="line"><span class="comment">            http://localhost:8080/myweb/student/addStudent.do</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--声明拦截器对象--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.Jancoyan.Handler.MyInterceptor&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>拦截器的执行时间：</p>
<ol>
<li>在请求处理之前， 也就是controller类中的方法执行之前先被拦截。</li>
<li>在控制器方法执行之后也会执行拦截器。</li>
<li>在请求处理完成后也会执行拦截器。</li>
</ol>
<p>拦截器：看做是多个Controller中公用的功能，集中到拦截器统一处理。使用的AOP的思想</p>
<p>多个拦截器的执行顺序：</p>
<p><a href="/img/image-20210113155834039.png" title="image-20210113155834039" class="gallery-item" style="box-shadow: none;"> <img src="/img/image-20210113155834039.png" alt="image-20210113155834039"></a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">第一个拦截器preHandle=true , 第二个拦截器preHandle=true </span><br><span class="line"></span><br><span class="line">111111-拦截器的MyInterceptor的preHandle()</span><br><span class="line">22222-拦截器的MyInterceptor的preHandle()</span><br><span class="line">=====执行MyController中的doSome方法=====</span><br><span class="line">22222-拦截器的MyInterceptor的postHandle()</span><br><span class="line">111111-拦截器的MyInterceptor的postHandle()</span><br><span class="line">22222-拦截器的MyInterceptor的afterCompletion()</span><br><span class="line">111111-拦截器的MyInterceptor的afterCompletion()</span><br><span class="line"></span><br><span class="line">第一个拦截器preHandle=true , 第二个拦截器preHandle=false</span><br><span class="line"></span><br><span class="line">111111-拦截器的MyInterceptor的preHandle()</span><br><span class="line">22222-拦截器的MyInterceptor的preHandle()</span><br><span class="line">111111-拦截器的MyInterceptor的afterCompletion()</span><br><span class="line"></span><br><span class="line">第一个拦截器preHandle=false , 第二个拦截器preHandle=true|false</span><br><span class="line"></span><br><span class="line">111111-拦截器的MyInterceptor的preHandle()</span><br></pre></td></tr></table></figure>

<p><strong>拦截器和过滤器的区别</strong></p>
<p>1.过滤器是servlet中的对象，  拦截器是框架中的对象</p>
<p>2.过滤器实现Filter接口的对象， 拦截器是实现HandlerInterceptor</p>
<p>3.过滤器是用来设置request，response的参数，属性的，侧重对数据过滤的。  拦截器是用来验证请求的，能截断请求。</p>
<p>4.过滤器是在拦截器之前先执行的。</p>
<p>5.过滤器是tomcat服务器创建的对象, 拦截器是springmvc容器中创建的对象</p>
<p>6.过滤器是一个执行时间点。  拦截器有三个执行时间点</p>
<p>7.过滤器可以处理jsp，js，html等等,  拦截器是侧重拦截对Controller的对象。 如果你的请求不能被DispatcherServlet接收， 这个请求不会执行拦截器内容</p>
<p>8.拦截器拦截普通类方法执行，过滤器过滤servlet请求响应</p>
</div>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2021-01-11</span>
            
            
             
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                
                    <span>上一篇：<a href='/2021/01/26/Python-Spider/'>笔记 | Python爬虫</a></span>
                

                
                    <span class="post-footer-pre-next-last-span-right">下一篇：<a href="/2021/01/09/MyBatis/">笔记 | MyBatis</a>
                    </span>
                
            </div>
    
        
    

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
             

            
                

            
        </span>
       
    
</div>



<!--这是指一条线往下的内容-->
<div class="footer-last">
    
            <span>Change And Challenge</span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--目录-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--回到顶部按钮-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // 启用插件
            thumbnail: true,          // 显示缩略图
            zoom: true,               // 启用缩放功
            rotate: true,             // 启用旋转功能能
            autoplay: true,        // 启用自动播放功能
            fullScreen: true,      // 启用全屏功能
            pager: false, //页码,
            zoomFromOrigin: true,   // 从原始位置缩放
            actualSize: true,       // 启用查看实际大小的功能
            enableZoomAfter: 300,    // 延迟缩放，确保图片加载完成后可缩放
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // 修复选择器
    }
    
</script>


                </div>
            
            
                <!-- 回到顶部的按钮-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- 返回的按钮-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>