<!DOCTYPE html>
<html lang="en">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="ç¬”è®° | SpringMVC" />
    <meta name="hexo-theme-A4" content="v1.9.6" />
    <link rel="alternate icon" type="image/webp" href="/img/avatar.png">
    <title>Jingcun Yan</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--è¿”å›é¡¶éƒ¨css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--ç›®å½•-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery-bundle.min.css">


<meta name="generator" content="Hexo 7.3.0"></head>
    
    
        <style>
            .index-main{
                max-width:  880px;
            }
        </style>

    
    



    

    
    

    
    
    
    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        <script>
            const options = {
                bottom: '40px', // default: '32px'
                right: 'unset', // default: '32px'
                left: '42px', // default: 'unset'
                time: '0.3s', // default: '0.3s'
                mixColor: '#fff', // default: '#fff'
                backgroundColor: ' #e4e4e4 ',  // default: '#fff'
                buttonColorDark: '#100f2c',  // default: '#100f2c'
                buttonColorLight: '#fff', // default: '#fff'
                saveInCookies: true, // default: true,
                label: 'ğŸŒ“', // default: ''
                autoMatchOsTheme: true // default: true
            }
            const darkmode = new Darkmode(options);
            darkmode.showWidget();
        </script>
        
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/avatar.png" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">Jingcun Yan</a> 
            <span class="description"></span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">é¦–é¡µ</a></li>
            
        
            
                <li><a href="/list/">æ–‡ç« </a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    ç¬”è®° | SpringMVC
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                
                    
                     <span>å­—æ•°æ€»è®¡ï¼š7.9k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>é˜…è¯»ä¼°æ—¶ï¼š34åˆ†é’Ÿ</span>
                
                
            </div>
    

    <div class="post-md">
        
        <div class=".article-gallery"><h1 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h1><h2 id="SpringMVCæ¦‚è¿°"><a href="#SpringMVCæ¦‚è¿°" class="headerlink" title="SpringMVCæ¦‚è¿°"></a>SpringMVCæ¦‚è¿°</h2><p>SpringMVCï¼šæ˜¯åŸºäºspringçš„ä¸€ä¸ªæ¡†æ¶ï¼Œ å®é™…ä¸Šå°±æ˜¯springçš„ä¸€ä¸ªæ¨¡å—ï¼Œ ä¸“é—¨æ˜¯åšwebå¼€å‘çš„ã€‚æ˜¯servletçš„ä¸€ä¸ªå‡çº§</p>
<p>Webå¼€å‘åº•å±‚æ˜¯servlet ï¼Œ æ¡†æ¶æ˜¯åœ¨servletåŸºç¡€ä¸Šé¢åŠ å…¥ä¸€äº›åŠŸèƒ½ï¼Œè®©ä½ åšwebå¼€å‘æ–¹ä¾¿ã€‚</p>
<p>SpringMVCå°±æ˜¯ä¸€ä¸ªSpringã€‚ Springæ˜¯å®¹å™¨ï¼Œiocèƒ½å¤Ÿç®¡ç†å¯¹è±¡ï¼Œä½¿ç”¨&lt; bean &gt;, @Component, @Repository, @Service, @Controller</p>
<p>SpringMVCèƒ½å¤Ÿåˆ›å»ºå¯¹è±¡ï¼Œ æ”¾å…¥åˆ°å®¹å™¨ä¸­ï¼ˆSpringMVCå®¹å™¨ï¼‰ï¼Œ springmvcå®¹å™¨ä¸­æ”¾çš„æ˜¯æ§åˆ¶å™¨å¯¹è±¡ï¼Œ</p>
<p>æˆ‘ä»¬è¦åšçš„æ˜¯ ä½¿ç”¨@Contorlleråˆ›å»ºæ§åˆ¶å™¨å¯¹è±¡ï¼Œ æŠŠå¯¹è±¡æ”¾å…¥åˆ°springmvcå®¹å™¨ä¸­ï¼Œ æŠŠåˆ›å»ºçš„å¯¹è±¡ä½œä¸ºæ§åˆ¶å™¨ä½¿ç”¨ï¼Œ è¿™ä¸ªæ§åˆ¶å™¨å¯¹è±¡èƒ½æ¥æ”¶ç”¨æˆ·çš„è¯·æ±‚ï¼Œ æ˜¾ç¤ºå¤„ç†ç»“æœï¼Œå°±å½“åšæ˜¯ä¸€ä¸ªservletä½¿ç”¨ã€‚</p>
<p>ä½¿ç”¨@Controlleræ³¨è§£åˆ›å»ºçš„æ˜¯ä¸€ä¸ªæ™®é€šç±»çš„å¯¹è±¡ï¼Œ ä¸æ˜¯Servletã€‚ springmvcèµ‹äºˆäº†æ§åˆ¶å™¨å¯¹è±¡ä¸€äº›é¢å¤–çš„åŠŸèƒ½ã€‚</p>
<p>Webå¼€å‘åº•å±‚æ˜¯servletï¼Œ springmvcä¸­æœ‰ä¸€ä¸ªå¯¹è±¡æ˜¯Servlet ï¼š DispatherServlet(ä¸­å¤®è°ƒåº¦å™¨)</p>
<p>DispatherServlet: è´Ÿè´£æ¥æ”¶ç”¨æˆ·çš„æ‰€æœ‰è¯·æ±‚ï¼Œ ç”¨æˆ·æŠŠè¯·æ±‚ç»™äº†DispatherServletï¼Œ ä¹‹åDispatherServletæŠŠè¯·æ±‚è½¬å‘ç»™æˆ‘ä»¬çš„Controllerå¯¹è±¡ï¼Œ æœ€åæ˜¯Controllerå¯¹è±¡å¤„ç†è¯·æ±‚ã€‚</p>
<h3 id="ç¬¬ä¸€ä¸ªSpringMVCç¨‹åº"><a href="#ç¬¬ä¸€ä¸ªSpringMVCç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ªSpringMVCç¨‹åº"></a>ç¬¬ä¸€ä¸ªSpringMVCç¨‹åº</h3><p>éœ€æ±‚ï¼š ç”¨æˆ·åœ¨é¡µé¢å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œ è¯·æ±‚äº¤ç»™springmvcçš„æ§åˆ¶å™¨å¯¹è±¡ï¼Œå¹¶æ˜¾ç¤ºè¯·æ±‚çš„å¤„ç†ç»“æœï¼ˆåœ¨ç»“æœé¡µé¢æ˜¾ç¤ºä¸€ä¸ªæ¬¢è¿è¯­å¥ï¼‰ã€‚</p>
<p><strong>å®ç°æ­¥éª¤ï¼š</strong></p>
<ol>
<li><p>æ–°å»ºweb mavenå·¥ç¨‹</p>
</li>
<li><p>åŠ å…¥ä¾èµ–ï¼Œspring-webmvcä¾èµ–ï¼Œä¼šé—´æ¥æŠŠspringçš„ä¾èµ–éƒ½åŠ å…¥åˆ°é¡¹ç›®ï¼Œjspï¼Œservletä¾èµ–</p>
</li>
<li><p>é‡ç‚¹ï¼š åœ¨web.xmlä¸­æ³¨å†Œspringmvcæ¡†æ¶çš„æ ¸å¿ƒå¯¹è±¡DispatcherServletï¼ˆæ³¨æ„ï¼šåªè¦æ˜¯SpringMVCçš„é¡¹ç›®ï¼Œå°±å¿…é¡»æœ‰DispatcherServletå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯è¡¡é‡ç¨‹åºæ˜¯ä¸æ˜¯ç”¨äº†SpringMVCçš„æ ‡å‡†ï¼‰</p>
<ol>
<li>DispatcherServletå«åšä¸­å¤®è°ƒåº¦å™¨ï¼Œ æ˜¯ä¸€ä¸ªservletï¼Œ å®ƒçš„çˆ¶ç±»æ˜¯ç»§æ‰¿HttpServlet</li>
<li>DispatcherServleä¹Ÿå«åšå‰ç«¯æ§åˆ¶å™¨ï¼ˆfront controllerï¼‰</li>
<li>DispatcherServletè´Ÿè´£æ¥æ”¶ç”¨æˆ·æäº¤çš„è¯·æ±‚ï¼Œ è°ƒç”¨å…¶å®ƒçš„æ§åˆ¶å™¨å¯¹è±¡ï¼Œå¹¶æŠŠè¯·æ±‚çš„å¤„ç†ç»“æœæ˜¾ç¤ºç»™ç”¨æˆ·</li>
</ol>
</li>
<li><p>åˆ›å»ºä¸€ä¸ªå‘èµ·è¯·æ±‚çš„é¡µé¢ index.jsp</p>
</li>
<li><p>åˆ›å»ºæ§åˆ¶å™¨(å¤„ç†å™¨)ç±»</p>
<ol>
<li>åœ¨ç±»çš„ä¸Šé¢åŠ å…¥@Controlleræ³¨è§£ï¼Œåˆ›å»ºå¯¹è±¡ï¼Œå¹¶æ”¾å…¥åˆ°springmvcå®¹å™¨ä¸­</li>
<li>åœ¨ç±»ä¸­çš„æ–¹æ³•ä¸Šé¢åŠ å…¥@RequestMappingæ³¨è§£ã€‚</li>
</ol>
</li>
<li><p>åˆ›å»ºä¸€ä¸ªä½œä¸ºç»“æœçš„jspï¼Œæ˜¾ç¤ºè¯·æ±‚çš„å¤„ç†ç»“æœã€‚</p>
</li>
<li><p>åˆ›å»ºspringmvcçš„é…ç½®æ–‡ä»¶ï¼ˆspringçš„é…ç½®æ–‡ä»¶ä¸€æ ·ï¼‰</p>
<ol>
<li>å£°æ˜ç»„ä»¶æ‰«æå™¨ï¼Œ æŒ‡å®š@Contorlleræ³¨è§£æ‰€åœ¨çš„åŒ…å</li>
<li>å£°æ˜è§†å›¾è§£æå™¨ã€‚å¸®åŠ©å¤„ç†è§†å›¾çš„ã€‚</li>
</ol>
</li>
</ol>
<p>åŠ å…¥ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pom.xml--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ›´æ”¹webç‰ˆæœ¬ä¸º4.0</p>
<p><a href="/img/image-20210111103339072.png" title="image-20210111103339072" class="gallery-item" style="box-shadow: none;"> <img src="/img/image-20210111103339072.png" alt="image-20210111103339072"></a></p>
<p>æ³¨å†Œä¸­å¤®è°ƒåº¦å™¨DispatcherServltï¼Œéœ€è¦åœ¨tomcatæœåŠ¡å™¨å¯åŠ¨åï¼Œåˆ›å»ºDispatcherServletå¯¹è±¡çš„å®ä¾‹ã€‚</p>
<p>â€‹    ä¸ºä»€ä¹ˆè¦åˆ›å»ºDispatcherServletå¯¹è±¡çš„å®ä¾‹å‘¢ï¼Ÿ    å› ä¸ºDispatcherServletåœ¨ä»–çš„åˆ›å»ºè¿‡ç¨‹ä¸­ï¼Œ ä¼šåŒæ—¶åˆ›å»ºspringmvcå®¹å™¨å¯¹è±¡ï¼Œ    è¯»å–springmvcçš„é…ç½®æ–‡ä»¶ï¼ŒæŠŠè¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­çš„å¯¹è±¡éƒ½åˆ›å»ºå¥½ï¼Œ å½“ç”¨æˆ·å‘èµ·è¯·æ±‚æ—¶å°±å¯ä»¥ç›´æ¥ä½¿ç”¨å¯¹è±¡äº†ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--web.xml--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--è‡ªå®šä¹‰springmvcè¯»å–çš„é…ç½®æ–‡ä»¶çš„ä½ç½®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">             <span class="comment">&lt;!--springmvcçš„é…ç½®æ–‡ä»¶çš„ä½ç½®çš„å±æ€§--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--æŒ‡å®šè‡ªå®šä¹‰æ–‡ä»¶çš„ä½ç½®, å†™åœ¨ main/resources ç›®å½•ä¸­--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:SpringMVC.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            load-on-startup:è¡¨ç¤ºtomcatå¯åŠ¨ååˆ›å»ºå¯¹è±¡çš„é¡ºåºã€‚å®ƒçš„å€¼æ˜¯æ•´æ•°ï¼Œæ•°å€¼è¶Šå°ï¼Œtomcatåˆ›å»ºå¯¹è±¡çš„æ—¶é—´è¶Šæ—©ã€‚ å¤§äºç­‰äº0çš„æ•´æ•°ã€‚</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        ä½¿ç”¨æ¡†æ¶çš„æ—¶å€™ï¼Œ url-patternå¯ä»¥ä½¿ç”¨ä¸¤ç§å€¼</span></span><br><span class="line"><span class="comment">        1. ä½¿ç”¨æ‰©å±•åæ–¹å¼ï¼Œ è¯­æ³• *.xxxx , xxxxæ˜¯è‡ªå®šä¹‰çš„æ‰©å±•åã€‚ å¸¸ç”¨çš„æ–¹å¼ *.do, *.action, *.mvcç­‰ç­‰</span></span><br><span class="line"><span class="comment">           ä¸èƒ½ä½¿ç”¨ *.jsp</span></span><br><span class="line"><span class="comment">           http://localhost:8080/myweb/some.do</span></span><br><span class="line"><span class="comment">        2.ä½¿ç”¨æ–œæ  &quot;/&quot;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>SpringMVCé…ç½®æ–‡ä»¶ <code>SpringMVC.xml</code> , æ³¨å†Œç»„ä»¶æ‰«æå™¨</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.Jancoyan.*&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºå‘èµ·è¯·æ±‚çš„é¡µé¢ index.jsp</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;ç¬¬ä¸€ä¸ªspring MVCé¡¹ç›®&lt;/p&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;some.do&quot;</span>&gt;å‘èµ·some.<span class="keyword">do</span>è¯·æ±‚&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºå¤„ç†å™¨ï¼ˆæ§åˆ¶å™¨ï¼‰ç±»ï¼ˆè¿™æ ·çš„ç±»å¯ä»¥æœ‰å¾ˆå¤šä¸ªï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com.Jancoyan.Controller.MyController</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†ç”¨æˆ·æäº¤çš„è¯·æ±‚ï¼Œä½¿ç”¨è‡ªå®šä¹‰æ–¹æ³•æ¥å¤„ç†è¯·æ±‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‡†å¤‡ä½¿ç”¨doSomeæ–¹æ³•å¤„ç†some.doè¯·æ±‚ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@RequestMapping</span>: è¯·æ±‚æ˜ å°„ï¼Œä½œç”¨æ˜¯æŠŠä¸€ä¸ªè¯·æ±‚åœ°å€å’Œä¸€ä¸ªæ–¹æ³•ç»‘å®šåœ¨ä¸€èµ·, ä¸€ä¸ªè¯·æ±‚æŒ‡å®šä¸€ä¸ªæ–¹æ³•å¤„ç†ã€‚</span></span><br><span class="line"><span class="comment">     *  å±æ€§ï¼š 1. value æ˜¯ä¸€ä¸ªStringï¼Œè¡¨ç¤ºè¯·æ±‚çš„uriåœ°å€çš„ï¼ˆsome.doï¼‰, valueçš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œ ä¸èƒ½é‡å¤ã€‚ åœ¨ä½¿ç”¨æ—¶ï¼Œæ¨èåœ°å€ä»¥â€œ/â€å¼€å¤´</span></span><br><span class="line"><span class="comment">     *  ä½ç½®ï¼š1.åœ¨æ–¹æ³•çš„ä¸Šé¢ï¼Œå¸¸ç”¨çš„ã€‚2.åœ¨ç±»çš„ä¸Šé¢</span></span><br><span class="line"><span class="comment">     *  è¯´æ˜ï¼š ä½¿ç”¨RequestMappingä¿®é¥°çš„æ–¹æ³•å«åšå¤„ç†å™¨æ–¹æ³•æˆ–è€…æ§åˆ¶å™¨æ–¹æ³•ã€‚ä½¿ç”¨<span class="doctag">@RequestMapping</span>ä¿®é¥°çš„æ–¹æ³•å¯ä»¥å¤„ç†è¯·æ±‚çš„ï¼Œç±»ä¼¼Servletä¸­çš„doGet, doPost</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *  è¿”å›å€¼ï¼šModelAndView è¡¨ç¤ºæœ¬æ¬¡è¯·æ±‚çš„å¤„ç†ç»“æœ</span></span><br><span class="line"><span class="comment">     *   Model: æ•°æ®ï¼Œè¯·æ±‚å¤„ç†å®Œæˆåï¼Œè¦æ˜¾ç¤ºç»™ç”¨æˆ·çš„æ•°æ®</span></span><br><span class="line"><span class="comment">     *   View: è§†å›¾ï¼Œ æ¯”å¦‚jspç­‰ç­‰ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/some.do&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">doSome</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// å¤„ç†some.do ç›¸å½“äºserviceè°ƒç”¨å¤„ç†å®Œæˆäº†</span></span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        <span class="comment">// æ·»åŠ æ•°æ®, æ¡†æ¶æœ€åæŠŠä»–æ”¾åœ¨requestä½œç”¨åŸŸï¼ˆsetAttributeï¼‰</span></span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;msg1&quot;</span>, <span class="string">&quot;hello,SpringMVC&quot;</span>);</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;msg2&quot;</span>, <span class="string">&quot;welcome&quot;</span>);</span><br><span class="line">        <span class="comment">// æŒ‡å®šè§†å›¾çš„å®Œæ•´è·¯å¾„, æ¡†æ¶ä¼šå¯¹è§†å›¾è¿›è¡Œforwardå¤„ç† request.getRequestDispatcher(&quot;/show.jsp&quot;).forward()</span></span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;/show.jsp&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="è¯·æ±‚å¤„ç†æµç¨‹"><a href="#è¯·æ±‚å¤„ç†æµç¨‹" class="headerlink" title="è¯·æ±‚å¤„ç†æµç¨‹"></a>è¯·æ±‚å¤„ç†æµç¨‹</h3><ol>
<li>å‘èµ·some.do</li>
<li>tomcat(web.xmlâ€“url-patternçŸ¥é“ *.doçš„è¯·æ±‚ç»™DispatcherServlet)</li>
<li>DispatcherServletï¼ˆæ ¹æ®springmvc.xmlé…ç½®çŸ¥é“ some.doâ€”doSome()ï¼‰</li>
<li>DispatcherServletæŠŠsome.doè½¬å‘ç»™MyController.doSome()æ–¹æ³•</li>
<li>æ¡†æ¶æ‰§è¡ŒdoSomeï¼ˆï¼‰æŠŠå¾—åˆ°ModelAndViewè¿›è¡Œå¤„ç†ï¼Œ è½¬å‘åˆ°show.jsp</li>
</ol>
<p>ä¸Šé¢çš„è¿‡ç¨‹ç®€åŒ–çš„æ–¹å¼  some.doâ€”DispatcherServletâ€”MyController</p>
<p><a href="/img/image-20210112095419640.png" title="image-20210112095419640" class="gallery-item" style="box-shadow: none;"> <img src="/img/image-20210112095419640.png" alt="image-20210112095419640"></a></p>
<p>ç”¨æˆ·å¯ä»¥ç›´æ¥é€šè¿‡åœ¨åœ°å€æ æ•²å…¥show.jspç›´æ¥æ˜¾ç¤ºé¡µé¢ï¼Œä½†æ˜¯è¿™æ—¶å€™é¡µé¢ä¸­å¹¶æ²¡æœ‰è·å–åˆ°æ•°æ®ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦éšè—æ˜¾ç¤ºç»“æœçš„è§†å›¾ï¼Œä¹Ÿå°±æ˜¯å°†show.jspæ”¾å…¥ <code>webapp/WEB-INF/view</code> ä¸‹é¢è¾¾åˆ°éšè—æ•ˆæœï¼Œä½†æ˜¯æ­¤æ—¶åœ¨æ§åˆ¶å™¨ä¸­è½¬å‘çš„æ—¶å€™è¦å†™å®Œæ•´çš„è·¯å¾„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨springmvcé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®<strong>è§†å›¾è§£æå™¨</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--SpringMVC.xml--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        å‰ç¼€:è§†å›¾æ–‡ä»¶çš„è·¯å¾„--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/view/&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        å‰ç¼€:è§†å›¾æ–‡ä»¶çš„æ‰©å±•å--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å½“é…ç½®å®Œè§†å›¾è§£æå™¨ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨é€»è¾‘åç§°ï¼ˆæ–‡ä»¶åï¼‰ï¼ŒæŒ‡å®šè§†å›¾ï¼Œæ¡†æ¶ä¼šä½¿ç”¨è§†å›¾è§£æå™¨çš„å‰ç¼€ + é€»è¾‘åç§° + åç¼€ ç»„æˆå®Œæˆè·¯å¾„ï¼Œ è¿™é‡Œå°±æ˜¯å­—ç¬¦è¿æ¥æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">modelAndView.setViewName(<span class="string">&quot;show&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>è‡³æ­¤ï¼Œç¬¬ä¸€ä¸ªé¡¹ç›®å·²ç»ç»“æŸï¼Œå…·ä½“æºä»£ç å‚è€ƒ <code>GITHUB\Learning\JavaWeb\SpringMVC\1.FirstApplication</code></p>
<h3 id="SpringMVCæ‰§è¡Œæµç¨‹"><a href="#SpringMVCæ‰§è¡Œæµç¨‹" class="headerlink" title="SpringMVCæ‰§è¡Œæµç¨‹"></a>SpringMVCæ‰§è¡Œæµç¨‹</h3><p><a href="/img/image-20210113162949692.png" title="image-20210113162949692" class="gallery-item" style="box-shadow: none;"> <img src="/img/image-20210113162949692.png" alt="image-20210113162949692"></a></p>
<ol>
<li>æµè§ˆå™¨æäº¤è¯·æ±‚åˆ°ä¸­å¤®è°ƒåº¦å™¨</li>
<li>ä¸­å¤®è°ƒåº¦å™¨ç›´æ¥å°†è¯·æ±‚è½¬ç»™å¤„ç†å™¨æ˜ å°„å™¨ã€‚</li>
<li>å¤„ç†å™¨æ˜ å°„å™¨ä¼šæ ¹æ®è¯·æ±‚ï¼Œæ‰¾åˆ°å¤„ç†è¯¥è¯·æ±‚çš„å¤„ç†å™¨ï¼Œå¹¶å°†å…¶å°è£…ä¸ºå¤„ç†å™¨æ‰§è¡Œé“¾åè¿”å›ç»™ä¸­å¤®è°ƒåº¦å™¨ã€‚</li>
<li>ä¸­å¤®è°ƒåº¦å™¨æ ¹æ®å¤„ç†å™¨æ‰§è¡Œé“¾ä¸­çš„å¤„ç†å™¨ï¼Œæ‰¾åˆ°èƒ½å¤Ÿæ‰§è¡Œè¯¥å¤„ç†å™¨çš„å¤„ç†å™¨é€‚é…å™¨ã€‚</li>
<li>å¤„ç†å™¨é€‚é…å™¨è°ƒç”¨æ‰§è¡Œå¤„ç†å™¨ã€‚</li>
<li>å¤„ç†å™¨å°†å¤„ç†ç»“æœåŠè¦è·³è½¬çš„è§†å›¾å°è£…åˆ°ä¸€ä¸ªå¯¹è±¡ ModelAndView ä¸­ï¼Œå¹¶å°†å…¶è¿”å›ç»™å¤„ç†å™¨é€‚é…å™¨ã€‚</li>
<li>å¤„ç†å™¨é€‚é…å™¨ç›´æ¥å°†ç»“æœè¿”å›ç»™ä¸­å¤®è°ƒåº¦å™¨ã€‚</li>
<li>ä¸­å¤®è°ƒåº¦å™¨è°ƒç”¨è§†å›¾è§£æå™¨ï¼Œå°† ModelAndView ä¸­çš„è§†å›¾åç§°å°è£…ä¸ºè§†å›¾å¯¹è±¡ã€‚</li>
<li>è§†å›¾è§£æå™¨å°†å°è£…äº†çš„è§†å›¾å¯¹è±¡è¿”å›ç»™ä¸­å¤®è°ƒåº¦å™¨</li>
<li>ä¸­å¤®è°ƒåº¦å™¨è°ƒç”¨è§†å›¾å¯¹è±¡ï¼Œè®©å…¶è‡ªå·±è¿›è¡Œæ¸²æŸ“ï¼Œå³è¿›è¡Œæ•°æ®å¡«å……ï¼Œå½¢æˆå“åº”å¯¹è±¡ã€‚</li>
<li>ä¸­å¤®è°ƒåº¦å™¨å“åº”æµè§ˆå™¨ã€‚</li>
</ol>
<h2 id="SpringMVCæ³¨è§£å¼å¼€å‘"><a href="#SpringMVCæ³¨è§£å¼å¼€å‘" class="headerlink" title="SpringMVCæ³¨è§£å¼å¼€å‘"></a>SpringMVCæ³¨è§£å¼å¼€å‘</h2><h3 id="RequestMapping-å®šä¹‰è¯·æ±‚è§„åˆ™"><a href="#RequestMapping-å®šä¹‰è¯·æ±‚è§„åˆ™" class="headerlink" title="@ RequestMapping å®šä¹‰è¯·æ±‚è§„åˆ™"></a>@ RequestMapping å®šä¹‰è¯·æ±‚è§„åˆ™</h3><p>@ RequestMapping æ”¾åœ¨ç±»çš„ä¸Šé¢ï¼Œè¡¨ç¤ºè¯¥æ§åˆ¶å™¨ç±»ä¸­æ‰€æœ‰çš„RequestMappingå‰é¢éƒ½ä¼šåŠ ä¸Šç±»ä¸Šé¢RequestMappingæ‹¬å·ä¸­çš„å†…å®¹ï¼Œæˆ‘ä»¬é€šå¸¸æ ¹æ®è¿™ä¸ªæ¥åˆ’åˆ†ä¸åŒçš„æ§åˆ¶å™¨çš„åŠŸèƒ½ï¼Œä»¥åŠè¿›è¡Œæ¨¡å—çš„è¿ç§»ã€‚åªéœ€è¦æ”¹åŠ¨æ§åˆ¶å™¨ç±»ä¸Šé¢çš„requestMappingï¼Œå°±å¯ä»¥å®ç°æ¨¡å—çš„è¿ç§»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.xml</span></span><br><span class="line">&lt;a href=<span class="string">&quot;user/some.do&quot;</span>&gt; è°ƒç”¨userçš„doSome &lt;/a&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MyController.java</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/some.do&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">doSome</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>æŒ‡å®šmethodè¯·æ±‚æ–¹å¼</p>
<p>å¦‚æœå‰åç«¯çš„è¯·æ±‚æ–¹å¼ä¸åŒï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‡å®šè¯·æ±‚æ–¹å¼ä¸º POSTï¼Œä½¿ç”¨RequestMethodä¸­çš„æšä¸¾ç±»å‹</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/some.do&quot;, method = RequestMethod.POST)</span> <span class="comment">// åœ¨è¿™é‡Œå†™</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">doSome</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="å¤„ç†å™¨æ–¹æ³•çš„å‚æ•°"><a href="#å¤„ç†å™¨æ–¹æ³•çš„å‚æ•°" class="headerlink" title="å¤„ç†å™¨æ–¹æ³•çš„å‚æ•°"></a>å¤„ç†å™¨æ–¹æ³•çš„å‚æ•°</h3><p>å¤„ç†å™¨æ–¹æ³•å¯ä»¥åŒ…å«ä»¥ä¸‹å››ç±»å‚æ•°ï¼Œè¿™äº›å‚æ•°ä¼šåœ¨ç³»ç»Ÿè°ƒç”¨æ—¶ç”±<strong>ç³»ç»Ÿè‡ªåŠ¨èµ‹å€¼</strong>ï¼Œå³æˆ‘ä»¬å¯åœ¨æ–¹æ³•å†…ç›´æ¥ä½¿ç”¨ã€‚ å†™åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚åˆ—è¡¨çš„ä½ç½®ã€‚</p>
<ul>
<li>HttpServletRequest</li>
<li>HttpServletResponse</li>
<li>HttpSession</li>
<li>è¯·æ±‚ä¸­æ‰€æºå¸¦çš„è¯·æ±‚å‚æ•°</li>
</ul>
<p>å‰ä¸‰ç§åœ¨è°ƒç”¨çš„æ—¶å€™ç³»ç»Ÿè‡ªåŠ¨èµ‹å€¼ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨æ§åˆ¶å™¨æ–¹æ³•ä¸­ç›´æ¥èµ‹å€¼å³å¯ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/some.do&quot;, method = RequestMethod.POST)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">doSome</span><span class="params">(HttpServletRequest request, HttpServletResponse response, HttpSession session)</span>&#123;</span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">    <span class="comment">// ç›´æ¥ä½¿ç”¨å³å¯</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¬¬å››ç§æœ‰ä¸¤ç§æ–¹æ³•</p>
<ul>
<li>é€ä¸ªæ¥æ”¶å‚æ•°</li>
<li>å¯¹è±¡æ¥å—å‚æ•°</li>
</ul>
<p>æ³¨æ„ï¼šåœ¨æäº¤è¯·æ±‚å‚æ•°æ—¶ï¼Œgetè¯·æ±‚æ–¹å¼ä¸­æ–‡æ²¡æœ‰ä¹±ç ã€‚ ä½¿ç”¨postæ–¹å¼æäº¤è¯·æ±‚ï¼Œä¸­æ–‡æœ‰ä¹±ç ï¼Œéœ€è¦ä½¿ç”¨è¿‡æ»¤å™¨å¤„ç†ä¹±ç çš„é—®é¢˜ã€‚è¿‡æ»¤å™¨å¯ä»¥è‡ªå®šä¹‰ï¼Œä¹Ÿå¯ä½¿ç”¨æ¡†æ¶ä¸­æä¾›çš„è¿‡æ»¤å™¨ CharacterEncodingFilter</p>
<p><strong>é€ä¸ªæ¥æ”¶å‚æ•°</strong></p>
<p>é€ä¸ªæ¥å—å‚æ•°çš„æ—¶å€™ï¼Œå¤„ç†å™¨ï¼ˆæ§åˆ¶å™¨ï¼‰æ–¹æ³•çš„å½¢å‚åå’Œè¯·æ±‚ä¸­å‚æ•°åå¿…é¡»ä¸€è‡´ã€‚åŒåçš„è¯·æ±‚å‚æ•°èµ‹å€¼ç»™åŒåçš„å½¢å‚, å¯¹ä½ç½®æ²¡æœ‰è¦æ±‚ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.jsp</span></span><br><span class="line">    &lt;form action=<span class="string">&quot;user/addOneByOne.do&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        å¢åŠ åŠŸèƒ½çš„å®ç°ï¼š &lt;br&gt;</span><br><span class="line">        name : &lt;input name=<span class="string">&quot;name&quot;</span> type=<span class="string">&quot;text&quot;</span>&gt; &lt;br&gt;</span><br><span class="line">        age : &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;age&quot;</span>&gt; &lt;br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;é€ä¸ªæ¥æ”¶addOneByOne.do&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"><span class="comment">// MyController.java</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/addOneByOne.do&quot;, method = RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">addOneByOne</span><span class="params">(String name, <span class="type">int</span> age)</span>&#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;age&quot;</span>, age);</span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// show.jsp</span></span><br><span class="line">    &lt;h3&gt;è·å–åˆ°çš„nameä¸º ï¼š $&#123;name&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;h3&gt;è·å–åˆ°çš„ageä¸º ï¼š $&#123;age&#125;&lt;/h3&gt;</span><br></pre></td></tr></table></figure>

<p>åŸç†è§£æï¼š</p>
<p>æ¡†æ¶æ¥æ”¶è¯·æ±‚å‚æ•°ï¼Œä½¿ç”¨requestå¯¹è±¡æ¥æ”¶è¯·æ±‚å‚æ•°çš„æ—¶å€™ï¼Œæ¡†æ¶ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹å†…å®¹ï¼š</p>
<p><code>String strName = request.getParameter(&quot;name&quot;);</code><br><code>String strAge = request.getParameter(&quot;age&quot;);</code></p>
<p>springmvcæ¡†æ¶é€šè¿‡ DispatcherServlet è°ƒç”¨ MyControllerçš„doSome()æ–¹æ³•è°ƒç”¨æ–¹æ³•æ—¶ï¼ŒæŒ‰åç§°å¯¹åº”ï¼ŒæŠŠæ¥æ”¶çš„å‚æ•°èµ‹å€¼ç»™å½¢å‚ : doSomeï¼ˆstrNameï¼ŒInteger.valueOf(strAge)ï¼‰æ¡†æ¶ä¼šæä¾›ç±»å‹è½¬æ¢çš„åŠŸèƒ½ï¼Œèƒ½æŠŠStringè½¬ä¸º int ï¼Œlong ï¼Œ floatï¼Œ doubleç­‰ç±»å‹ã€‚</p>
<p>ä½†æ˜¯å½“æˆ‘ä»¬åœ¨å‰ç«¯ä¼ å…¥age&#x3D;â€œâ€ å¹´é¾„ä¸ºç©ºçš„æ—¶å€™ï¼Œä¼šå‡ºç°400é”™è¯¯ï¼Œ400çŠ¶æ€ç æ˜¯å®¢æˆ·ç«¯é”™è¯¯ï¼Œ è¡¨ç¤ºæäº¤è¯·æ±‚å‚æ•°è¿‡ç¨‹ä¸­ï¼Œå‘ç”Ÿäº†é—®é¢˜ã€‚</p>
<p>å› ä¸º Integer.valueOf(strAge) ä¼ å…¥ä¸€ä¸ªç©ºçš„æ—¶å€™ï¼Œä¼šå‡ºç°é”™è¯¯ã€‚</p>
<p>è¿™ä¸ªå¯ä»¥JavaScriptè¿›è¡Œå‰ç«¯æ ¡éªŒ</p>
<hr>
<p>æ³¨æ„ï¼šç”¨getæ–¹æ³•è¿›è¡Œæäº¤çš„æ—¶å€™ä¸ä¼šå‡ºç°ä¹±ç é”™è¯¯ï¼Œä½†æ˜¯postæ–¹æ³•ä¼šå‡ºç°ä¸­æ–‡ä¹±ç ï¼Œè¿™æ—¶å€™åº”è¯¥ä½¿ç”¨è¿‡æ»¤å™¨ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    æ³¨å†Œå£°æ˜è¿‡æ»¤å™¨ï¼Œè§£å†³postä¹±ç é—®é¢˜--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        è®¾ç½®é¡¹ç›®ä¸­ä½¿ç”¨çš„å­—ç¬¦ç¼–ç --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--         å¼ºåˆ¶è¯·æ±‚å¯¹è±¡(HttpServletRequest)ä½¿ç”¨encodingç¼–ç çš„å€¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceRequestEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        å¼ºåˆ¶åº”ç­”å¯¹è±¡(HttpServletResponse)ä½¿ç”¨encodingç¼–ç çš„å€¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceResponseEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    /*:è¡¨ç¤ºå¼ºåˆ¶æ‰€æœ‰çš„è¯·æ±‚å…ˆé€šè¿‡è¿‡æ»¤å™¨å¤„ç†ã€‚--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<p><strong>æ ¡æ­£è¯·æ±‚å‚æ•°å@RequestParam</strong></p>
<p>å‰ç«¯çš„snameèµ‹å€¼ç»™å½¢å‚nameï¼›sageèµ‹å€¼ç»™å½¢å‚age</p>
<p>@RequestParam: é€ä¸ªæ¥æ”¶è¯·æ±‚å‚æ•°ä¸­ï¼Œ è§£å†³è¯·æ±‚ä¸­å‚æ•°åå½¢å‚åä¸ä¸€æ ·çš„é—®é¢˜</p>
<p>å±æ€§ï¼š</p>
<ol>
<li>value è¯·æ±‚ä¸­çš„å‚æ•°åç§°</li>
<li>required æ˜¯ä¸€ä¸ªbooleanï¼Œé»˜è®¤æ˜¯true, trueï¼šè¡¨ç¤ºè¯·æ±‚ä¸­å¿…é¡»åŒ…å«æ­¤å‚æ•°ã€‚</li>
</ol>
<p>ä½ç½®ï¼š åœ¨å¤„ç†å™¨æ–¹æ³•çš„å½¢å‚å®šä¹‰çš„å‰é¢</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/modifyParas.do&quot;, method = RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">modifyParas</span><span class="params">(<span class="meta">@RequestParam(value = &quot;sname&quot;, required = true)</span> String name, <span class="meta">@RequestParam(value = &quot;sage&quot;, required = true)</span> <span class="type">int</span> age)</span>&#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;age&quot;</span>, age);</span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>å¯¹è±¡æ¥æ”¶å‚æ•°</strong></p>
<p>å…ˆè°ƒç”¨æ— å‚æ„é€ ï¼Œå†ç”¨setæ–¹æ³•èµ‹å€¼</p>
<p>å¯ä»¥æœ‰å¤šä¸ªå½¢å‚å¯¹è±¡ï¼Œä»–ä»¬äº’ä¸å¹²æ‰°ï¼Œå¯¹è±¡ä¼šåˆ†åˆ«åˆ›å»ºç„¶åèµ‹å€¼ã€‚</p>
<p>@RequestParam ä¸èƒ½åœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨ã€‚</p>
<p> å¤„ç†å™¨æ–¹æ³•å½¢å‚æ˜¯javaå¯¹è±¡ï¼Œ è¿™ä¸ªå¯¹è±¡çš„å±æ€§åå’Œè¯·æ±‚ä¸­å‚æ•°åä¸€æ ·çš„,æ¡†æ¶ä¼šåˆ›å»ºå½¢å‚çš„javaå¯¹è±¡ï¼Œ ç»™å±æ€§èµ‹å€¼ã€‚ è¯·æ±‚ä¸­çš„å‚æ•°æ˜¯nameï¼Œæ¡†æ¶ä¼šè°ƒç”¨setName()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/addObject&quot;, method = RequestMethod.POST)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">addObj</span><span class="params">(Student student)</span>&#123;</span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;name&quot;</span>, student.getName());</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;age&quot;</span>, student.getAge());</span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æºç ï¼š<code>GITHUB\Learning\JavaWeb\SpringMVC\2.Parameters</code></p>
<h3 id="å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼"><a href="#å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼" class="headerlink" title="å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼"></a>å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼</h3><p>p23 â€“ 32 å­¦å®Œajax + jquery å†æ¥çœ‹</p>
<h3 id="è§£è¯»-url-pattern"><a href="#è§£è¯»-url-pattern" class="headerlink" title="è§£è¯» &lt; url-pattern &#x2F;&gt;"></a>è§£è¯» &lt; url-pattern &#x2F;&gt;</h3><p>ç”¨æˆ·å‘èµ·çš„è¯·æ±‚æ˜¯ç”±å“ªäº›æœåŠ¡å™¨ç¨‹åºå¤„ç†çš„ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8080/ch05_url_pattern/index.jsp ï¼štomcatï¼ˆjspä¼šè½¬ä¸ºservletï¼‰</span><br><span class="line">http://localhost:8080/ch05_url_pattern/js/jquery-3.4.1.js ï¼š tomcat</span><br><span class="line">http://localhost:8080/ch05_url_pattern/images/p1.jpg ï¼š tomcat</span><br><span class="line">http://localhost:8080/ch05_url_pattern/html/test.htmlï¼š tomcat</span><br><span class="line">http://localhost:8080/ch05_url_pattern/some.do ï¼š  DispatcherServletï¼ˆspringmvcæ¡†æ¶å¤„ç†çš„ï¼‰</span><br></pre></td></tr></table></figure>

<p>å› æ­¤ï¼Œtomcatæœ¬èº«èƒ½å¤„ç†é™æ€èµ„æºçš„è®¿é—®ï¼Œ åƒhtmlï¼Œ å›¾ç‰‡ï¼Œ jsæ–‡ä»¶éƒ½æ˜¯é™æ€èµ„æº</p>
<p>åŸå› ï¼štomcatçš„web.xmlæ–‡ä»¶æœ‰ä¸€ä¸ªservlet åç§°æ˜¯ default ï¼Œ åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶åˆ›å»ºçš„ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--tomcat/conf/web.xml--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>default<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.apache.catalina.servlets.DefaultServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>debug<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>0<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>listings<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>default<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>  è¡¨ç¤ºé™æ€èµ„æºå’Œæœªæ˜ å°„çš„è¯·æ±‚éƒ½è¿™ä¸ªdefaultå¤„ç†</span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>defaultè¿™ä¸ªservletä½œç”¨ï¼š </p>
<ol>
<li>å¤„ç†é™æ€èµ„æº</li>
<li>å¤„ç†æœªæ˜ å°„åˆ°å…¶å®ƒservletçš„è¯·æ±‚ã€‚</li>
</ol>
<p>ä½¿ç”¨æ¡†æ¶çš„æ—¶å€™ï¼Œ url-patternå¯ä»¥ä½¿ç”¨ä¸¤ç§å€¼</p>
<ol>
<li><p>ä½¿ç”¨æ‰©å±•åæ–¹å¼ï¼Œ è¯­æ³• *.xxxx , xxxxæ˜¯è‡ªå®šä¹‰çš„æ‰©å±•åã€‚ å¸¸ç”¨çš„æ–¹å¼ *.do, *.action, *.mvc ç­‰ç­‰ï¼Œä¸èƒ½ä½¿ç”¨ *.jsp</p>
</li>
<li><p>ä½¿ç”¨æ–œæ  â€œ&#x2F;â€œã€‚å½“ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨äº† &#x2F; ï¼Œå®ƒä¼šæ›¿ä»£ tomcatä¸­çš„defaultã€‚å¯¼è‡´æ‰€æœ‰çš„é™æ€èµ„æºéƒ½ç»™DispatcherServletå¤„ç†ï¼Œ é»˜è®¤æƒ…å†µä¸‹DispatcherServletæ²¡æœ‰å¤„ç†é™æ€èµ„æºçš„èƒ½åŠ›ã€‚æ²¡æœ‰æ§åˆ¶å™¨å¯¹è±¡èƒ½å¤„ç†é™æ€èµ„æºçš„è®¿é—®ã€‚æ‰€ä»¥é™æ€èµ„æºï¼ˆhtmlï¼Œjsï¼Œå›¾ç‰‡ï¼Œcssï¼‰éƒ½æ˜¯404ã€‚       åŠ¨æ€èµ„æºsome.doæ˜¯å¯ä»¥è®¿é—®ï¼Œçš„å› ä¸ºæˆ‘ä»¬ç¨‹åºä¸­æœ‰MyControlleræ§åˆ¶å™¨å¯¹è±¡ï¼Œèƒ½å¤„ç†some.doè¯·æ±‚ã€‚</p>
</li>
</ol>
<h4 id="é™æ€èµ„æºçš„è®¿é—®"><a href="#é™æ€èµ„æºçš„è®¿é—®" class="headerlink" title="é™æ€èµ„æºçš„è®¿é—®"></a>é™æ€èµ„æºçš„è®¿é—®</h4><p>ä¸‰ç§æ–¹å¼ï¼š</p>
<ol>
<li>ä½¿ç”¨&lt; mvc:default-servlet-handler &#x2F; &gt;</li>
<li>ä½¿ç”¨ &lt; mvc: resources &#x2F;&gt; ã€æŒæ¡ã€‘</li>
<li>å£°æ˜æ³¨è§£é©±åŠ¨</li>
</ol>
<p><strong>ä½¿ç”¨&lt; mvc:default-servlet-handler &#x2F; &gt;</strong></p>
<p>éœ€è¦åœ¨springmvcé…ç½®æ–‡ä»¶åŠ å…¥ &lt; mvc:default-servlet-handler &gt;</p>
<p>åŸç†æ˜¯ï¼š åŠ å…¥è¿™ä¸ªæ ‡ç­¾åï¼Œæ¡†æ¶ä¼šåˆ›å»ºæ§åˆ¶å™¨å¯¹è±¡DefaultServletHttpRequestHandlerï¼ˆç±»ä¼¼æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„MyControllerï¼‰ï¼ŒDefaultServletHttpRequestHandlerè¿™ä¸ªå¯¹è±¡å¯ä»¥æŠŠæ¥æ”¶çš„<strong>æ‰€æœ‰</strong>è¯·æ±‚è½¬å‘ç»™ tomcatçš„defaultè¿™ä¸ªservletï¼Œä¸ºäº†è®¿é—®åŠ¨æ€èµ„æºæˆ‘ä»¬éœ€è¦ åŠ ä¸Š &lt; mvc:annotation-driven &#x2F; &gt; æ¥è§£å†³é—®é¢˜</p>
<p>ç›´æ¥åŠ ä¸Šè¿™å¥è¯</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--SpringMVC.xml--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- default-servlet-handler å’Œ @RequestMappingæ³¨è§£ æœ‰å†²çªï¼Œ éœ€è¦åŠ å…¥annotation-driven è§£å†³é—®é¢˜--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨ &lt; mvc: resources &#x2F;&gt; ã€æŒæ¡ã€‘</strong></p>
<p>mvc:resources åŠ å…¥åæ¡†æ¶ä¼šåˆ›å»º ResourceHttpRequestHandlerè¿™ä¸ªå¤„ç†å™¨å¯¹è±¡ã€‚</p>
<p>è®©è¿™ä¸ªå¯¹è±¡å¤„ç†é™æ€èµ„æºçš„è®¿é—®ï¼Œä¸ä¾èµ–tomcatæœåŠ¡å™¨ã€‚</p>
<p>mapping:è®¿é—®é™æ€èµ„æºçš„uriåœ°å€ï¼Œ ä½¿ç”¨é€šé…ç¬¦ **</p>
<p>locationï¼šé™æ€èµ„æºåœ¨ä½ çš„é¡¹ç›®ä¸­çš„ç›®å½•ä½ç½®ã€‚</p>
<p>images&#x2F;** : è¡¨ç¤º images&#x2F;p1.jpg , images&#x2F;user&#x2F;logo.gif , images&#x2F;order&#x2F;history&#x2F;list.pngï¼Œ **è¡¨ç¤ºæ‰€æœ‰å­—ç¬¦ï¼Œå¯ä»¥è¡¨ç¤ºæ–‡ä»¶ã€ç›®å½•ã€å¤šçº§ç›®å½•ç­‰</p>
<p>mvc:resourceså’Œ@RequestMappingæœ‰ä¸€å®šçš„å†²çªï¼Œæ‰€ä»¥è¦è®°å¾—åŠ ä¸Šæ³¨è§£é©±åŠ¨</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--SpringMVC.xml--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	images, html, js éƒ½æ˜¯webappçš„ç›´æ¥å­ç›®å½•ï¼Œå’ŒWEB-INFåŒçº§ </span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/images/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/images/&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/html/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/html/&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/js/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/js/&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ä¸€æ¡è¯­å¥è§£å†³å¤šç§é™æ€èµ„æºçš„è®¿é—®é—®é¢˜ï¼š</p>
<p>é¦–å…ˆåº”è¯¥åœ¨webappä¸­æ–°å»ºä¸€ä¸ªstaticæ–‡ä»¶å¤¹ï¼Œç„¶åå°†æ‰€æœ‰é™æ€èµ„æºæ–‡ä»¶å¤¹éƒ½æ”¾åœ¨staticæ–‡ä»¶å¤¹ä¸­ã€‚</p>
<p>webapp&#x2F;static&#x2F;html, webapp&#x2F;static&#x2F;js, webapp&#x2F;static&#x2F;images </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">&quot;/static/**&quot;</span> <span class="attr">location</span>=<span class="string">&quot;/static/&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br></pre></td></tr></table></figure>


<h2 id="SSMæ•´åˆå¼€å‘"><a href="#SSMæ•´åˆå¼€å‘" class="headerlink" title="SSMæ•´åˆå¼€å‘"></a>SSMæ•´åˆå¼€å‘</h2><h3 id="æ­å»ºç¯å¢ƒ"><a href="#æ­å»ºç¯å¢ƒ" class="headerlink" title="æ­å»ºç¯å¢ƒ"></a>æ­å»ºç¯å¢ƒ</h3><p>SSMï¼š SpringMVC + Spring + MyBatis.</p>
<p>SpringMVC: è§†å›¾å±‚ï¼Œç•Œé¢å±‚ï¼Œè´Ÿè´£æ¥æ”¶è¯·æ±‚ï¼Œæ˜¾ç¤ºå¤„ç†ç»“æœçš„ã€‚</p>
<p>Springï¼šä¸šåŠ¡å±‚ï¼Œç®¡ç†serviceï¼Œdaoï¼Œå·¥å…·ç±»å¯¹è±¡çš„ã€‚</p>
<p>MyBatisï¼šæŒä¹…å±‚ï¼Œ è®¿é—®æ•°æ®åº“çš„</p>
<p>ç”¨æˆ·å‘èµ·è¯·æ±‚â€“SpringMVCæ¥æ”¶â€“Springä¸­çš„Serviceå¯¹è±¡â€“MyBatiså¤„ç†æ•°æ®</p>
<p>SSMæ•´åˆä¹Ÿå«åšSSI (IBatisä¹Ÿå°±æ˜¯mybatisçš„å‰èº«)ï¼Œ æ•´åˆä¸­æœ‰å®¹å™¨ã€‚</p>
<ol>
<li>ç¬¬ä¸€ä¸ªå®¹å™¨SpringMVCå®¹å™¨ï¼Œ ç®¡ç†Controlleræ§åˆ¶å™¨å¯¹è±¡çš„ã€‚</li>
<li>ç¬¬äºŒä¸ªå®¹å™¨Springå®¹å™¨ï¼Œç®¡ç†Serviceï¼ŒDaoï¼Œå·¥å…·ç±»å¯¹è±¡çš„</li>
</ol>
<p>æˆ‘ä»¬è¦åšçš„æŠŠä½¿ç”¨çš„å¯¹è±¡äº¤ç»™åˆé€‚çš„å®¹å™¨åˆ›å»ºï¼Œç®¡ç†ã€‚</p>
<p>æŠŠControllerè¿˜æœ‰webå¼€å‘çš„ç›¸å…³å¯¹è±¡äº¤ç»™springmvcå®¹å™¨ï¼Œwebç”¨çš„å¯¹è±¡å†™åœ¨springmvcé…ç½®æ–‡ä»¶ä¸­<br>serviceï¼Œdaoå¯¹è±¡å®šä¹‰åœ¨springçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œè®©springç®¡ç†è¿™äº›å¯¹è±¡ã€‚</p>
<p>springmvcå®¹å™¨å’Œspringå®¹å™¨æ˜¯æœ‰å…³ç³»çš„ï¼Œå…³ç³»å·²ç»ç¡®å®šå¥½äº†ã€‚springmvcå®¹å™¨æ˜¯springå®¹å™¨çš„å­å®¹å™¨ï¼Œ ç±»ä¼¼javaä¸­çš„ç»§æ‰¿ã€‚å­å¯ä»¥è®¿é—®çˆ¶çš„å†…å®¹ï¼Œåœ¨å­å®¹å™¨ä¸­çš„Controllerå¯ä»¥è®¿é—®çˆ¶å®¹å™¨ä¸­çš„Serviceå¯¹è±¡ï¼Œ å°±å¯ä»¥å®ç°controllerä½¿ç”¨serviceå¯¹è±¡</p>
<p><strong>å®ç°æ­¥éª¤</strong></p>
<ol start="0">
<li><p>ä½¿ç”¨springdbçš„mysqlåº“ï¼Œ è¡¨ä½¿ç”¨studentï¼ˆid auto_increment, name, ageï¼‰</p>
</li>
<li><p>æ–°å»ºmaven webé¡¹ç›®</p>
</li>
<li><p>åŠ å…¥ä¾èµ–springmvcï¼Œspringï¼Œmybatisä¸‰ä¸ªæ¡†æ¶çš„ä¾èµ–ï¼Œjacksonä¾èµ–ï¼Œmysqlé©±åŠ¨ï¼Œdruidè¿æ¥æ± ï¼Œjspï¼Œservletä¾èµ–</p>
</li>
<li><p>å†™web.xmlï¼Œæ³¨å†ŒDispatcherServlet ,ç›®çš„ï¼š</p>
</li>
<li><p>åˆ›å»ºSpringMVCå®¹å™¨å¯¹è±¡ï¼Œæ‰èƒ½åˆ›å»ºControllerç±»å¯¹è±¡ã€‚</p>
</li>
<li><p>åˆ›å»ºçš„æ˜¯Servletï¼Œæ‰èƒ½æ¥å—ç”¨æˆ·çš„è¯·æ±‚ã€‚</p>
</li>
<li><p>æ³¨å†Œspringçš„ç›‘å¬å™¨ï¼šContextLoaderListener,ç›®çš„ï¼š åˆ›å»ºspringçš„å®¹å™¨å¯¹è±¡ï¼Œæ‰èƒ½åˆ›å»ºserviceï¼Œdaoç­‰å¯¹è±¡ã€‚</p>
</li>
<li><p>æ³¨å†Œå­—ç¬¦é›†è¿‡æ»¤å™¨ï¼Œè§£å†³postè¯·æ±‚ä¹±ç çš„é—®é¢˜</p>
</li>
<li><p>åˆ›å»ºåŒ…ï¼Œ ControlleråŒ…ï¼Œ service ï¼Œdaoï¼Œå®ä½“ç±»åŒ…ååˆ›å»ºå¥½</p>
</li>
<li><p>å†™springmvcï¼Œspringï¼Œmybatisçš„é…ç½®æ–‡ä»¶</p>
<ol>
<li>springmvcé…ç½®æ–‡ä»¶</li>
<li>springé…ç½®æ–‡ä»¶</li>
<li>mybatisä¸»é…ç½®æ–‡ä»¶</li>
<li>æ•°æ®åº“çš„å±æ€§é…ç½®æ–‡ä»¶</li>
</ol>
</li>
<li><p>å†™ä»£ç ï¼Œ daoæ¥å£å’Œmapperæ–‡ä»¶ï¼Œ serviceå’Œå®ç°ç±»ï¼Œcontrollerï¼Œ å®ä½“ç±»ã€‚</p>
</li>
<li><p>å†™jspé¡µé¢</p>
</li>
</ol>
<p>é…ç½® pom.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- jspä¾èµ– --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1-b03<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span><span class="comment">&lt;!--æ‰€åœ¨çš„ç›®å½•--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">includes</span>&gt;</span><span class="comment">&lt;!--åŒ…æ‹¬ç›®å½•ä¸‹çš„.properties,.xml æ–‡ä»¶éƒ½ä¼šæ‰«æåˆ°--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>é…ç½®web.xml</p>
<h3 id="æ•´åˆæ³¨è§£å¼€å‘"><a href="#æ•´åˆæ³¨è§£å¼€å‘" class="headerlink" title="æ•´åˆæ³¨è§£å¼€å‘"></a>æ•´åˆæ³¨è§£å¼€å‘</h3><p>è§æ–‡ä»¶ <code>Learning\JavaWeb\SpringMVC\3.SSM</code></p>
<h2 id="SpringMVCæ ¸å¿ƒæŠ€æœ¯"><a href="#SpringMVCæ ¸å¿ƒæŠ€æœ¯" class="headerlink" title="SpringMVCæ ¸å¿ƒæŠ€æœ¯"></a>SpringMVCæ ¸å¿ƒæŠ€æœ¯</h2><h3 id="è¯·æ±‚è½¬å‘å’Œé‡å®šå‘"><a href="#è¯·æ±‚è½¬å‘å’Œé‡å®šå‘" class="headerlink" title="è¯·æ±‚è½¬å‘å’Œé‡å®šå‘"></a>è¯·æ±‚è½¬å‘å’Œé‡å®šå‘</h3><p><a href="/img/image-20210113103410547.png" title="image-20210113103410547" class="gallery-item" style="box-shadow: none;"> <img src="/img/image-20210113103410547.png" alt="image-20210113103410547"></a></p>
<p>è¯·æ±‚è½¬å‘çš„ä½¿ç”¨æƒ…å†µï¼šå› ä¸ºæˆ‘ä»¬å·²ç»é…ç½®äº†è§†å›¾è§£æå™¨ï¼Œæ‰€ä»¥åœ¨è·³è½¬çš„æ—¶å€™æˆ‘ä»¬ä¸èƒ½ç›´æ¥é€šè¿‡ setViewNameçš„æ–¹å¼è·³è½¬åˆ°viewç›®å½•ä»¥å¤–çš„ç›®å½•ï¼Œä¸ºäº†èƒ½å¤Ÿè·³è½¬åˆ°viewä»¥å¤–çš„ç›®å½•ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°è¯·æ±‚è½¬å‘æ“ä½œã€‚</p>
<p>è¯­æ³•ï¼š<code>modelAndView.setViewName(&quot;forward:å®Œæ•´ç›®å½•&quot;)</code></p>
<p>ç‰¹ç‚¹ï¼š ä¸å’Œè§†å›¾è§£æå™¨ä¸€åŒä½¿ç”¨ï¼Œå°±å½“é¡¹ç›®ä¸­æ²¡æœ‰è§†å›¾è§£æå™¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/addOneByOne.do&quot;, method = RequestMethod.POST)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">addOneByOne</span><span class="params">(String name, <span class="type">int</span> age)</span>&#123;</span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">    modelAndView.addObject(<span class="string">&quot;age&quot;</span>, age);</span><br><span class="line">    modelAndView.setViewName(<span class="string">&quot;forward:/WEB-INF/view/show.jsp&quot;</span>); <span class="comment">// è¯·æ±‚è½¬å‘</span></span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¤„ç†å™¨æ–¹æ³•è¿”å›ModelAndView,å®ç°é‡å®šå‘redirect</p>
<p>è¯­æ³•ï¼šsetViewName(â€œredirect:è§†å›¾å®Œæ•´è·¯å¾„â€)</p>
<p>redirectç‰¹ç‚¹ï¼šä¸å’Œè§†å›¾è§£æå™¨ä¸€åŒä½¿ç”¨ï¼Œå°±å½“é¡¹ç›®ä¸­æ²¡æœ‰è§†å›¾è§£æå™¨</p>
<p>æ¡†æ¶å¯¹é‡å®šå‘çš„æ“ä½œï¼š</p>
<ol>
<li>æ¡†æ¶ä¼šæŠŠModelä¸­çš„ç®€å•ç±»å‹çš„æ•°æ®ï¼Œè½¬ä¸ºstringä½¿ç”¨ï¼Œä½œä¸ºhello.jspçš„getè¯·æ±‚å‚æ•°ä½¿ç”¨ã€‚ç›®çš„æ˜¯åœ¨ doRedirect.do å’Œ hello.jsp ä¸¤æ¬¡è¯·æ±‚ä¹‹é—´ä¼ é€’æ•°æ®</li>
<li>åœ¨ç›®æ ‡hello.jspé¡µé¢å¯ä»¥ä½¿ç”¨å‚æ•°é›†åˆå¯¹è±¡ <code>$ &#123;param&#125;</code>è·å–è¯·æ±‚å‚æ•°å€¼<code>  $&#123;param.myname&#125;</code></li>
<li>é‡å®šå‘ä¸èƒ½è®¿é—®&#x2F;WEB-INFèµ„æº</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/doRedirect.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">doWithRedirect</span><span class="params">(String name,Integer age)</span>&#123;</span><br><span class="line">    <span class="comment">//å¤„ç†some.doè¯·æ±‚äº†ã€‚ ç›¸å½“äºserviceè°ƒç”¨å¤„ç†å®Œæˆäº†ã€‚</span></span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">mv</span>  <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">    <span class="comment">//æ•°æ®æ”¾å…¥åˆ° requestä½œç”¨åŸŸ</span></span><br><span class="line">    mv.addObject(<span class="string">&quot;myname&quot;</span>,name);</span><br><span class="line">    mv.addObject(<span class="string">&quot;myage&quot;</span>,age);</span><br><span class="line">    <span class="comment">//é‡å®šå‘ä¸èƒ½è®¿é—®/WEB-INFèµ„æº</span></span><br><span class="line">    mv.setViewName(<span class="string">&quot;redirect:/WEB-INF/view/show.jsp&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> mv;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h3><p>ä»£ç è§<code>Learning\JavaWeb\SpringMVC\4.Exception</code></p>
<p>springmvcæ¡†æ¶é‡‡ç”¨çš„æ˜¯ç»Ÿä¸€ï¼Œå…¨å±€çš„å¼‚å¸¸å¤„ç†ã€‚</p>
<p>æŠŠcontrollerçš„æ‰€æœ‰å¼‚å¸¸å¤„ç†éƒ½é›†ä¸­åˆ°ä¸€ä¸ªåœ°æ–¹ã€‚ é‡‡ç”¨çš„æ˜¯aopçš„æ€æƒ³ã€‚æŠŠä¸šåŠ¡é€»è¾‘å’Œå¼‚å¸¸å¤„ç†ä»£ç åˆ†å¼€ã€‚è§£è€¦åˆã€‚</p>
<p>ä½¿ç”¨ä¸¤ä¸ªæ³¨è§£</p>
<ol>
<li><p>@ExceptionHandler</p>
</li>
<li><p>@ControllerAdvice</p>
</li>
</ol>
<p>å¼‚å¸¸å¤„ç†æ­¥éª¤ï¼š</p>
<ol>
<li><p>æ–°å»ºmaven webé¡¹ç›®</p>
</li>
<li><p>åŠ å…¥ä¾èµ–</p>
</li>
<li><p>æ–°å»ºä¸€ä¸ªè‡ªå®šä¹‰å¼‚å¸¸ç±» MyUserException , é‡å†™å‰ä¸¤ä¸ªæ„é€ æ–¹æ³•ï¼Œå³æ— å‚æ„é€ å’ŒStringæ„é€ ï¼Œå†å®šä¹‰å®ƒçš„å­ç±»NameException , AgeException</p>
</li>
<li><p>åœ¨controlleræŠ›å‡ºNameException , AgeException</p>
</li>
<li><p>åˆ›å»ºä¸€ä¸ªæ™®é€šç±»ï¼Œä½œç”¨å…¨å±€å¼‚å¸¸å¤„ç†ç±» GlobalExceptionHandler</p>
<ol>
<li>åœ¨ç±»çš„ä¸Šé¢åŠ å…¥@ControllerAdviceï¼ˆæ§åˆ¶å™¨å¢å¼º - ç»™æ§åˆ¶å™¨å¢åŠ å¼‚å¸¸å¤„ç†åŠŸèƒ½ï¼‰ç‰¹ç‚¹ï¼šå¿…é¡»è®©æ¡†æ¶çŸ¥é“è¿™ä¸ªæ³¨è§£æ‰€åœ¨çš„åŒ…åï¼ˆç¬¬7æ­¥ï¼‰</li>
<li>åœ¨ç±»ä¸­å®šä¹‰æ–¹æ³•ï¼Œæ–¹æ³•çš„ä¸Šé¢åŠ å…¥@ExceptionHandler</li>
</ol>
</li>
<li><p>åˆ›å»ºå¤„ç†å¼‚å¸¸çš„è§†å›¾é¡µé¢</p>
</li>
<li><p>åˆ›å»ºspringmvcçš„é…ç½®æ–‡ä»¶</p>
<ol>
<li>ç»„ä»¶æ‰«æå™¨ ï¼Œæ‰«æ@Controlleræ³¨è§£</li>
<li>ç»„ä»¶æ‰«æå™¨ï¼Œæ‰«æ@ControllerAdviceæ‰€åœ¨çš„åŒ…å</li>
<li>å£°æ˜æ³¨è§£é©±åŠ¨</li>
</ol>
</li>
</ol>
<p>å…³é”®ç‚¹ï¼šæŠŠå¼‚å¸¸æŠ›å‡ºç»™æ¡†æ¶ï¼Œè®©æ¡†æ¶é›†ä¸­å¤„ç†è¿™äº›å¼‚å¸¸ã€‚</p>
<p>åˆ›å»ºç›¸å…³ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UserException.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserException</span> <span class="keyword">extends</span> <span class="title class_">Exception</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserException</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserException</span><span class="params">(String message)</span> &#123;  <span class="built_in">super</span>(message);  	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//AgeException.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AgeException</span> <span class="keyword">extends</span> <span class="title class_">UserException</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AgeException</span><span class="params">()</span> &#123;  <span class="built_in">super</span>();   &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AgeException</span><span class="params">(String message)</span> &#123;  <span class="built_in">super</span>(message);    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//NageException.java ç•¥</span></span><br><span class="line"><span class="comment">// Controller</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/addObject&quot;, method = RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">addObj</span><span class="params">(Student student)</span> <span class="keyword">throws</span> UserException &#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        <span class="keyword">if</span>(student.getAge() &gt; <span class="number">100</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AgeException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!student.getName().equals(<span class="string">&quot;zs&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NameException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;name&quot;</span>, student.getName());</span><br><span class="line">        modelAndView.addObject(<span class="string">&quot;age&quot;</span>, student.getAge());</span><br><span class="line">        modelAndView.setViewName(<span class="string">&quot;show&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å…¨å±€å¼‚å¸¸å¤„ç†ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰æ–¹æ³•ï¼Œå¤„ç†å‘ç”Ÿçš„å¼‚å¸¸</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        å¤„ç†å¼‚å¸¸çš„æ–¹æ³•å’Œæ§åˆ¶å™¨æ–¹æ³•çš„å®šä¹‰ä¸€æ ·ï¼Œ å¯ä»¥æœ‰å¤šä¸ªå‚æ•°ï¼Œå¯ä»¥æœ‰ModelAndView,</span></span><br><span class="line"><span class="comment">        String, void,å¯¹è±¡ç±»å‹çš„è¿”å›å€¼</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        å½¢å‚ï¼šExceptionï¼Œè¡¨ç¤ºControllerä¸­æŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">        é€šè¿‡å½¢å‚å¯ä»¥è·å–å‘ç”Ÿçš„å¼‚å¸¸ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        @ExceptionHandler(å¼‚å¸¸çš„class)ï¼šè¡¨ç¤ºå¼‚å¸¸çš„ç±»å‹ï¼Œå½“å‘ç”Ÿæ­¤ç±»å‹å¼‚å¸¸æ—¶ï¼Œ</span></span><br><span class="line"><span class="comment">        ç”±å½“å‰æ–¹æ³•å¤„ç†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(value = NameException.class)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">doNameException</span><span class="params">(Exception e)</span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">           å¼‚å¸¸å‘ç”Ÿå¤„ç†é€»è¾‘ï¼š</span></span><br><span class="line"><span class="comment">           1.éœ€è¦æŠŠå¼‚å¸¸è®°å½•ä¸‹æ¥ï¼Œ è®°å½•åˆ°æ•°æ®åº“ï¼Œæ—¥å¿—æ–‡ä»¶ã€‚è®°å½•æ—¥å¿—å‘ç”Ÿçš„æ—¶é—´ï¼Œå“ªä¸ªæ–¹æ³•å‘ç”Ÿçš„ï¼Œå¼‚å¸¸é”™è¯¯å†…å®¹ã€‚</span></span><br><span class="line"><span class="comment">           2.å‘é€é€šçŸ¥ï¼ŒæŠŠå¼‚å¸¸çš„ä¿¡æ¯é€šè¿‡é‚®ä»¶ï¼ŒçŸ­ä¿¡ï¼Œå¾®ä¿¡å‘é€ç»™ç›¸å…³äººå‘˜ã€‚</span></span><br><span class="line"><span class="comment">           3.ç»™ç”¨æˆ·å‹å¥½çš„æç¤ºã€‚</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;å§“åå¿…é¡»æ˜¯zsï¼Œå…¶å®ƒç”¨æˆ·ä¸èƒ½è®¿é—®&quot;</span>);</span><br><span class="line">        mv.addObject(<span class="string">&quot;e&quot;</span>, e);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;nameError&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@ExceptionHandler(value = AgeException.class)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">doAgeException</span><span class="params">(Exception e)</span>&#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;å¹´é¾„å¤ªå¤§äº†ï¼ï¼ï¼&quot;</span>);</span><br><span class="line">        mv.addObject(<span class="string">&quot;e&quot;</span>, e);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;ageError&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@ExceptionHandler()</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">OtherException</span><span class="params">(Exception e)</span>&#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;å…¶ä»–å¼‚å¸¸&quot;</span>);</span><br><span class="line">        mv.addObject(<span class="string">&quot;e&quot;</span>, e);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;Others&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é”™è¯¯è§†å›¾ç•¥ã€‚</p>
<p>é…ç½®æ–‡ä»¶çš„é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--SpringMVC.xml--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.Jancoyan.Handler&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.Jancoyan.Controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h3><ol>
<li>æ‹¦æˆªå™¨æ˜¯springmvcä¸­çš„ä¸€ç§ï¼Œéœ€è¦å®ç°HandlerInterceptoræ¥å£ã€‚</li>
<li>æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨ç±»ä¼¼ï¼ŒåŠŸèƒ½æ–¹å‘ä¾§é‡ç‚¹ä¸åŒã€‚ è¿‡æ»¤å™¨æ˜¯ç”¨æ¥è¿‡æ»¤å™¨è¯·æ±‚å‚æ•°ï¼Œè®¾ç½®ç¼–ç å­—ç¬¦é›†ç­‰å·¥ä½œã€‚æ‹¦æˆªå™¨æ˜¯æ‹¦æˆªç”¨æˆ·çš„è¯·æ±‚ï¼Œåšè¯·æ±‚åšåˆ¤æ–­å¤„ç†çš„ã€‚</li>
<li>æ‹¦æˆªå™¨æ˜¯å…¨å±€çš„ï¼Œå¯ä»¥å¯¹å¤šä¸ªControlleråšæ‹¦æˆªã€‚ ä¸€ä¸ªé¡¹ç›®ä¸­å¯ä»¥æœ‰0ä¸ªæˆ–å¤šä¸ªæ‹¦æˆªå™¨ï¼Œ ä»–ä»¬åœ¨ä¸€èµ·æ‹¦æˆªç”¨æˆ·çš„è¯·æ±‚ã€‚æ‹¦æˆªå™¨å¸¸ç”¨åœ¨ï¼šç”¨æˆ·ç™»å½•å¤„ç†ï¼Œæƒé™æ£€æŸ¥ï¼Œ è®°å½•æ—¥å¿—ã€‚</li>
</ol>
<p>æ‹¦æˆªå™¨çš„ä½¿ç”¨æ­¥éª¤ï¼š</p>
<ol>
<li>å®šä¹‰ç±»å®ç°HandlerInterceptoræ¥å£</li>
<li>åœ¨springmvcé…ç½®æ–‡ä»¶ä¸­ï¼Œå£°æ˜æ‹¦æˆªå™¨ï¼Œ è®©æ¡†æ¶çŸ¥é“æ‹¦æˆªå™¨çš„å­˜åœ¨ã€‚</li>
</ol>
<p><a href="/img/image-20210113155716488.png" title="image-20210113155716488" class="gallery-item" style="box-shadow: none;"> <img src="/img/image-20210113155716488.png" alt="image-20210113155716488"></a><br>å®ç°æ¥å£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‹¦æˆªå™¨ç±»ï¼Œæ‹¦æˆªç”¨æˆ·çš„è¯·æ±‚</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é¢„å¤„ç†æ–¹æ³•ï¼Œæœ€åä¸€ä¸ªå‚æ•°æ˜¯è¢«æ‹¦æˆªçš„æ§åˆ¶å™¨å¯¹è±¡</span></span><br><span class="line">    <span class="comment">// è¿”å›å€¼ ï¼šè¯·æ±‚æ˜¯å¦é€šè¿‡çš„æ‹¦æˆªå™¨ï¼Œtrueè¡¨ç¤ºé€šè¿‡ï¼Œå¯ä»¥æ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">// ç‰¹ç‚¹ï¼šåœ¨æ§åˆ¶å™¨æ–¹æ³•ä¹‹å‰æ‰§è¡Œçš„ï¼Œç”¨æˆ·çš„è¯·æ±‚é¦–å…ˆåˆ°è¾¾æ­¤æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å¯ä»¥è·å–è¯·æ±‚çš„ä¿¡æ¯ï¼Œ éªŒè¯è¯·æ±‚æ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚å¯ä»¥éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•ï¼Œ éªŒè¯ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®æŸä¸ªè¿æ¥åœ°å€ï¼ˆurlï¼‰ã€‚</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‹¦æˆªå™¨çš„MyInterceptorçš„preHandle()&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">       postHandle:åå¤„ç†æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="comment">       å‚æ•°ï¼š</span></span><br><span class="line"><span class="comment">        Object handlerï¼šè¢«æ‹¦æˆªçš„å¤„ç†å™¨å¯¹è±¡MyController</span></span><br><span class="line"><span class="comment">        ModelAndView mv:å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        ç‰¹ç‚¹ï¼š</span></span><br><span class="line"><span class="comment">         1.åœ¨å¤„ç†å™¨æ–¹æ³•ä¹‹åæ‰§è¡Œçš„ï¼ˆMyController.doSome()ï¼‰</span></span><br><span class="line"><span class="comment">         2.èƒ½å¤Ÿè·å–åˆ°å¤„ç†å™¨æ–¹æ³•çš„è¿”å›å€¼ModelAndView,å¯ä»¥ä¿®æ”¹ModelAndViewä¸­çš„æ•°æ®å’Œè§†å›¾ï¼Œå¯ä»¥å½±å“åˆ°æœ€åçš„æ‰§è¡Œç»“æœã€‚</span></span><br><span class="line"><span class="comment">         3.ä¸»è¦æ˜¯å¯¹åŸæ¥çš„æ‰§è¡Œç»“æœåšäºŒæ¬¡ä¿®æ­£ï¼Œ</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">         ModelAndView mv = MyController.doSome();</span></span><br><span class="line"><span class="comment">         postHandle(request,response,handler,mv);</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‹¦æˆªå™¨çš„MyInterceptorçš„postHandle()&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      afterCompletion:æœ€åæ‰§è¡Œçš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">      å‚æ•°</span></span><br><span class="line"><span class="comment">        Object handler:è¢«æ‹¦æˆªå™¨çš„å¤„ç†å™¨å¯¹è±¡</span></span><br><span class="line"><span class="comment">        Exception exï¼šç¨‹åºä¸­å‘ç”Ÿçš„å¼‚å¸¸</span></span><br><span class="line"><span class="comment">      ç‰¹ç‚¹:</span></span><br><span class="line"><span class="comment">       1.åœ¨è¯·æ±‚å¤„ç†å®Œæˆåæ‰§è¡Œçš„ã€‚æ¡†æ¶ä¸­è§„å®šæ˜¯å½“ä½ çš„è§†å›¾å¤„ç†å®Œæˆåï¼Œå¯¹è§†å›¾æ‰§è¡Œäº†forwardã€‚å°±è®¤ä¸ºè¯·æ±‚å¤„ç†å®Œæˆã€‚</span></span><br><span class="line"><span class="comment">       2.èˆ¬åšèµ„æºå›æ”¶å·¥ä½œçš„ï¼Œ ç¨‹åºè¯·æ±‚è¿‡ç¨‹ä¸­åˆ›å»ºäº†ä¸€äº›å¯¹è±¡ï¼Œåœ¨è¿™é‡Œå¯ä»¥åˆ é™¤ï¼ŒæŠŠå ç”¨çš„å†…å­˜å›æ”¶ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‹¦æˆªå™¨çš„MyInterceptorçš„afterCompletion()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å£°æ˜æ‹¦æˆªå™¨ï¼š æ‹¦æˆªå™¨å¯ä»¥æœ‰0æˆ–å¤šä¸ª--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å£°æ˜ç¬¬ä¸€ä¸ªæ‹¦æˆªå™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æŒ‡å®šæ‹¦æˆªçš„è¯·æ±‚uriåœ°å€</span></span><br><span class="line"><span class="comment">            pathï¼šå°±æ˜¯uriåœ°å€ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ **</span></span><br><span class="line"><span class="comment">                  ** ï¼š è¡¨ç¤ºä»»æ„çš„å­—ç¬¦ï¼Œæ–‡ä»¶æˆ–è€…å¤šçº§ç›®å½•å’Œç›®å½•ä¸­çš„æ–‡ä»¶</span></span><br><span class="line"><span class="comment">            http://localhost:8080/myweb/user/listUser.do</span></span><br><span class="line"><span class="comment">            http://localhost:8080/myweb/student/addStudent.do</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å£°æ˜æ‹¦æˆªå™¨å¯¹è±¡--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.Jancoyan.Handler.MyInterceptor&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ‹¦æˆªå™¨çš„æ‰§è¡Œæ—¶é—´ï¼š</p>
<ol>
<li>åœ¨è¯·æ±‚å¤„ç†ä¹‹å‰ï¼Œ ä¹Ÿå°±æ˜¯controllerç±»ä¸­çš„æ–¹æ³•æ‰§è¡Œä¹‹å‰å…ˆè¢«æ‹¦æˆªã€‚</li>
<li>åœ¨æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œä¹‹åä¹Ÿä¼šæ‰§è¡Œæ‹¦æˆªå™¨ã€‚</li>
<li>åœ¨è¯·æ±‚å¤„ç†å®Œæˆåä¹Ÿä¼šæ‰§è¡Œæ‹¦æˆªå™¨ã€‚</li>
</ol>
<p>æ‹¦æˆªå™¨ï¼šçœ‹åšæ˜¯å¤šä¸ªControllerä¸­å…¬ç”¨çš„åŠŸèƒ½ï¼Œé›†ä¸­åˆ°æ‹¦æˆªå™¨ç»Ÿä¸€å¤„ç†ã€‚ä½¿ç”¨çš„AOPçš„æ€æƒ³</p>
<p>å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåºï¼š</p>
<p><a href="/img/image-20210113155834039.png" title="image-20210113155834039" class="gallery-item" style="box-shadow: none;"> <img src="/img/image-20210113155834039.png" alt="image-20210113155834039"></a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬ä¸€ä¸ªæ‹¦æˆªå™¨preHandle=true , ç¬¬äºŒä¸ªæ‹¦æˆªå™¨preHandle=true </span><br><span class="line"></span><br><span class="line">111111-æ‹¦æˆªå™¨çš„MyInterceptorçš„preHandle()</span><br><span class="line">22222-æ‹¦æˆªå™¨çš„MyInterceptorçš„preHandle()</span><br><span class="line">=====æ‰§è¡ŒMyControllerä¸­çš„doSomeæ–¹æ³•=====</span><br><span class="line">22222-æ‹¦æˆªå™¨çš„MyInterceptorçš„postHandle()</span><br><span class="line">111111-æ‹¦æˆªå™¨çš„MyInterceptorçš„postHandle()</span><br><span class="line">22222-æ‹¦æˆªå™¨çš„MyInterceptorçš„afterCompletion()</span><br><span class="line">111111-æ‹¦æˆªå™¨çš„MyInterceptorçš„afterCompletion()</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€ä¸ªæ‹¦æˆªå™¨preHandle=true , ç¬¬äºŒä¸ªæ‹¦æˆªå™¨preHandle=false</span><br><span class="line"></span><br><span class="line">111111-æ‹¦æˆªå™¨çš„MyInterceptorçš„preHandle()</span><br><span class="line">22222-æ‹¦æˆªå™¨çš„MyInterceptorçš„preHandle()</span><br><span class="line">111111-æ‹¦æˆªå™¨çš„MyInterceptorçš„afterCompletion()</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€ä¸ªæ‹¦æˆªå™¨preHandle=false , ç¬¬äºŒä¸ªæ‹¦æˆªå™¨preHandle=true|false</span><br><span class="line"></span><br><span class="line">111111-æ‹¦æˆªå™¨çš„MyInterceptorçš„preHandle()</span><br></pre></td></tr></table></figure>

<p><strong>æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨çš„åŒºåˆ«</strong></p>
<p>1.è¿‡æ»¤å™¨æ˜¯servletä¸­çš„å¯¹è±¡ï¼Œ  æ‹¦æˆªå™¨æ˜¯æ¡†æ¶ä¸­çš„å¯¹è±¡</p>
<p>2.è¿‡æ»¤å™¨å®ç°Filteræ¥å£çš„å¯¹è±¡ï¼Œ æ‹¦æˆªå™¨æ˜¯å®ç°HandlerInterceptor</p>
<p>3.è¿‡æ»¤å™¨æ˜¯ç”¨æ¥è®¾ç½®requestï¼Œresponseçš„å‚æ•°ï¼Œå±æ€§çš„ï¼Œä¾§é‡å¯¹æ•°æ®è¿‡æ»¤çš„ã€‚  æ‹¦æˆªå™¨æ˜¯ç”¨æ¥éªŒè¯è¯·æ±‚çš„ï¼Œèƒ½æˆªæ–­è¯·æ±‚ã€‚</p>
<p>4.è¿‡æ»¤å™¨æ˜¯åœ¨æ‹¦æˆªå™¨ä¹‹å‰å…ˆæ‰§è¡Œçš„ã€‚</p>
<p>5.è¿‡æ»¤å™¨æ˜¯tomcatæœåŠ¡å™¨åˆ›å»ºçš„å¯¹è±¡, æ‹¦æˆªå™¨æ˜¯springmvcå®¹å™¨ä¸­åˆ›å»ºçš„å¯¹è±¡</p>
<p>6.è¿‡æ»¤å™¨æ˜¯ä¸€ä¸ªæ‰§è¡Œæ—¶é—´ç‚¹ã€‚  æ‹¦æˆªå™¨æœ‰ä¸‰ä¸ªæ‰§è¡Œæ—¶é—´ç‚¹</p>
<p>7.è¿‡æ»¤å™¨å¯ä»¥å¤„ç†jspï¼Œjsï¼Œhtmlç­‰ç­‰,  æ‹¦æˆªå™¨æ˜¯ä¾§é‡æ‹¦æˆªå¯¹Controllerçš„å¯¹è±¡ã€‚ å¦‚æœä½ çš„è¯·æ±‚ä¸èƒ½è¢«DispatcherServletæ¥æ”¶ï¼Œ è¿™ä¸ªè¯·æ±‚ä¸ä¼šæ‰§è¡Œæ‹¦æˆªå™¨å†…å®¹</p>
<p>8.æ‹¦æˆªå™¨æ‹¦æˆªæ™®é€šç±»æ–¹æ³•æ‰§è¡Œï¼Œè¿‡æ»¤å™¨è¿‡æ»¤servletè¯·æ±‚å“åº”</p>
</div>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2021-01-11</span>
            
            
             
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                
                    <span>ä¸Šä¸€ç¯‡ï¼š<a href='/2021/01/26/Python-Spider/'>ç¬”è®° | Pythonçˆ¬è™«</a></span>
                

                
                    <span class="post-footer-pre-next-last-span-right">ä¸‹ä¸€ç¯‡ï¼š<a href="/2021/01/09/MyBatis/">ç¬”è®° | MyBatis</a>
                    </span>
                
            </div>
    
        
    

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
             

            
                

            
        </span>
       
    
</div>



<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>Change And Challenge</span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--ç›®å½•-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--å›åˆ°é¡¶éƒ¨æŒ‰é’®-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // å¯ç”¨æ’ä»¶
            thumbnail: true,          // æ˜¾ç¤ºç¼©ç•¥å›¾
            zoom: true,               // å¯ç”¨ç¼©æ”¾åŠŸ
            rotate: true,             // å¯ç”¨æ—‹è½¬åŠŸèƒ½èƒ½
            autoplay: true,        // å¯ç”¨è‡ªåŠ¨æ’­æ”¾åŠŸèƒ½
            fullScreen: true,      // å¯ç”¨å…¨å±åŠŸèƒ½
            pager: false, //é¡µç ,
            zoomFromOrigin: true,   // ä»åŸå§‹ä½ç½®ç¼©æ”¾
            actualSize: true,       // å¯ç”¨æŸ¥çœ‹å®é™…å¤§å°çš„åŠŸèƒ½
            enableZoomAfter: 300,    // å»¶è¿Ÿç¼©æ”¾ï¼Œç¡®ä¿å›¾ç‰‡åŠ è½½å®Œæˆåå¯ç¼©æ”¾
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // ä¿®å¤é€‰æ‹©å™¨
    }
    
</script>


                </div>
            
            
                <!-- å›åˆ°é¡¶éƒ¨çš„æŒ‰é’®-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- è¿”å›çš„æŒ‰é’®-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>