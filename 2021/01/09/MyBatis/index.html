<!DOCTYPE html>
<html lang="en">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
    <meta name="description" content="ç¬”è®° | MyBatis" />
    <meta name="hexo-theme-A4" content="v1.9.6" />
    <link rel="alternate icon" type="image/webp" href="/img/avatar.png">
    <title>Jingcun Yan</title>

    
        
<link rel="stylesheet" href="/css/highlight/style1.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--è¿”å›é¡¶éƒ¨css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--ç›®å½•-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    

    
        
<link rel="stylesheet" href="/css/returnToLastPage.css">

    
    
   
<link rel="stylesheet" href="/css/lightgallery-bundle.min.css">


<meta name="generator" content="Hexo 7.3.0"></head>
    
    
        <style>
            .index-main{
                max-width:  880px;
            }
        </style>

    
    



    

    
    

    
    
    
    <body>
        <script src="/js/darkmode-js.min.js"></script>
        
        <script>
            const options = {
                bottom: '40px', // default: '32px'
                right: 'unset', // default: '32px'
                left: '42px', // default: 'unset'
                time: '0.3s', // default: '0.3s'
                mixColor: '#fff', // default: '#fff'
                backgroundColor: ' #e4e4e4 ',  // default: '#fff'
                buttonColorDark: '#100f2c',  // default: '#100f2c'
                buttonColorLight: '#fff', // default: '#fff'
                saveInCookies: true, // default: true,
                label: 'ğŸŒ“', // default: ''
                autoMatchOsTheme: true // default: true
            }
            const darkmode = new Darkmode(options);
            darkmode.showWidget();
        </script>
        
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    


<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/avatar.png" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">Jingcun Yan</a> 
            <span class="description"></span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">é¦–é¡µ</a></li>
            
        
            
                <li><a href="/list/">æ–‡ç« </a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">
    

    
        
            
                <div class="post-main-title" style="text-align: center;">
                    ç¬”è®° | MyBatis
                </div>
            
        
      
    

    

        
            <div class="post-head-meta-center">
        
                
                
                    
                     <span>å­—æ•°æ€»è®¡ï¼š5.8k</span>
                
                
                    
                        &nbsp; | &nbsp;
                    
                    <span>é˜…è¯»ä¼°æ—¶ï¼š26åˆ†é’Ÿ</span>
                
                
            </div>
    

    <div class="post-md">
        
        <div class=".article-gallery"><h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><h3 id="ä¸‰å±‚æ¶æ„"><a href="#ä¸‰å±‚æ¶æ„" class="headerlink" title="ä¸‰å±‚æ¶æ„"></a>ä¸‰å±‚æ¶æ„</h3><table>
<thead>
<tr>
<th>åç§°</th>
<th>ä½œç”¨</th>
<th>å¯¹åº”çš„åŒ…</th>
<th>å¯¹åº”çš„æ¡†æ¶</th>
</tr>
</thead>
<tbody><tr>
<td>ç•Œé¢å±‚</td>
<td>å’Œç”¨æˆ·æ‰“äº¤é“ï¼Œæ¥å—ç”¨æˆ·è¯·æ±‚å‚æ•°ï¼Œæ˜¾ç¤ºå¤„ç†ç»“æœ</td>
<td>controller</td>
<td>SpringMVC</td>
</tr>
<tr>
<td>ä¸šåŠ¡é€»è¾‘å±‚</td>
<td>æ¥å—ç•Œé¢å±‚ä¼ é€’çš„æ•°æ®ï¼Œè®¡ç®—é€»è¾‘ï¼Œè°ƒç”¨æ•°æ®åº“ï¼Œè·å–æ•°æ®</td>
<td>service</td>
<td>Spring</td>
</tr>
<tr>
<td>æ•°æ®è®¿é—®å±‚</td>
<td>è®¿é—®æ•°æ®åº“ï¼Œæ‰§è¡ŒCRUD</td>
<td>dao</td>
<td>MyBatis</td>
</tr>
</tbody></table>
<p>ç”¨æˆ·ä½¿ç”¨ç•Œé¢å±‚-&gt;ä¸šåŠ¡é€»è¾‘å±‚-&gt;æ•°æ®è®¿é—®å±‚ï¼ˆæŒä¹…å±‚ï¼‰-&gt;æ•°æ®åº“</p>
<p>MyBatisæœ‰ä»€ä¹ˆç”¨?</p>
<ol>
<li>æä¾›äº†åˆ›å»ºconnectionï¼Œstatementï¼ŒResultsetçš„èƒ½åŠ›ï¼Œä¸ç”¨å¼€å‘äººå‘˜åˆ›å»ºè¿™äº›å¯¹è±¡äº†</li>
<li>æä¾›äº†æ‰§è¡Œsqlè¯­å¥çš„èƒ½åŠ›ï¼Œä¸ç”¨ä½ æ‰§è¡Œsql</li>
<li>æä¾›äº†å¾ªç¯sqlï¼ŒæŠŠsqlçš„ç»“æœè½¬ä¸ºjavaå¯¹è±¡ï¼ŒListé›†åˆçš„èƒ½åŠ›</li>
<li>æä¾›äº†å…³é—­èµ„æºçš„èƒ½åŠ›ï¼Œä¸ç”¨ä½ å…³é—­Connectionï¼ŒStatementï¼ŒResultset</li>
</ol>
<p>æ€»ç»“:</p>
<p>mybatisæ˜¯ä¸€ä¸ªsqlæ˜ å°„æ¡†æ¶ï¼Œæä¾›çš„æ•°æ®åº“çš„æ“ä½œèƒ½åŠ›ã€‚æ˜¯ä¸€ä¸ªå¢å¼ºçš„JDBCï¼Œä½¿ç”¨mybatisè®©å¼€å‘äººå‘˜é›†ä¸­ç²¾ç¥å†™sqlå°±å¯ä»¥äº†ï¼Œä¸å¿…å…³å¿ƒConnectionï¼ŒStatementï¼ŒResultsetçš„åˆ›å»ºï¼Œé”€æ¯ï¼Œsqlçš„æ‰§è¡Œã€‚</p>
<h2 id="MyBatiså¿«é€Ÿå…¥é—¨"><a href="#MyBatiså¿«é€Ÿå…¥é—¨" class="headerlink" title="MyBatiså¿«é€Ÿå…¥é—¨"></a>MyBatiså¿«é€Ÿå…¥é—¨</h2><blockquote>
<p>å¯¹åº”æ–‡ä»¶ï¼šLearning&#x2F;JavaWeb&#x2F;Mabatis&#x2F;1.Hello-Mybatis</p>
</blockquote>
<h3 id="å®ç°æ­¥éª¤"><a href="#å®ç°æ­¥éª¤" class="headerlink" title="å®ç°æ­¥éª¤"></a>å®ç°æ­¥éª¤</h3><ol>
<li>æ–°å»ºçš„studentè¡¨</li>
<li>åŠ å…¥mavençš„mybatisä¾èµ–ï¼Œmysqlé©±åŠ¨ä¾èµ–</li>
<li>åˆ›å»ºå®ä½“ç±»ï¼Œstudentâ€“ä¿å­˜è¡¨ä¸­çš„ä¸€è¡Œæ•°æ®çš„<ol>
<li>å…¶ä¸­ï¼Œæˆå‘˜å˜é‡åå’Œè¡¨ä¸­çš„æ•°æ®ç±»å‹ä¸€æ ·</li>
<li>å®ä½“ç±»åå’Œè¡¨åä¸€æ ·</li>
</ol>
</li>
<li>åˆ›å»ºæŒä¹…å±‚çš„daoæ¥å£ï¼Œå®šä¹‰æ“ä½œæ•°æ®åº“çš„æ–¹æ³•</li>
<li>åˆ›å»ºä¸€ä¸ªmybatisä½¿ç”¨çš„é…ç½®æ–‡ä»¶å«åš<strong>sqlæ˜ å°„æ–‡ä»¶</strong>ï¼šå†™sqlè¯­å¥çš„ã€‚ä¸€èˆ¬ä¸€ä¸ªè¡¨ä¸€ä¸ªsqlæ˜ å°„æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶æ˜¯xmlæ–‡ä»¶ã€‚<ol>
<li>åœ¨æ¥å£æ‰€åœ¨çš„ç›®å½•ä¸­</li>
<li>æ–‡ä»¶åå’Œæ¥å£ä¿æŒä¸€è‡´</li>
</ol>
</li>
<li>åˆ›å»ºmybatisçš„<strong>ä¸»é…ç½®æ–‡ä»¶</strong>ï¼šä¸€ä¸ªé¡¹ç›®å°±ä¸€ä¸ªä¸»é…ç½®æ–‡ä»¶ã€‚ä¸»é…ç½®æ–‡ä»¶æä¾›äº†æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯å’Œsqlæ˜ å°„æ–‡ä»¶çš„ä½ç½®ä¿¡æ¯<ol>
<li>ä½ç½®ï¼šmavençš„ä½ç½®ä¸º<code>src/main/resources</code> ï¼Œæ²¡æœ‰å°±åˆ›å»º</li>
</ol>
</li>
<li>åˆ›å»ºä½¿ç”¨mybatisç±»ï¼Œé€šè¿‡mybatisè®¿é—®æ•°æ®åº“</li>
</ol>
<h4 id="åˆ›å»ºsqlæ˜ å°„æ–‡ä»¶"><a href="#åˆ›å»ºsqlæ˜ å°„æ–‡ä»¶" class="headerlink" title="åˆ›å»ºsqlæ˜ å°„æ–‡ä»¶"></a>åˆ›å»ºsqlæ˜ å°„æ–‡ä»¶</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">	sqlæ˜ å°„æ–‡ä»¶ï¼šå†™sq1è¯­å¥çš„ï¼Œmybatisä¼šæ‰§è¡Œè¿™äº›sq1</span></span><br><span class="line"><span class="comment">    1.æŒ‡å®šçº¦æŸæ–‡ä»¶</span></span><br><span class="line"><span class="comment">    &lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;  &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span></span><br><span class="line"><span class="comment">    mybatis-3-mapper.dtdæ˜¯çº¦æŸæ–‡ä»¶çš„åç§°ï¼Œæ‰©å±•åæ˜¯dtdçš„ã€‚</span></span><br><span class="line"><span class="comment">    2.çº¦æŸæ–‡ä»¶ä½œç”¨ï¼šé™åˆ¶ï¼Œæ£€æŸ¥åœ¨å½“å‰æ–‡ä»¶ä¸­å‡ºç°çš„æ ‡ç­¾ï¼Œå±æ€§å¿…é¡»ç¬¦åˆmybatisçš„è¦æ±‚ã€‚</span></span><br><span class="line"><span class="comment">    3.mapperæ˜¯å½“å‰æ–‡ä»¶çš„æ ¹æ ‡ç­¾ï¼Œå¿…é¡»çš„ã€‚namespaceï¼šå«åšå‘½åç©ºé—´ï¼Œå”¯ä¸€å€¼çš„ï¼Œå¯ä»¥æ˜¯è‡ªå®šä¹‰çš„å­—ç¬¦ä¸²ã€‚è¦æ±‚ä½ ä½¿ç”¨daoæ¥å£çš„å…¨é™å®šåç§°ã€‚</span></span><br><span class="line"><span class="comment">    4.åœ¨æ–‡ä»¶ä¸­å¯ä»¥ä½¿ç”¨ç‰¹å®šçš„æ ‡ç­¾ï¼Œè¡¨ç¤ºæ•°æ®åº“çš„ç‰¹å®šæ“ä½œ</span></span><br><span class="line"><span class="comment">    &lt;select&gt; æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">    &lt;update&gt; æ›´æ–°</span></span><br><span class="line"><span class="comment">    &lt;insert&gt; æ’å…¥</span></span><br><span class="line"><span class="comment">    &lt;delete&gt; åˆ é™¤</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.Jancoyan.Dao.IStudentDao&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryAllStudent&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.Jancoyan.Domain.Student&quot;</span>&gt;</span></span><br><span class="line">    select * from t_student</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    select : è¡¨ç¤ºæŸ¥è¯¢æ“ä½œ</span></span><br><span class="line"><span class="comment">    idæ˜¯è¦æ‰§è¡Œçš„sqlçš„å”¯ä¸€æ ‡è¯†mybatisä¼šæ ¹æ®è¿™ä¸ªå”¯ä¸€æ ‡è¯†å»æ‰¾è¦æ‰§è¡Œçš„sqlè¯­å¥ï¼Œ</span></span><br><span class="line"><span class="comment">    å¯ä»¥è‡ªå®šä¹‰ï¼Œä½†æ˜¯è¦æ±‚ä½¿ç”¨æ¥å£ä¸­çš„æ–¹æ³•åç§°</span></span><br><span class="line"><span class="comment">    resultType: è¡¨ç¤ºsqlè¯­å¥æ‰§è¡Œåå¾—åˆ°çš„ResultSetï¼Œéå†è¿™ä¸ªResultSetä¹‹åå¾—åˆ°çš„æ•°æ®ç±»å‹</span></span><br><span class="line"><span class="comment">    éœ€è¦å¡«å†™ç±»å‹çš„å…¨é™å®šåç§°</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="åˆ›å»ºä¸»é…ç½®æ–‡ä»¶"><a href="#åˆ›å»ºä¸»é…ç½®æ–‡ä»¶" class="headerlink" title="åˆ›å»ºä¸»é…ç½®æ–‡ä»¶"></a>åˆ›å»ºä¸»é…ç½®æ–‡ä»¶</h4><p>å¤åˆ¶ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼Œæ³¨æ„é…ç½®ç›¸å…³çš„å‚æ•°</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/ssm&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;333&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        sqlæ˜ å°„æ–‡ä»¶çš„ä½ç½®--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        ä¸€ä¸ªmapperæ ‡ç­¾æŒ‡å®šäº†ä¸€ä¸ªæ–‡ä»¶çš„æ˜ å°„ä½ç½®ï¼Œä»ç±»è·¯å¾„å¼€å§‹çš„è·¯å¾„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">            ä¹Ÿå°±æ˜¯ä» target/classesçš„ä¸‹é¢å¼€å§‹çš„--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/Jancoyan/Dao/IStudentDao.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœåœ¨mavençš„src&#x2F;mainç›®å½•ä¸‹é¢æ‰‹åŠ¨æ·»åŠ äº†resourcesï¼Œåˆ™åº”è¯¥åœ¨pom.xmlä¸­åŠ ä¸Šä»¥ä¸‹è¯­å¥ï¼š</p>
<p>å¦‚æœæ²¡æœ‰æ‰‹åŠ¨æ·»åŠ ï¼Œå°±ä¸ç”¨åŠ ç¬¬äºŒä¸ªresourceæ ‡ç­¾é‡Œé¢çš„å†…å®¹</p>
<p>ä½œç”¨ï¼šä½¿é…ç½®æ–‡ä»¶åœ¨ç¼–è¯‘çš„æ—¶å€™ä¸ä¼šè¢«æŒªèµ°</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="ç¬¬ä¸€ä¸ªæŸ¥è¯¢ç¨‹åº"><a href="#ç¬¬ä¸€ä¸ªæŸ¥è¯¢ç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ªæŸ¥è¯¢ç¨‹åº"></a>ç¬¬ä¸€ä¸ªæŸ¥è¯¢ç¨‹åº</h4><p>åˆ›å»º IStudentDao æ¥å£ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ æŸ¥æ‰¾å‡½æ•°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentDao</span> &#123;</span><br><span class="line">    List&lt;Student&gt; <span class="title function_">queryAllStudent</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>IStudentDao.xml ä¸­æ·»åŠ </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryAllStudent&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.Jancoyan.Domain.Student&quot;</span>&gt;</span></span><br><span class="line">select * from t_student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>mybatis.xml ä¸­æ·»åŠ </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/Jancoyan/Dao/IStudentDao.xml&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// è®¿é—®MyBatisè¯»å–æ•°æ®</span></span><br><span class="line">        <span class="comment">// 1. å®šä¹‰mybatisä¸»é…ç½®æ–‡ä»¶åç§°ï¼Œä»ç±»è·¯å¾„å¼€å§‹</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">config</span> <span class="operator">=</span> <span class="string">&quot;mybatis.xml&quot;</span>;</span><br><span class="line">        <span class="comment">// 2. è¯»å–è¿™ä¸ªé…ç½®æ–‡ä»¶</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> Resources.getResourceAsStream(config);</span><br><span class="line">        <span class="comment">// 3. åˆ›å»º SqlSessionFactoryBuilder å¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="comment">// 4. åˆ›å»º SqlSessionFactory å¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(in);</span><br><span class="line">        <span class="comment">// 5. [é‡è¦] è·å–sqlSessionå¯¹è±¡ï¼Œä»sqlSessionFactoryä¸­</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line">        <span class="comment">//  6. [é‡è¦] æŒ‡å®šè¦æ‰§è¡Œçš„sqlè¯­å¥çš„è¡¨ç¤º sqlæ˜ å°„æ–‡ä»¶ä¸­çš„namespace + . + æ ‡ç­¾ä¸­çš„ID</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">SqlId</span> <span class="operator">=</span> <span class="string">&quot;com.Jancoyan.Dao.IStudentDao&quot;</span> + <span class="string">&quot;.&quot;</span> + <span class="string">&quot;queryAllStudent&quot;</span>;</span><br><span class="line">        <span class="comment">// 7. æ‰§è¡Œsql</span></span><br><span class="line">        List&lt;Student&gt; students = sqlSession.selectList(SqlId);</span><br><span class="line">        <span class="comment">// 8. è¾“å‡ºç»“æœ</span></span><br><span class="line">        <span class="keyword">for</span> (Student student : students) &#123;System.out.println(student);&#125;</span><br><span class="line">        <span class="comment">// 9. å…³é—­SqlSessionå¯¹è±¡</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç¬¬ä¸€ä¸ªæ’å…¥ç¨‹åº"><a href="#ç¬¬ä¸€ä¸ªæ’å…¥ç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ªæ’å…¥ç¨‹åº"></a>ç¬¬ä¸€ä¸ªæ’å…¥ç¨‹åº</h4><p>IStudentDao æ¥å£ä¸­æ·»åŠ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentDao</span> &#123;</span><br><span class="line">    List&lt;Student&gt; <span class="title function_">queryAllStudent</span><span class="params">()</span>;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">insertStudent</span><span class="params">(Student student)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>IStudentDao.xml ä¸­æ·»åŠ è¯­å¥</p>
<ul>
<li>å…¶ä¸­å‚æ•°ç”¨å ä½ç¬¦è¡¨ç¤ºï¼Œå ä½ç¬¦ä¸­æ˜¯å®ä½“ç±»çš„å±æ€§å</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertStudent&quot;</span> &gt;</span></span><br><span class="line">    insert into t_student values ($&#123;id&#125;, $&#123;name&#125;, $&#123;email&#125;, $&#123;age&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šMyBaitsä¸ä¼šè‡ªåŠ¨æäº¤äº‹åŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ‰‹åŠ¨æäº¤äº‹åŠ¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// è®¿é—®MyBatisè¯»å–æ•°æ®</span></span><br><span class="line">        <span class="comment">// 1. å®šä¹‰mybatisä¸»é…ç½®æ–‡ä»¶åç§°ï¼Œä»ç±»è·¯å¾„å¼€å§‹</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">config</span> <span class="operator">=</span> <span class="string">&quot;mybatis.xml&quot;</span>;</span><br><span class="line">        <span class="comment">// 2. è¯»å–è¿™ä¸ªé…ç½®æ–‡ä»¶</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> Resources.getResourceAsStream(config);</span><br><span class="line">        <span class="comment">// 3. åˆ›å»º SqlSessionFactoryBuilder å¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="comment">// 4. åˆ›å»º SqlSessionFactory å¯¹è±¡</span></span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(in);</span><br><span class="line">        <span class="comment">// 5. [é‡è¦] è·å–sqlSessionå¯¹è±¡ï¼Œä»sqlSessionFactoryä¸­</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> factory.openSession();</span><br><span class="line">        <span class="comment">//  6. [é‡è¦] æŒ‡å®šè¦æ‰§è¡Œçš„sqlè¯­å¥çš„è¡¨ç¤º sqlæ˜ å°„æ–‡ä»¶ä¸­çš„namespace + . + æ ‡ç­¾ä¸­çš„ID</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">SqlId</span> <span class="operator">=</span> <span class="string">&quot;com.Jancoyan.Dao.IStudentDao&quot;</span> + <span class="string">&quot;.&quot;</span> + <span class="string">&quot;insertStudent&quot;</span>;</span><br><span class="line">        <span class="comment">// 7. æ‰§è¡Œsql</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">1211</span>, <span class="string">&quot;aha&quot;</span>, <span class="string">&quot;aha@qq.com&quot;</span>, <span class="number">21</span>);</span><br><span class="line">        sqlSession.insert(SqlId, student);</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        <span class="comment">// 8. è¾“å‡ºç»“æœ</span></span><br><span class="line">        <span class="comment">// 9. å…³é—­SqlSessionå¯¹è±¡</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="æ‰©å±•ï¼šIDEAçš„æ–‡ä»¶æ¨¡æ¿"><a href="#æ‰©å±•ï¼šIDEAçš„æ–‡ä»¶æ¨¡æ¿" class="headerlink" title="æ‰©å±•ï¼šIDEAçš„æ–‡ä»¶æ¨¡æ¿"></a>æ‰©å±•ï¼šIDEAçš„æ–‡ä»¶æ¨¡æ¿</h4><p>ç›´æ¥åˆ›å»ºæ–°å»ºæ–‡ä»¶çš„æ¨¡æ¿</p>
<p><a href="/img/image-20210109101555797.png" title="img/image-20210109101555797." class="gallery-item" style="box-shadow: none;"> <img src="/img/image-20210109101555797.png" alt="img/image-20210109101555797."></a><br>ä»¥ååœ¨åˆ›å»ºæ–‡ä»¶çš„æ—¶å€™å¯ä»¥ç›´æ¥é€‰æ‹©è¿™ä¸ªæ¨¡æ¿å¯¹åº”çš„æ–‡ä»¶äº†</p>
<p><a href="/img/image-20210109101834044.png" title="img/image-20210109101834044." class="gallery-item" style="box-shadow: none;"> <img src="/img/image-20210109101834044.png" alt="img/image-20210109101834044."></a><br><a href="/img/image-20210109101817847.png" title="img/image-20210109101817847." class="gallery-item" style="box-shadow: none;"> <img src="/img/image-20210109101817847.png" alt="img/image-20210109101817847."></a></p>
<p>åŒæ ·çš„æ–¹æ³•åˆ›å»ºäº†ä¸»é…ç½®æ–‡ä»¶<code>mybatis-config</code></p>
<p><a href="/img/image-20210109102158505.png" title="img/image-20210109102158505." class="gallery-item" style="box-shadow: none;"> <img src="/img/image-20210109102158505.png" alt="img/image-20210109102158505."></a></p>
<h3 id="è®¾ç½®åœ¨æ§åˆ¶å°ä¸Šè¾“å‡ºè¿è¡Œæ—¥å¿—"><a href="#è®¾ç½®åœ¨æ§åˆ¶å°ä¸Šè¾“å‡ºè¿è¡Œæ—¥å¿—" class="headerlink" title="è®¾ç½®åœ¨æ§åˆ¶å°ä¸Šè¾“å‡ºè¿è¡Œæ—¥å¿—"></a>è®¾ç½®åœ¨æ§åˆ¶å°ä¸Šè¾“å‡ºè¿è¡Œæ—¥å¿—</h3><p>åœ¨mybatis.xmlä¸­æ·»åŠ </p>
<p><strong>æ³¨æ„</strong> : è¿™ä¸ªå±æ€§å¿…é¡»æ·»åŠ åœ¨ configrationæ ‡ç­¾ä¸­ï¼Œå¹¶ä¸”ä½ç½®ä¸€å®šåªåœ¨ properties çš„ä¸‹é¢ï¼Œåœ¨å…¶ä»–æ ‡ç­¾çš„ä¸Šé¢ï¼Œé¡ºåºä¸èƒ½é”™ï¼ï¼</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¸»è¦ç±»çš„ä»‹ç»"><a href="#ä¸»è¦ç±»çš„ä»‹ç»" class="headerlink" title="ä¸»è¦ç±»çš„ä»‹ç»"></a>ä¸»è¦ç±»çš„ä»‹ç»</h3><p>1ï¼‰Resources : mybatisä¸­çš„ä¸€ä¸ªç±»ï¼Œè´Ÿè´£è¯»å–ä¸»é…ç½®æ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Inputstream in=Resources.getResourceAsstreamï¼ˆ<span class="string">&quot;mybatis.xml&quot;</span>ï¼‰ï¼›</span><br></pre></td></tr></table></figure>
<p>2ï¼‰SqlessionFactoryBuilderï¼šåˆ›å»ºsqlsessionFactoryå¯¹è±¡ï¼Œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SqlSessionFactoryBuilder builder=<span class="keyword">new</span> <span class="title class_">sqlsessionFactoryBuilder</span>ï¼ˆï¼‰ï¼›</span><br><span class="line"><span class="comment">//åˆ›å»ºsqlsessionFactoryå¯¹è±¡</span></span><br><span class="line">SqlSessionFactory factory=builder.buildï¼ˆinï¼‰ï¼›</span><br></pre></td></tr></table></figure>

<p>3ï¼‰sqlsessionFactoryï¼šé‡é‡çº§å¯¹è±¡ï¼Œç¨‹åºåˆ›å»ºä¸€ä¸ªå¯¹è±¡è€—æ—¶æ¯”è¾ƒé•¿ï¼Œä½¿ç”¨èµ„æºæ¯”è¾ƒå¤šã€‚ åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ï¼Œæœ‰ä¸€ä¸ªå°±å¤Ÿç”¨äº†ã€‚</p>
<p>SqlsessionFactoryï¼šæ¥å£<br>æ¥å£å®ç°ç±»ï¼šDefaultscqlsessionFactory<br>ä½œç”¨: è·å–sqlsessionå¯¹è±¡ã€‚<code>sqlsession sqlsession=factory.opensession();</code></p>
<p>opensessionï¼ˆï¼‰æ–¹æ³•è¯´æ˜ï¼š</p>
<ol>
<li>opensessionï¼ˆï¼‰ï¼šæ— å‚æ•°çš„ï¼Œè·å–æ˜¯éè‡ªåŠ¨æäº¤äº‹åŠ¡çš„sqlsessionå¯¹è±¡</li>
<li>openSessionï¼ˆbooleanï¼‰ï¼šopensessionï¼ˆtrueï¼‰è·å–è‡ªåŠ¨æäº¤äº‹åŠ¡çš„sqlsession ;   opensessionï¼ˆfalseï¼‰éè‡ªåŠ¨æäº¤äº‹åŠ¡çš„sqlsessionå¯¹è±¡</li>
</ol>
<p>4ï¼‰ SqlSession:</p>
<p>æ¥å£ï¼Œå®šä¹‰äº†æ“ä½œæ•°æ®çš„æ–¹æ³•ï¼Œä¾‹å¦‚ selectOnt(), SelectList(), insert(), update()ç­‰</p>
<p>å®ç°ç±»ä¸º DefaultSqlSession</p>
<p>ä½¿ç”¨è¦æ±‚ï¼šSqlSessionå¯¹è±¡ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œéœ€è¦åœ¨æ–¹æ³•çš„å†…éƒ¨ä½¿ç”¨ï¼Œåœ¨æ‰§è¡Œsqlè¯­å¥ä¹‹å‰ï¼Œä½¿ç”¨openSession()è·å–SqlSessionï¼Œåœ¨æ‰§è¡Œå®Œsqlè¯­å¥ä¹‹åéœ€è¦å…³é—­ï¼Œè¿™æ ·èƒ½ä¿è¯ä»–æ˜¯çº¿ç¨‹å®‰å…¨çš„</p>
<h3 id="MyBatisUtilså·¥å…·ç±»"><a href="#MyBatisUtilså·¥å…·ç±»" class="headerlink" title="MyBatisUtilså·¥å…·ç±»"></a>MyBatisUtilså·¥å…·ç±»</h3><ul>
<li>ç”¨æ¥è·å–SqlSession</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.Jancoyan.Utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// éœ€è¦å’Œé¡¹ç›®ä¸­çš„ä¸»è¦é…ç½®æ–‡ä»¶ä¸€æ ·</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">config</span> <span class="operator">=</span> <span class="string">&quot;mybatis.xml&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> Resources.getResourceAsStream(config);</span><br><span class="line">            <span class="comment">// ä½¿ç”¨SqlSessionBuilderåˆ›å»ºfactoryå¯¹è±¡</span></span><br><span class="line">            factory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(in);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–SqlSessionæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">getSqlSession</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(factory != <span class="literal">null</span>)&#123;</span><br><span class="line">            sqlSession = factory.openSession();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>  sqlSession;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ‰äº†è¿™ä¸ªå·¥å…·ç±»ä¹‹åï¼Œåªéœ€è¦ä½¿ç”¨å·¥å…·ç±»æ¥è·å–SqlSessionå³å¯</p>
<p>æ‹¿ä¸Šé¢çš„ç¬¬äºŒä¸ªä¾‹å­æ¥è¯´ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">    <span class="type">String</span> <span class="variable">SqlId</span> <span class="operator">=</span> <span class="string">&quot;com.Jancoyan.Dao.IStudentDao&quot;</span> + <span class="string">&quot;.&quot;</span> + <span class="string">&quot;insertStudent&quot;</span>;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">121</span>, <span class="string">&quot;aa&quot;</span>, <span class="string">&quot;ha@qq.com&quot;</span>, <span class="number">21</span>);</span><br><span class="line">    sqlSession.insert(SqlId, student);</span><br><span class="line">    sqlSession.commit();</span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Daoä»£ç†ã€é‡ç‚¹ã€‘"><a href="#Daoä»£ç†ã€é‡ç‚¹ã€‘" class="headerlink" title="Daoä»£ç†ã€é‡ç‚¹ã€‘"></a>Daoä»£ç†ã€é‡ç‚¹ã€‘</h2><h3 id="å®ç°æ•°æ®åº“æ“ä½œ"><a href="#å®ç°æ•°æ®åº“æ“ä½œ" class="headerlink" title="å®ç°æ•°æ®åº“æ“ä½œ"></a>å®ç°æ•°æ®åº“æ“ä½œ</h3><p>mybatisæ ¹æ®daoæ–¹æ³•çš„è°ƒç”¨è·å–æ‰§è¡Œsqlè¯­å¥çš„ä¿¡æ¯ã€‚mybatisæ ¹æ®ä½ çš„daoæ¥å£åˆ›å»ºå‡ºä¸€ä¸ªdaoæ¥å£çš„å®ç°ç±»ï¼Œå¹¶åˆ›å»ºè¿™ä¸ªç±»çš„å¯¹è±¡ï¼Œå®ŒæˆSqlSessionæ–¹æ³•è®¿é—®æ•°æ®åº“ã€‚</p>
<p><strong>ä¸éœ€è¦å†å†™æ¥å£çš„å®ç°ç±»ï¼ï¼ï¼</strong></p>
<p>åªéœ€è¦å†™æ¥å£å’Œå¯¹åº”çš„sqlæ˜ å°„æ–‡ä»¶ï¼Œä½¿ç”¨mybatisçš„åŠ¨æ€ä»£ç†æœºåˆ¶ï¼Œä½¿ç”¨SqlSession.getMapper(Daoæ¥å£.class)ï¼Œå°±èƒ½è·å–daoæ¥å£å¯¹åº”äºå®ç°ç±»çš„å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">    <span class="type">IStudentDao</span> <span class="variable">dao</span> <span class="operator">=</span> sqlSession.getMapper(IStudentDao.class);</span><br><span class="line">     <span class="comment">// æ ¹æ®Mapperè·å–</span></span><br><span class="line">    <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">1251</span>, <span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;haa@qq.com&quot;</span>, <span class="number">21</span>);</span><br><span class="line">    dao.insertStudent(student); <span class="comment">// ç›´æ¥è°ƒç”¨daoçš„insertæ–¹æ³•</span></span><br><span class="line">    sqlSession.commit(); <span class="comment">//éœ€è¦æäº¤äº‹åŠ¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç†è§£æ˜ å°„æ–‡ä»¶çš„å‚æ•°"><a href="#ç†è§£æ˜ å°„æ–‡ä»¶çš„å‚æ•°" class="headerlink" title="ç†è§£æ˜ å°„æ–‡ä»¶çš„å‚æ•°"></a>ç†è§£æ˜ å°„æ–‡ä»¶çš„å‚æ•°</h3><h4 id="äº†è§£-parameterType"><a href="#äº†è§£-parameterType" class="headerlink" title="[äº†è§£]parameterType"></a>[äº†è§£]parameterType</h4><p>å†™åœ¨ï¼Œmapperæ–‡ä»¶ä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œè¡¨ç¤ºdaoæ¥å£ä¸­æ–¹æ³•çš„å‚æ•°ç±»å‹ã€‚ä»–çš„å€¼æ˜¯javaæ•°æ®ç±»å‹å…¨åç§°æˆ–è€…æ˜¯mybatiså®šä¹‰çš„åˆ«å - åœ¨mybatiså¸®åŠ©æ–‡æ¡£ä¸­å¯ä»¥æŸ¥çœ‹</p>
<p>æ³¨æ„ï¼šè¿™ä¸ªå±æ€§ä¸æ­¢æ˜¯å¼ºåˆ¶çš„ï¼Œmybatisé€šè¿‡åå°„æœºåˆ¶èƒ½å¤Ÿå‘ç°æ¥å£å‚æ•°çš„æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥æ²¡æœ‰ï¼Œ<strong>ä¸€èˆ¬æˆ‘ä»¬ä¹Ÿä¸å†™</strong></p>
<h4 id="æŒæ¡-ä¸€ä¸ªç®€å•å‚æ•°ï¼ˆJavaåŸºæœ¬ç±»å‹å’Œå­—ç¬¦ä¸²éƒ½æ˜¯ç®€å•ç±»å‹ï¼‰"><a href="#æŒæ¡-ä¸€ä¸ªç®€å•å‚æ•°ï¼ˆJavaåŸºæœ¬ç±»å‹å’Œå­—ç¬¦ä¸²éƒ½æ˜¯ç®€å•ç±»å‹ï¼‰" class="headerlink" title="[æŒæ¡]ä¸€ä¸ªç®€å•å‚æ•°ï¼ˆJavaåŸºæœ¬ç±»å‹å’Œå­—ç¬¦ä¸²éƒ½æ˜¯ç®€å•ç±»å‹ï¼‰"></a>[æŒæ¡]ä¸€ä¸ªç®€å•å‚æ•°ï¼ˆJavaåŸºæœ¬ç±»å‹å’Œå­—ç¬¦ä¸²éƒ½æ˜¯ç®€å•ç±»å‹ï¼‰</h4><p>è·å–ç®€å•ç±»å‹çš„å‚æ•°å€¼ï¼Œæ ¼å¼ä¸ºï¼š <code>#&#123;ä»»æ„å­—ç¬¦ä¸²&#125;</code></p>
<p>æ·±å…¥ç†è§£ï¼šä½¿ç”¨#{}ä¹‹åï¼Œmybatisä½¿ç”¨çš„jdbcä¸­çš„PreparedStatmentå¯¹è±¡ï¼Œç”±Mybatisæ‰§è¡Œä»¥ä¸‹ä»£ç :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾æŸ¥è¯¢è¿”å›ä¸€ä¸ªå­¦ç”Ÿå¯¹è±¡</span></span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span>  <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="type">PreparedStatment</span> <span class="variable">ps</span> <span class="operator">=</span> conn.preparedStatment(sql);</span><br><span class="line">ps.setInt()...;</span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> ps.executeQuery();</span><br><span class="line"><span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">stu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>;</span><br><span class="line">    stu.setId(rs.getString(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> stu;</span><br></pre></td></tr></table></figure>



<h4 id="æŒæ¡-å¤šä¸ªå‚æ•°-ä½¿ç”¨-param-å®˜æ–¹æ¨è"><a href="#æŒæ¡-å¤šä¸ªå‚æ•°-ä½¿ç”¨-param-å®˜æ–¹æ¨è" class="headerlink" title="[æŒæ¡]å¤šä¸ªå‚æ•°-ä½¿ç”¨@param[å®˜æ–¹æ¨è]"></a>[æŒæ¡]å¤šä¸ªå‚æ•°-ä½¿ç”¨@param[å®˜æ–¹æ¨è]</h4><p>å¤šä¸ªå‚æ•°ï¼Œåœ¨æ¥å£çš„å½¢å‚å‰é¢åŠ ä¸Š @paramï¼Œmapperæ–‡ä»¶ä¸­å°±å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªåç§°æ¥å ä½</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IStudentDao.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentDao</span> &#123;</span><br><span class="line">    List&lt;Student&gt; <span class="title function_">selectStudentByAge</span><span class="params">(<span class="meta">@Param(&quot;stuAge&quot;)</span> <span class="type">int</span> age)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- IStudentDao.xml --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectStudentByAge&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.Jancoyan.Domain.Student&quot;</span>&gt;</span></span><br><span class="line">        select * from t_student where age = #&#123;stuAge&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h4 id="æŒæ¡-å¤šä¸ªå‚æ•°-ä½¿ç”¨å¯¹è±¡"><a href="#æŒæ¡-å¤šä¸ªå‚æ•°-ä½¿ç”¨å¯¹è±¡" class="headerlink" title="[æŒæ¡]å¤šä¸ªå‚æ•°-ä½¿ç”¨å¯¹è±¡"></a>[æŒæ¡]å¤šä¸ªå‚æ•°-ä½¿ç”¨å¯¹è±¡</h4><p>mapperæ–‡ä»¶ä¸­çš„å ä½ç¬¦ä¸ç±»ä¸­çš„å±æ€§å’Œæ•°æ®åº“è¡¨çš„å±æ€§ä¸€ä¸€å¯¹åº”</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IStudentDao.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentDao</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">insertStudent</span><span class="params">(Student student)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--IStudentDao.xml--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertStudent&quot;</span> &gt;</span></span><br><span class="line">        insert into t_student values (#&#123;id&#125;, #&#123;name&#125;, #&#123;email&#125;, #&#123;age&#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Test</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">        <span class="type">IStudentDao</span> <span class="variable">dao</span> <span class="operator">=</span> sqlSession.getMapper(IStudentDao.class);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">1251</span>, <span class="string">&quot;aaa&quot;</span>, <span class="string">&quot;haa@qq.com&quot;</span>, <span class="number">21</span>);</span><br><span class="line">        dao.insertStudent(student);</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h4 id="æŒæ¡-å’Œ"><a href="#æŒæ¡-å’Œ" class="headerlink" title="[æŒæ¡] # å’Œ $"></a>[æŒæ¡] # å’Œ $</h4><p>é¦–é€‰æ–¹æ¡ˆæ˜¯  #</p>
<ul>
<li>å®‰å…¨æ€§é«˜ï¼Œé¿å…SQLæ³¨å…¥</li>
<li>æ•ˆç‡é«˜</li>
</ul>
<p>ä¸å»ºè®®ä½¿ç”¨  $</p>
<p><code>#</code>è¡¨ç¤ºå ä½ç¬¦â€˜ï¼Ÿâ€™ ä½¿ç”¨çš„æ˜¯PreparedStatement</p>
<p>è€Œ$è¡¨ç¤ºå­—ç¬¦ä¸²çš„æ‹¼æ¥,ä½¿ç”¨çš„æ˜¯ Statementï¼Œå®‰å…¨æ€§ä½ï¼Œè€Œä¸”ç”¨èµ·æ¥æ¯”è¾ƒéº»çƒ¦</p>
<p>å½“ä½ èƒ½ä¿è¯sqlè¯­å¥æ˜¯ç»å¯¹å®‰å…¨çš„æ—¶å€™å°±å¯ä»¥ä½¿ç”¨$ï¼Œæ¯”å¦‚æ›¿æ¢åˆ—åæˆ–è€…è¡¨åï¼š</p>
<p>ç”¨ä¸€ä¸ªå‡½æ•°å®ç°æ ¹æ®ä»»æ„å­—æ®µæ’åº</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IStudentDao.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentDao</span> &#123;</span><br><span class="line">    List&lt;Student&gt; <span class="title function_">selectStudentByOrder</span><span class="params">(String order)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--IStudentDao.xml--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectStudentByOrder&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.Jancoyan.Domain.Student&quot;</span>&gt;</span></span><br><span class="line">        select * from t_student order by $&#123;order&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testOrder</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">        <span class="type">IStudentDao</span> <span class="variable">studentDao</span> <span class="operator">=</span> sqlSession.getMapper(IStudentDao.class);</span><br><span class="line">        List&lt;Student&gt; students = studentDao.selectStudentByOrder(<span class="string">&quot;id&quot;</span>); <span class="comment">// ä¼šæ ¹æ®ä¼ å…¥çš„å­—æ®µè¿›è¡Œæ’åº</span></span><br><span class="line">        <span class="keyword">for</span> (Student student :</span><br><span class="line">                students) &#123;</span><br><span class="line">            System.out.println(student);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ï¼š</p>
<ol>
<li><code>#</code>ä½¿ç”¨ï¼Ÿåœ¨sq1è¯­å¥ä¸­åšç«™ä½çš„ï¼Œä½¿ç”¨PreparedStatementæ‰§è¡Œsqlï¼Œæ•ˆç‡é«˜</li>
<li><code>#</code>èƒ½å¤Ÿé¿å…sqlæ³¨å…¥ï¼Œæ›´å®‰å…¨ã€‚</li>
<li>$ä¸ä½¿ç”¨å ä½ç¬¦ï¼Œæ˜¯å­—ç¬¦ä¸²è¿æ¥æ–¹å¼ï¼Œä½¿ç”¨Statementå¯¹è±¡æ‰§è¡Œsqlï¼Œæ•ˆç‡ä½</li>
<li>$æœ‰sqlæ³¨å…¥çš„é£é™©ï¼Œç¼ºä¹å®‰å…¨æ€§ã€‚</li>
<li>$ï¼šå¯ä»¥æ›¿æ¢è¡¨åæˆ–è€…åˆ—å</li>
</ol>
<h3 id="resultTypeç»“æœå°è£…"><a href="#resultTypeç»“æœå°è£…" class="headerlink" title="resultTypeç»“æœå°è£…"></a>resultTypeç»“æœå°è£…</h3><p>resultSetæ˜¯mybatisçš„è¾“å‡ºç»“æœï¼Œæ˜¯mybatisæ‰§è¡Œäº†sqlè¯­å¥ï¼Œå¾—åˆ°çš„javaå¯¹è±¡ã€‚</p>
<p>resultTypeç»“æœç±»å‹ï¼ŒæŒ‡sqlæ‰§è¡Œå®Œæ¯•åï¼Œæ•°æ®è½¬ä¸ºçš„javaå¯¹è±¡ï¼Œç±»å‹æ˜¯<strong>ä»»æ„çš„</strong>,åªè¦èƒ½è½¬åŒ–å°±è¡Œã€‚</p>
<p>resultTypeå€¼å¯ä»¥æ˜¯å…¨é™å®šåç§°ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ«åï¼Œ æˆ–è€…è‡ªå®šä¹‰åˆ«å</p>
<p>å¤„ç†æ–¹å¼ï¼š</p>
<ol>
<li><p>mybatisæ‰§è¡Œsqlè¯­å¥ï¼Œç„¶åmybatisè°ƒç”¨ç±»çš„æ— å‚æ•°æ„é€ æ–¹æ³•ï¼Œåˆ›å»ºå¯¹è±¡ã€‚</p>
</li>
<li><p>mybatisæŠŠResultSetæŒ‡å®šåˆ—å€¼èµ‹å€¼ç»™åŒåçš„å±æ€§ï¼Œå¤šä½™çš„æˆ–è€…ä¸åŒçš„ä¼š<strong>å¿½ç•¥æ‰</strong></p>
</li>
</ol>
<p>å¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¯ä»¥æ”¾åˆ«åï¼ˆint&#x2F;doubleç­‰ï¼‰ä¹Ÿå¯ä»¥æ”¾ç±»å‹çš„å…¨é™å®šåç§°(java.lang.Integer&#x2F; java.lang.Double)</p>
<p>å®šä¹‰è‡ªå®šä¹‰ç±»å‹çš„åˆ«åï¼š</p>
<p> æ–¹æ³•ä¸€: ä¸ºæŸä¸ªç±»æŒ‡å®šåˆ«å</p>
<p>åœ¨ä¸»é…ç½®æ–‡ä»¶ mybatis.xml ä¸­çš„typeAliasesæ ‡ç­¾ä¸­è®¾ç½®åˆ«åï¼Œè¿™ä¸ªæ ‡ç­¾å†™åœ¨environments çš„ä¸Šé¢ï¼Œsettingsçš„ä¸‹é¢</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatis.xml--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.Jancoyan.Domain.Student&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;student&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ–¹æ³•äºŒï¼šä¸ºæŸä¸ªåŒ…ä¸­çš„æ‰€æœ‰ç±»æŒ‡å®šåˆ«åï¼Œåˆ«åä¸ºç±»çš„åç§°ï¼Œä¸åŒºåˆ†å¤§å°å†™**[å®é™…å¼€å‘ä¸­ä½¿ç”¨å±…å¤š]**</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatis.xml--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.Jancoyan.Domain.Student&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;student&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.Jancoyan.Domain&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæœ‰ä¸¤ä¸ªåŒ…ä¸­çš„ä¸¤ä¸ªç±»åæ˜¯ä¸€æ ·çš„ï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œæ­¤æ—¶åº”è¯¥ä½¿ç”¨å…¨é™å®šååç§°</p>
<p>å¦‚æœç»“æœè¿”å›mapï¼Œåˆ™åªèƒ½è¿”å›ä¸€è¡Œï¼Œä¸å»ºè®®ä½¿ç”¨mapæ¥å—è¿”å›å€¼ã€‚</p>
<p> resultMapç»“æœæ˜ å°„ï¼ŒæŒ‡å®šåˆ—åå’Œjavaå¯¹è±¡çš„å±æ€§å¯¹åº”å…³ç³»</p>
<ul>
<li>è‡ªå®šä¹‰åˆ—å€¼èµ‹å€¼ç»™å“ªä¸ªå±æ€§</li>
<li>å½“<strong>åˆ—åå’Œå±æ€§åä¸ä¸€æ ·</strong>çš„æ—¶å€™ä¸€å®šä½¿ç”¨resultMap</li>
</ul>
<p>ä½¿ç”¨resultMapï¼š</p>
<ul>
<li>å…ˆå®šä¹‰resultMapï¼ˆå¯ä»¥å¤ç”¨ï¼‰</li>
<li>å†åœ¨selectæ ‡ç­¾ä¸­ä½¿ç”¨resultMapæ¥å¼•ç”¨å®šä¹‰</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    å®šä¹‰resultMap</span></span><br><span class="line"><span class="comment">    idï¼šè‡ªå®šä¹‰åç§°ï¼Œè¡¨ç¤ºä½ å®šä¹‰çš„è¿™ä¸ªresultMao</span></span><br><span class="line"><span class="comment">    typeï¼šjavaç±»å‹çš„å…¨é™å®šåç§°</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;studentMao&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.Jancoyan.Domain.Student&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        ä¸»é”®ç”¨id--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        å°†columnçš„å€¼èµ‹å€¼ç»™propertyçš„å€¼--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        éä¸»é”®ç”¨result--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;email&quot;</span> <span class="attr">property</span>=<span class="string">&quot;email&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertStudent&quot;</span> &gt;</span></span><br><span class="line">        insert into t_student values (#&#123;id&#125;, #&#123;name&#125;, #&#123;email&#125;, #&#123;age&#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šresultMap å’Œ resultType ä¸èƒ½ä¸€èµ·ç”¨</p>
<p>é€†å‘æ€ç»´ï¼Œå¦‚æœåˆ—åå’Œå±æ€§åä¸ä¸€æ ·ï¼Œæœ‰å“ªäº›æ–¹æ³•å¯ä»¥è·å–å‚æ•°å€¼?</p>
<ol>
<li>å®šä¹‰resultMapï¼Œä¸åŒçš„åˆ—èµ‹ç»™ä¸åŒçš„å±æ€§</li>
<li>ã€æ¨èã€‘åœ¨sqlè¯­å¥ä¸­ç»™åˆ—èµ·åˆ«å  selece name as stuNameâ€¦</li>
</ol>
<h3 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢"></a>æ¨¡ç³ŠæŸ¥è¯¢</h3><ol>
<li>åœ¨javaä»£ç ä¸­æŒ‡å®šlikeçš„å†…å®¹ã€æ¨èã€‘</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IStudentDao.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentDao</span> &#123;</span><br><span class="line">   List&lt;Student&gt; <span class="title function_">selectLikeOne</span><span class="params">(String name)</span>; <span class="comment">// åœ¨javaä»£ç ä¸­æŒ‡å®šlikeçš„å†…å®¹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--IStudentDao.xml--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectLikeOne&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.Jancoyan.Domain.Student&quot;</span>&gt;</span></span><br><span class="line">        select * from t_student where name like #&#123;name&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testLike</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">        <span class="type">IStudentDao</span> <span class="variable">studentDao</span> <span class="operator">=</span> sqlSession.getMapper(IStudentDao.class);</span><br><span class="line">        <span class="comment">// æŒ‡å®šåŒ¹é…çš„å½¢å¼</span></span><br><span class="line">        List&lt;Student&gt; students = studentDao.selectLikeOne(<span class="string">&quot;%haha%&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Student student :</span><br><span class="line">                students) &#123;</span><br><span class="line">            System.out.println(student);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨mapperä¸­æ‹¼æ¥</li>
</ol>
<p>æ¥å£å®šä¹‰å’Œç¬¬ä¸€ç§ä¸€æ ·</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--IStudentDao.xml--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectLikeOne&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.Jancoyan.Domain.Student&quot;</span>&gt;</span></span><br><span class="line">        select id,name,email,age from student where name  like &quot;%&quot; #&#123;name&#125; &quot;%&quot;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testLike</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">        <span class="type">IStudentDao</span> <span class="variable">studentDao</span> <span class="operator">=</span> sqlSession.getMapper(IStudentDao.class);</span><br><span class="line">        <span class="comment">// æŒ‡å®šåŒ¹é…çš„å½¢å¼</span></span><br><span class="line">        List&lt;Student&gt; students = studentDao.selectLikeOne(<span class="string">&quot;haha&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Student student :</span><br><span class="line">                students) &#123;</span><br><span class="line">            System.out.println(student);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="åŠ¨æ€SQLã€ç†è§£ã€‘"><a href="#åŠ¨æ€SQLã€ç†è§£ã€‘" class="headerlink" title="åŠ¨æ€SQLã€ç†è§£ã€‘"></a>åŠ¨æ€SQLã€ç†è§£ã€‘</h2><p> åŠ¨æ€sql: sqlçš„å†…å®¹æ˜¯å˜åŒ–çš„ï¼Œå¯ä»¥æ ¹æ®æ¡ä»¶è·å–åˆ°ä¸åŒçš„sqlè¯­å¥ã€‚ä¸»è¦æ˜¯whereéƒ¨åˆ†å‘ç”Ÿå˜åŒ–ã€‚</p>
<p> åŠ¨æ€sqlçš„å®ç°ï¼Œä½¿ç”¨çš„æ˜¯mybatisæä¾›çš„æ ‡ç­¾<code> &lt;if&gt; ,&lt;where&gt;,&lt;foreach&gt;</code></p>
<ol>
<li>&lt; if &gt;æ˜¯åˆ¤æ–­æ¡ä»¶çš„ï¼Œ   è¯­æ³•&lt; if test&#x3D;â€åˆ¤æ–­javaå¯¹è±¡çš„å±æ€§å€¼â€ &gt;éƒ¨åˆ†sqlè¯­å¥	&lt; &#x2F;if&gt;</li>
<li>&lt; where &gt; ç”¨æ¥åŒ…å« å¤šä¸ª&lt; if &gt;çš„ï¼Œ å½“å¤šä¸ªifæœ‰ä¸€ä¸ªæˆç«‹çš„ï¼Œ &lt; where &gt;ä¼šè‡ªåŠ¨å¢åŠ ä¸€ä¸ªwhereå…³é”®å­—ï¼Œå¹¶å»æ‰ ifä¸­å¤šä½™çš„ and ï¼Œorç­‰ã€‚è¿™æ ·å°±ä¸ç”¨åœ¨è¯­å¥ä¸­å¤šå†™ä¸€ä¸ª where 1  &#x3D; 1 äº†</li>
<li>&lt; foreach &gt; å¾ªç¯javaä¸­çš„æ•°ç»„ï¼Œlisté›†åˆçš„ã€‚ ä¸»è¦ç”¨åœ¨sqlçš„inè¯­å¥ä¸­ã€‚</li>
</ol>
<h3 id="if"><a href="#if" class="headerlink" title="&lt; if &gt;"></a>&lt; if &gt;</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IStudentDao.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentDao</span> &#123;</span><br><span class="line">    List&lt;Student&gt; <span class="title function_">selectStudentIf</span><span class="params">(Student student)</span>; <span class="comment">// æµ‹è¯• if</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼ï¼ï¼ï¼</p>
<p>åœ¨è¿™é‡Œå¤šå†™äº†ä¸€å¥  <code>where 1 = 1</code> æ˜¯ä¸ºäº†é˜²æ­¢ç¬¬ä¸€ä¸ªifåŒ¹é…å¤±è´¥è€Œç¬¬äºŒä¸ªifåŒ¹é…æˆåŠŸæ—¶ï¼Œsqlè¯­å¥å‘ç”Ÿçš„è¯­æ³•é”™è¯¯ã€‚åŠ ä¸Šä¹‹åå°±ä¸ä¼šå‡ºé”™äº†ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--IStudentDao.java--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectStudentIf&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.Jancoyan.Domain.Student&quot;</span>&gt;</span></span><br><span class="line">        select * from t_student</span><br><span class="line">        where 1 = 1</span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27; &quot;</span>&gt;</span></span><br><span class="line">            and name != #&#123;name&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age &gt; 10&quot;</span>&gt;</span></span><br><span class="line">            and age &gt; 20</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testIf</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">        <span class="type">IStudentDao</span> <span class="variable">studentDao</span> <span class="operator">=</span> sqlSession.getMapper(IStudentDao.class);</span><br><span class="line">        List&lt;Student&gt; students = studentDao.selectStudentIf(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">1003</span>, <span class="string">&quot;haha&quot;</span>, <span class="string">&quot;haha@qq.com&quot;</span>, <span class="number">20</span>));</span><br><span class="line">        <span class="keyword">for</span> (Student student :</span><br><span class="line">                students) &#123;</span><br><span class="line">            System.out.println(student);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="where"><a href="#where" class="headerlink" title="&lt; where &gt;"></a>&lt; where &gt;</h3> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IStudentDao.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentDao</span> &#123;</span><br><span class="line">     List&lt;Student&gt; <span class="title function_">selectStudentWhere</span><span class="params">(Student student)</span>; <span class="comment">// æµ‹è¯• if</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--IStudentDao.xml--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectStudentWhere&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.Jancoyan.Domain.Student&quot;</span>&gt;</span></span><br><span class="line">        select * from t_student</span><br><span class="line">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age &gt; 20&quot;</span>&gt;</span></span><br><span class="line">                and age <span class="symbol">&amp;lt;</span> 30</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;age &gt; 30&quot;</span>&gt;</span></span><br><span class="line">                and age <span class="symbol">&amp;lt;</span> 40</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testWhere</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">        <span class="type">IStudentDao</span> <span class="variable">studentDao</span> <span class="operator">=</span> sqlSession.getMapper(IStudentDao.class);</span><br><span class="line">        List&lt;Student&gt; students = studentDao.selectStudentWhere(<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">for</span> (Student student : students) &#123;</span><br><span class="line">            System.out.println(student);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h3 id="foreach"><a href="#foreach" class="headerlink" title="&lt; foreach &gt;"></a>&lt; foreach &gt;</h3><p>è¯­æ³•ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;&quot;</span> <span class="attr">item</span>=<span class="string">&quot;&quot;</span> <span class="attr">open</span>=<span class="string">&quot;&quot;</span> <span class="attr">close</span>=<span class="string">&quot;&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">             #&#123;xxx&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>collection:è¡¨ç¤ºæ¥å£ä¸­çš„æ–¹æ³•å‚æ•°çš„ç±»å‹ï¼Œ å¦‚æœæ˜¯æ•°ç»„ä½¿ç”¨<strong>array</strong> , å¦‚æœæ˜¯listé›†åˆä½¿ç”¨<strong>list</strong></p>
</li>
<li><p>item:è‡ªå®šä¹‰çš„ï¼Œè¡¨ç¤ºæ•°ç»„å’Œé›†åˆæˆå‘˜çš„å˜é‡</p>
</li>
<li><p>open:å¾ªç¯å¼€å§‹æ˜¯çš„å­—ç¬¦</p>
</li>
<li><p>close:å¾ªç¯ç»“æŸæ—¶çš„å­—ç¬¦</p>
</li>
<li><p>separator:é›†åˆæˆå‘˜ä¹‹é—´çš„åˆ†éš”ç¬¦</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IStudentDao.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IStudentDao</span> &#123;</span><br><span class="line">    List&lt;Student&gt; <span class="title function_">selectStudentCollection</span><span class="params">(List&lt;Integer&gt; ages)</span>; <span class="comment">// å¹´é¾„é›†åˆ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--IStudentDao.xml--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectStudentCollection&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.Jancoyan.Domain.Student&quot;</span>&gt;</span></span><br><span class="line">        select * from  t_student where id in</span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;age&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">            #&#123;age&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testColletion</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MyBatisUtils.getSqlSession();</span><br><span class="line">        <span class="type">IStudentDao</span> <span class="variable">studentDao</span> <span class="operator">=</span> sqlSession.getMapper(IStudentDao.class);</span><br><span class="line">        List&lt;Integer&gt; ages = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ages.add(<span class="number">21</span>);</span><br><span class="line">        ages.add(<span class="number">20</span>);</span><br><span class="line">        List&lt;Student&gt; students = studentDao.selectStudentCollection(ages);</span><br><span class="line">        <span class="keyword">for</span> (Student student : students) &#123;</span><br><span class="line">            System.out.println(student);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="SQLä»£ç ç‰‡æ®µ"><a href="#SQLä»£ç ç‰‡æ®µ" class="headerlink" title="SQLä»£ç ç‰‡æ®µ"></a>SQLä»£ç ç‰‡æ®µ</h3><p>sqlä»£ç ç‰‡æ®µï¼Œ å°±æ˜¯å¤ç”¨ä¸€äº›è¯­æ³•</p>
<p>æ­¥éª¤</p>
<ol>
<li>å…ˆå®šä¹‰ &lt; sql id&#x3D;â€è‡ªå®šä¹‰åç§°å”¯ä¸€â€ &gt;  sqlè¯­å¥ï¼Œ è¡¨åï¼Œå­—æ®µç­‰ &lt; &#x2F;sql&gt;</li>
<li>å†ä½¿ç”¨ï¼Œ &lt; include refid&#x3D;â€idçš„å€¼â€ &#x2F;&gt;</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;sql_1&quot;</span>&gt;</span></span><br><span class="line">    select * from t_student</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectLikeOne&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.Jancoyan.Domain.Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;sql_1&quot;</span> /&gt;</span> where name like #&#123;name&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="æ•°æ®åº“é…ç½®æ–‡ä»¶"><a href="#æ•°æ®åº“é…ç½®æ–‡ä»¶" class="headerlink" title="æ•°æ®åº“é…ç½®æ–‡ä»¶"></a>æ•°æ®åº“é…ç½®æ–‡ä»¶</h2><p>åœ¨resourceç›®å½•ä¸‹åˆ›å»ºå±æ€§é…ç½®æ–‡ä»¶ï¼Œå°†æ•°æ®åº“ä¿¡æ¯éƒ½æ”¾åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚å’ŒMybatisä¸»é…ç½®æ–‡ä»¶åˆ†å¼€ï¼Œä¾¿äºä¿®æ”¹å’Œä¿å­˜ã€‚</p>
<p>æ–‡ä»¶çš„å†…å®¹ä¸º key&#x3D;valueï¼Œç›®çš„æ˜¯ä¾¿äºä¿®æ”¹å’Œä¿å­˜ï¼Œå¤„ç†æ•°æ®ï¼Œå»ºè®®keyå†™å¤šçº§ç›®å½•ï¼Œæ¯”å¦‚</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/springdb</span></span><br><span class="line"><span class="attr">jdbc.user</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.passwd</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure>

<h1 id="MyBatisé€†å‘å·¥ç¨‹-MyBatis-Generatorçš„ä½¿ç”¨"><a href="#MyBatisé€†å‘å·¥ç¨‹-MyBatis-Generatorçš„ä½¿ç”¨" class="headerlink" title="MyBatisé€†å‘å·¥ç¨‹ - MyBatis Generatorçš„ä½¿ç”¨"></a>MyBatisé€†å‘å·¥ç¨‹ - MyBatis Generatorçš„ä½¿ç”¨</h1><blockquote>
<p>å®˜ç½‘ ï¼š <a target="_blank" rel="noopener" href="http://mybatis.org/generator/">http://mybatis.org/generator/</a></p>
</blockquote>
<ol>
<li><p>æ·»åŠ ä¾èµ– ã€å¼•å…¥jaråŒ…</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">&lt;!-- pom.xml --&gt;</span></span><br><span class="line">   </span><br><span class="line"><span class="comment">&lt;!-- MBG --&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.generator/mybatis-generator-core --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨é¡¹ç›®ä¸»ç›®å½•ä¸‹åˆ›å»º<code>mbg.xml</code> ï¼ˆä¹Ÿå°±æ˜¯å’Œpom.xmlä¸€ä¸ªç›®å½•ï¼‰</p>
<blockquote>
<p>MyBatis Generator å®˜æ–¹ç»™å‡ºäº†xmlæ–‡ä»¶çš„ç¤ºä¾‹ <a target="_blank" rel="noopener" href="http://mybatis.org/generator/configreference/xmlconfig.html">http://mybatis.org/generator/configreference/xmlconfig.html</a>, æˆ‘ä»¬åªéœ€è¦åœ¨è¿™åŸºç¡€ä¸Šç¨ä½œä¿®æ”¹ã€‚</p>
</blockquote>
<p>ä»¥ä¸‹æ˜¯æˆ‘ä¿®æ”¹ä¹‹åçš„é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">generatorConfiguration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;DB2Tables&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;MyBatis3&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        è®¾ç½®ä¸ç”Ÿæˆæ³¨é‡Šï¼Œå¯å†™ï¼Œå¯ä¸å†™--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suppressAllComments&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        é…ç½®æ•°æ®åº“è¿æ¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">connectionURL</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/ssm&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">userId</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">password</span>=<span class="string">&quot;333&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;forceBigDecimals&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--       JavaBeanç”Ÿæˆçš„ä½ç½®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.Jancoyan.domain&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">targetProject</span>=<span class="string">&quot;./src/main/java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        mapperæ–‡ä»¶ç”Ÿæˆçš„ä½ç½®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;mapper&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">targetProject</span>=<span class="string">&quot;./src/main/resources&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        DAOæ–‡ä»¶ç”Ÿæˆçš„ä½ç½®--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">&quot;XMLMAPPER&quot;</span></span></span><br><span class="line"><span class="tag">                             <span class="attr">targetPackage</span>=<span class="string">&quot;com.Jancoyan.dao&quot;</span></span></span><br><span class="line"><span class="tag">                             <span class="attr">targetProject</span>=<span class="string">&quot;./src/main/java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--        è¡¨ç›¸å…³æ•°æ®--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        tableNameè¡¨ç¤ºéœ€è¦ç”Ÿæˆçš„è¡¨åå­—</span></span><br><span class="line"><span class="comment">               domainObjectName è¡¨ç¤ºç”Ÿæˆçš„ç±»å--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;tbl_dept&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Department&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;tbl_emp&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Employee&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>ç›¸å…³æ ‡ç­¾è§£é‡Šï¼š</p>
<ul>
<li><p>jdbcConnection é…ç½®æ•°æ®åº“è¿æ¥</p>
<ul>
<li>æ ‡ç­¾æ˜¯è‡ªå·±çš„æ•°æ®åº“é…ç½®ä¿¡æ¯</li>
</ul>
</li>
<li><p>javaModelGenerator æŒ‡å®šJavaBeanç”Ÿæˆçš„ä½ç½®</p>
<ul>
<li>targetPackage: éœ€è¦ç”Ÿæˆçš„åŒ…</li>
<li>targetProject: æŒ‡å®šç”Ÿæˆçš„ä½ç½®</li>
</ul>
</li>
<li><p>sqlMapGenerator æŒ‡å®šSQLæ˜ å°„æ–‡ä»¶ç”Ÿæˆä½ç½®</p>
<ul>
<li>targetPackage: éœ€è¦ç”Ÿæˆçš„åŒ…</li>
<li>targetProject: æŒ‡å®šç”Ÿæˆçš„ä½ç½®</li>
</ul>
</li>
<li><p>javaClientGenerator æŒ‡å®šDAOæ¥å£ç”Ÿæˆçš„ä½ç½®</p>
<ul>
<li>targetPackage: éœ€è¦ç”Ÿæˆçš„åŒ…</li>
<li>targetProject: æŒ‡å®šç”Ÿæˆçš„ä½ç½®</li>
</ul>
</li>
<li><p>table æŒ‡å®šæ¯ä¸ªè¡¨çš„ç”Ÿæˆç­–ç•¥</p>
<ul>
<li>tableNameå±æ€§ éœ€è¦é€†å‘ç”Ÿæˆçš„è¡¨å</li>
<li>domainObjectName ç”Ÿæˆçš„ç±»å</li>
</ul>
</li>
</ul>
</li>
<li><p>ç¼–å†™Javaæ–‡ä»¶è¿è¡Œç”Ÿæˆç›¸å…³ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.Jancoyan.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.api.MyBatisGenerator;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.config.xml.ConfigurationParser;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.generator.internal.DefaultShellCallback;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MBGTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        List&lt;String&gt; warnings = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">overwrite</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="type">File</span> <span class="variable">configFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;mbg.xml&quot;</span>); <span class="comment">// è‡ªå·±çš„é…ç½®æ–‡ä»¶çš„åç§°</span></span><br><span class="line">        <span class="type">ConfigurationParser</span> <span class="variable">cp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConfigurationParser</span>(warnings);</span><br><span class="line">        <span class="type">Configuration</span> <span class="variable">config</span> <span class="operator">=</span> cp.parseConfiguration(configFile);</span><br><span class="line">        <span class="type">DefaultShellCallback</span> <span class="variable">callback</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultShellCallback</span>(overwrite);</span><br><span class="line">        <span class="type">MyBatisGenerator</span> <span class="variable">myBatisGenerator</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyBatisGenerator</span>(config, callback, warnings);</span><br><span class="line">        myBatisGenerator.generate(<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿è¡ŒæˆåŠŸä¹‹åå°±ç”Ÿæˆäº†ç›¸å…³ç±»ã€‚</p>
</li>
</ol>
</div>
    </div>

    <div class="post-meta">
        <i>
        
            <span>2021-01-09</span>
            
            
             
        
        </i>
    </div>
    <br>
    
    
        
            
    
            <div class="post-footer-pre-next">
                
                    <span>ä¸Šä¸€ç¯‡ï¼š<a href='/2021/01/11/SpringMVC/'>ç¬”è®° | SpringMVC</a></span>
                

                
                    <span class="post-footer-pre-next-last-span-right">ä¸‹ä¸€ç¯‡ï¼š<a href="/2021/01/04/Spring5/">ç¬”è®° | Spring5</a>
                    </span>
                
            </div>
    
        
    

    
        

     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
             

            
                

            
        </span>
       
    
</div>



<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>Change And Challenge</span>
            
    
</div>


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!--ç›®å½•-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    

    
<script src="/js/randomHeaderContent.js"></script>

    <!--å›åˆ°é¡¶éƒ¨æŒ‰é’®-->
    
        
<script src="/js/returnToTop.js"></script>

    

    
        
<script src="/js/returnToLastPage.js"></script>

    





<script src="/js/lightgallery/lightgallery.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-thumbnail.umd.min.js"></script>



<script src="/js/lightgallery/plugins/lg-fullscreen.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-autoplay.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-zoom.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-rotate.umd.min.js"></script>


<script src="/js/lightgallery/plugins/lg-paper.umd.min.js"></script>




<script type="text/javascript">
     
    if (typeof lightGallery !== "undefined") {
        var options1 = {
            selector: '.gallery-item',
            plugins: [lgThumbnail, lgFullscreen, lgAutoplay, lgZoom, lgRotate, lgPager], // å¯ç”¨æ’ä»¶
            thumbnail: true,          // æ˜¾ç¤ºç¼©ç•¥å›¾
            zoom: true,               // å¯ç”¨ç¼©æ”¾åŠŸ
            rotate: true,             // å¯ç”¨æ—‹è½¬åŠŸèƒ½èƒ½
            autoplay: true,        // å¯ç”¨è‡ªåŠ¨æ’­æ”¾åŠŸèƒ½
            fullScreen: true,      // å¯ç”¨å…¨å±åŠŸèƒ½
            pager: false, //é¡µç ,
            zoomFromOrigin: true,   // ä»åŸå§‹ä½ç½®ç¼©æ”¾
            actualSize: true,       // å¯ç”¨æŸ¥çœ‹å®é™…å¤§å°çš„åŠŸèƒ½
            enableZoomAfter: 300,    // å»¶è¿Ÿç¼©æ”¾ï¼Œç¡®ä¿å›¾ç‰‡åŠ è½½å®Œæˆåå¯ç¼©æ”¾
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options1); // ä¿®å¤é€‰æ‹©å™¨
    }
    
</script>


                </div>
            
            
                <!-- å›åˆ°é¡¶éƒ¨çš„æŒ‰é’®-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
            
                <!-- è¿”å›çš„æŒ‰é’®-->  
                <div class="return-to-last-progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>
</html>