---
title: '笔记 | 正则表达式'
date: 2020-07-20 13:09:24
tags:
---

## 基本使用

基本匹配： 直接输入，全字匹配

`.` 匹配任何字符

字符集 `[]` 匹配方括号内的任意字符

否定字符集 `[^]` 方括号内的字符不匹配

字母范围 `[a-h]` 匹配范围内的字母，左右都是闭合的

数字范围 `[a-h]` 匹配范围内的数字，左右都是闭合的

## 重复

`*` 字符和星号在一起，表示字符出现**0次或者多次**，比如`a*`表示字符`a`出现0次或者多次

`+` 字符和+号在一起，表示字符出现**1次或者多次**，比如`a+`表示字符`a`出现1次或者多次

`?` 字符和？号在一起，表示字符出现**0次或1次**，比如`a？`表示字符`a`出现0次或者1次

`{}` 表示指定字符出现的次数，`a{2}`表示匹配出现两次的a

`{n,}` 表示指定字符**至少**出现的次数，`a{2,}`表示匹配至少出现两次的a

`{n,m}` 表示指定字符出现的次数的**范围**，`a{2,4}`表示匹配出现2到4词的a字符，包含2和4

## 分组

[[../../../../../1.收集箱/simpread_clipper/repo/1-python正则表达式精讲--分组 - 知乎|正则表达式-分组--知乎]]

`()`构成分组，这样方便提取

`(ha)-\1,(haa)-\2` 1和2表示分组的顺序

`(?: )` 非捕获分组（匿名分组），也就是不被捕获，

## 位置

`|` 竖线允许一个表达式包含多个不同的分支，所有分支用|分隔。

`\` 转义字符，用来转义 `{ } [ ] / \ + * . $^ | ?`

`^` 插入符号。在表达式**前面**加上这个符号，表示匹配表达式的开始

`$` 结束符。在表达式**后面**加上这个符号，表示匹配表达式的结尾

## 单词字符

`\w` 匹配 字母、数字和下划线

`\W` 匹配除了 字母、数字和下划线 之外的所有东西

`\d` 匹配 数字

`\D` 匹配 非数字

`\s` 匹配空白字符

`\S` 匹配非空白字符


## 零宽断言

我们希望正在写的词语出现在另一个词语之前或之后

`(?=)` 正向先行断言，`\d+(?=PM)`表示匹配数字，数字后面有PM

`(?!)` 负向先行断言，`\d+(?!PM)`表示匹配数字，数字后面没有PM字母

`(?<=)` 正向后行断言，`(?<=\$)\d+` 表示匹配数字，数字前面是$符号

`(?<!)` 负向后行断言，`(?<!\$)\d+` 表示匹配数字，数字前面不是$符号

## 标志

全局标志，选中所有匹配项目 `/\w+\.com/g`

多行标志，单独处理每一行`/\w+\.com/m`

忽略大小写标志，大小写不再敏感 `/\w+\.com/i`

> 可以叠加 `/\w+\.com/gmi`

## 匹配机制

`.*` 贪心匹配，匹配满足条件的**最长**的字符串，比如`.*r`是匹配以r结尾的最长子串

`.*?` 懒惰匹配，匹配满足条件的**最短**的字符串，比如`.*?r`是匹配以r结尾的最短子串

# 其他解决方案

匹配java的行内注释

```java
目标：/*asdasd*/

模式：/\\[\\s\\S]?\\*/

目标：

/*
	Author: Jancoyan
	Date: 2020-03-03
*/

模式：/\/\*[\w\W]*?\*\/|\/\/.*/

模式：`/\_[\s\S]_?\*/`
```

匹配空行

```java
^(\\t)*$\\n   tab构成的空行
^( )*$\\n   空格构成的空行
/^\\s*$/  
```


#正则表达式 

> 借鉴了 [CSDN-正则表达式校验日期时间格式](https://blog.csdn.net/chuixue24/article/details/111352791)

## 日期校验

### yyyyMMdd

```js
((\d{3}[1-9]|\d{2}[1-9]\d|\d[1-9]\d{2}|[1-9]\d{3})(((0[13578]|1[02])(0[1-9]|[12]\d|3[01]))|((0[469]|11)(0[1-9]|[12]\d|30))|(02(0[1-9]|[1]\d|2[0-8]))))|(((\d{2})(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00))0229)
```

举例：
- 20220102 √
- 20200202 √
- 20010222 √
- 20220229 ×

### yyyy-MM-dd

```js
((([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})-(((0[13578]|1[02])-(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)-(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8]))))|((([0-9]{2})(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00))-02-29))
```

注意：连字符中间不能有空格

举例：
- 2022-01-02 √
- 2020-02-02 √
- 2001-02-22 √
- 2022-02-29 ×
- 2022 - 02 - 20 ×

## 时间校验

### HHmmss

```js
([0-1]?[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])
```

举例：
- 21:02:12 √
- 12:21:22 √
- 15:21:22 √

注意：冒号是英文的

### HHmmss

```js
([0-1]?[0-9]|2[0-3])([0-5][0-9])([0-5][0-9])
```

举例：
- 210212 √
- 122122 √
- 152122 √

### HH-mm-ss

```js
([0-1]?[0-9]|2[0-3])-([0-5][0-9])-([0-5][0-9])
```

举例：
- 21-02-12 √
- 12-21-22 √
- 15-21-22 √

## 日期时间校验

### yyyyMMddHHmmss

```js
((([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})(((0[13578]|1[02])(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)(0[1-9]|[12][0-9]|30))|(02(0[1-9]|[1][0-9]|2[0-8]))))|((([0-9]{2})(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00))0229))([0-1]?[0-9]|2[0-3])([0-5][0-9])([0-5][0-9])

```

###  yyyy-MM-dd HH:mm:ss

```js
((([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})-(((0[13578]|1[02])-(0[1-9]|[12][0-9]|3[01]))|((0[469]|11)-(0[1-9]|[12][0-9]|30))|(02-(0[1-9]|[1][0-9]|2[0-8]))))|((([0-9]{2})(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00))-02-29))\\s+([0-1]?[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])

```